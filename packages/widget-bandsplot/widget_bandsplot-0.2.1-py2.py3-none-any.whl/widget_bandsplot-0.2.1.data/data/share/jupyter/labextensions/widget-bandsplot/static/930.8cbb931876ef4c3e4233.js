(self.webpackChunkwidget_bandsplot=self.webpackChunkwidget_bandsplot||[]).push([[930],{9588:(e,t,n)=>{e.exports=function(e){var t=e.helpers,i=n(8807)(e),a=n(3716)(e),o=e.Annotation.types;function l(e){i.decorate(e,"afterDataLimits",(function(e,t){e&&e(t),i.adjustScaleRange(t)}))}function r(e){return function(t,n){var a=t.annotation.options.drawTime;i.elements(t).filter((function(t){return e===(t.options.drawTime||a)})).forEach((function(e){e.transition(n).draw()}))}}return{beforeInit:function(e){var n=e.options,a=e.annotation={elements:{},options:i.initConfig(n.annotation||{}),onDestroy:[],firstRun:!0,supported:!1};e.ensureScalesHaveIDs(),n.scales&&(a.supported=!0,t.each(n.scales.xAxes,l),t.each(n.scales.yAxes,l))},beforeUpdate:function(e){var t=e.annotation;if(t.supported){t.firstRun?t.firstRun=!1:t.options=i.initConfig(e.options.annotation||{});var n=[];t.options.annotations.forEach((function(a){var l=a.id||i.objectId();if(!t.elements[l]&&o[a.type]){var r=new(0,o[a.type])({id:l,options:a,chartInstance:e});r.initialize(),t.elements[l]=r,a.id=l,n.push(l)}else t.elements[l]&&n.push(l)})),Object.keys(t.elements).forEach((function(e){-1===n.indexOf(e)&&(t.elements[e].destroy(),delete t.elements[e])}))}},afterScaleUpdate:function(e){i.elements(e).forEach((function(e){e.configure()}))},beforeDatasetsDraw:r("beforeDatasetsDraw"),afterDatasetsDraw:r("afterDatasetsDraw"),afterDraw:r("afterDraw"),afterInit:function(e){var n=e.annotation.options.events;if(t.isArray(n)&&n.length>0){var i=e.chart.canvas,o=a.dispatcher.bind(e);a.collapseHoverEvents(n).forEach((function(n){t.addEvent(i,n,o),e.annotation.onDestroy.push((function(){t.removeEvent(i,n,o)}))}))}},destroy:function(e){for(var t=e.annotation.onDestroy;t.length>0;)t.pop()()}}}},6175:e=>{e.exports=function(e){var t=e.helpers;return e.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=t.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}})}},3716:(e,t,n)=>{e.exports=function(e){var t=e.helpers,i=n(8807)(e);function a(e){var t=!1,n=e.filter((function(e){switch(e){case"mouseenter":case"mouseover":case"mouseout":case"mouseleave":return t=!0,!1;default:return!0}}));return t&&-1===n.indexOf("mousemove")&&n.push("mousemove"),n}return{dispatcher:function(e){var n=this.annotation,o=i.elements(this),l=t.getRelativePosition(e,this.chart),r=i.getNearestItems(o,l),s=a(n.options.events),c=n.options.dblClickSpeed,u=[],d=i.getEventHandlerName(e.type),f=(r||{}).options;if("mousemove"===e.type&&(r&&!r.hovering?["mouseenter","mouseover"].forEach((function(t){var n=i.getEventHandlerName(t),a=i.createMouseEvent(t,e);r.hovering=!0,"function"==typeof f[n]&&u.push([f[n],a,r])})):r||o.forEach((function(t){if(t.hovering){t.hovering=!1;var n=t.options;["mouseout","mouseleave"].forEach((function(a){var o=i.getEventHandlerName(a),l=i.createMouseEvent(a,e);"function"==typeof n[o]&&u.push([n[o],l,t])}))}}))),r&&s.indexOf("dblclick")>-1&&"function"==typeof f.onDblclick){if("click"===e.type&&"function"==typeof f.onClick)return clearTimeout(r.clickTimeout),r.clickTimeout=setTimeout((function(){delete r.clickTimeout,f.onClick.call(r,e)}),c),e.stopImmediatePropagation(),void e.preventDefault();"dblclick"===e.type&&r.clickTimeout&&(clearTimeout(r.clickTimeout),delete r.clickTimeout)}r&&"function"==typeof f[d]&&0===u.length&&u.push([f[d],e,r]),u.length>0&&(e.stopImmediatePropagation(),e.preventDefault(),u.forEach((function(e){e[0].call(e[2],e[1])})))},collapseHoverEvents:a}}},8807:e=>{function t(){}function n(e){var t=e.annotation.elements;return Object.keys(t).map((function(e){return t[e]}))}function i(){return Math.random().toString(36).substr(2,6)}function a(e){return null!=e&&("number"==typeof e?isFinite(e):!!e)}function o(e,t,n){var i="$";e[i+t]||(e[t]?(e[i+t]=e[t].bind(e),e[t]=function(){var a=[e[i+t]].concat(Array.prototype.slice.call(arguments));return n.apply(e,a)}):e[t]=function(){var t=[void 0].concat(Array.prototype.slice.call(arguments));return n.apply(e,t)})}function l(e,t){e.forEach((function(e){(t?e[t]:e)()}))}function r(e){return"on"+e[0].toUpperCase()+e.substring(1)}function s(e,t){try{return new MouseEvent(e,t)}catch(a){try{var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,t.canBubble,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n}catch(n){var i=document.createEvent("Event");return i.initEvent(e,t.canBubble,t.cancelable),i}}}e.exports=function(e){var c=e.helpers;return{initConfig:function(t){return t=c.configMerge(e.Annotation.defaults,t),c.isArray(t.annotations)&&t.annotations.forEach((function(t){t.label=c.configMerge(e.Annotation.labelDefaults,t.label)})),t},elements:n,callEach:l,noop:t,objectId:i,isValid:a,decorate:o,adjustScaleRange:function(e){var t,i,a,o,l,r=(t=e.id,i=n(e.chart),a=e.min,o=e.max,{min:(l=i.filter((function(e){return!!e._model.ranges[t]})).map((function(e){return e._model.ranges[t]}))).map((function(e){return Number(e.min)})).reduce((function(e,t){return isFinite(t)&&!isNaN(t)&&t<e?t:e}),a),max:l.map((function(e){return Number(e.max)})).reduce((function(e,t){return isFinite(t)&&!isNaN(t)&&t>e?t:e}),o)});void 0===e.options.ticks.min&&void 0===e.options.ticks.suggestedMin&&(e.min=r.min),void 0===e.options.ticks.max&&void 0===e.options.ticks.suggestedMax&&(e.max=r.max),e.handleTickRangeOptions&&e.handleTickRangeOptions()},getNearestItems:function(e,t){var n=Number.POSITIVE_INFINITY;return e.filter((function(e){return e.inRange(t.x,t.y)})).reduce((function(e,i){var a=i.getCenterPoint(),o=c.distanceBetweenPoints(t,a);return o<n?(e=[i],n=o):o===n&&e.push(i),e}),[]).sort((function(e,t){var n=e.getArea(),i=t.getArea();return n>i||n<i?n-i:e._index-t._index})).slice(0,1)[0]},getEventHandlerName:r,createMouseEvent:s}}},1930:(e,t,n)=>{var i=n(9420);(i="function"==typeof i?i:window.Chart).Annotation=i.Annotation||{},i.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},i.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},i.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:i.defaults.global.defaultFontFamily,fontSize:i.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},i.Annotation.Element=n(6175)(i),i.Annotation.types={line:n(1044)(i),box:n(761)(i)};var a=n(9588)(i);e.exports=a,i.pluginService.register(a)},761:(e,t,n)=>{e.exports=function(e){var t=n(8807)(e);return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,n=this.options,i=this.chartInstance,a=i.scales[n.xScaleID],o=i.scales[n.yScaleID],l=i.chartArea;if(e.ranges={},l){var r=0,s=0;a&&(r=t.isValid(n.xMin)?n.xMin:a.getPixelForValue(l.left),s=t.isValid(n.xMax)?n.xMax:a.getPixelForValue(l.right),e.ranges[n.xScaleID]={min:Math.min(r,s),max:Math.max(r,s)}),o&&(r=t.isValid(n.yMin)?n.yMin:o.getPixelForValue(l.bottom),s=t.isValid(n.yMax)?n.yMax:o.getPixelForValue(l.top),e.ranges[n.yScaleID]={min:Math.min(r,s),max:Math.max(r,s)})}},configure:function(){var e=this._model,n=this.options,i=this.chartInstance,a=i.scales[n.xScaleID],o=i.scales[n.yScaleID],l=i.chartArea;e.clip={x1:l.left,x2:l.right,y1:l.top,y2:l.bottom};var r,s,c=l.left,u=l.top,d=l.right,f=l.bottom;a&&(r=t.isValid(n.xMin)?a.getPixelForValue(n.xMin):l.left,s=t.isValid(n.xMax)?a.getPixelForValue(n.xMax):l.right,c=Math.min(r,s),d=Math.max(r,s)),o&&(r=t.isValid(n.yMin)?o.getPixelForValue(n.yMin):l.bottom,s=t.isValid(n.yMax)?o.getPixelForValue(n.yMax):l.top,u=Math.min(r,s),f=Math.max(r,s)),e.left=c,e.top=u,e.right=d,e.bottom=f,e.borderColor=n.borderColor,e.borderWidth=n.borderWidth,e.backgroundColor=n.backgroundColor},inRange:function(e,t){var n=this._model;return n&&e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom},getCenterPoint:function(){var e=this._model;return{x:(e.right+e.left)/2,y:(e.bottom+e.top)/2}},getWidth:function(){var e=this._model;return Math.abs(e.right-e.left)},getHeight:function(){var e=this._model;return Math.abs(e.bottom-e.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var e=this._view,t=this.chartInstance.chart.ctx;t.save(),t.beginPath(),t.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),t.clip(),t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,t.fillStyle=e.backgroundColor;var n=e.right-e.left,i=e.bottom-e.top;t.fillRect(e.left,e.top,n,i),t.strokeRect(e.left,e.top,n,i),t.restore()}})}},1044:(e,t,n)=>{e.exports=function(e){var t=e.helpers,i=n(8807)(e),a="horizontal",o="vertical";function l(e){var t=(e.x2-e.x1)/(e.y2-e.y1),n=e.x1||0;this.m=t,this.b=n,this.getX=function(i){return t*(i-e.y1)+n},this.getY=function(i){return(i-n)/t+e.y1},this.intersects=function(e,t,n){n=n||.001;var i=this.getY(e),a=this.getX(t);return(!isFinite(i)||Math.abs(t-i)<n)&&(!isFinite(a)||Math.abs(e-a)<n)}}return e.Annotation.Element.extend({setDataLimits:function(){var e=this._model,t=this.options;e.ranges={},e.ranges[t.scaleID]={min:t.value,max:t.endValue||t.value}},configure:function(){var e,n,r=this._model,s=this.options,c=this.chartInstance,u=c.chart.ctx,d=c.scales[s.scaleID];if(d&&(e=i.isValid(s.value)?d.getPixelForValue(s.value):NaN,n=i.isValid(s.endValue)?d.getPixelForValue(s.endValue):e),!isNaN(e)){var f=c.chartArea;r.clip={x1:f.left,x2:f.right,y1:f.top,y2:f.bottom},this.options.mode==a?(r.x1=f.left,r.x2=f.right,r.y1=e,r.y2=n):(r.y1=f.top,r.y2=f.bottom,r.x1=e,r.x2=n),r.line=new l(r),r.mode=s.mode,r.labelBackgroundColor=s.label.backgroundColor,r.labelFontFamily=s.label.fontFamily,r.labelFontSize=s.label.fontSize,r.labelFontStyle=s.label.fontStyle,r.labelFontColor=s.label.fontColor,r.labelXPadding=s.label.xPadding,r.labelYPadding=s.label.yPadding,r.labelCornerRadius=s.label.cornerRadius,r.labelPosition=s.label.position,r.labelXAdjust=s.label.xAdjust,r.labelYAdjust=s.label.yAdjust,r.labelEnabled=s.label.enabled,r.labelContent=s.label.content,u.font=t.fontString(r.labelFontSize,r.labelFontStyle,r.labelFontFamily);var h=u.measureText(r.labelContent).width,b=u.measureText("M").width,m=function(e,t,n,i,l){var r=e.line,s={},c=0,u=0;switch(!0){case e.mode==o&&"top"==e.labelPosition:u=l+e.labelYAdjust,c=t/2+e.labelXAdjust,s.y=e.y1+u,s.x=(isFinite(r.m)?r.getX(s.y):e.x1)-c;break;case e.mode==o&&"bottom"==e.labelPosition:u=n+l+e.labelYAdjust,c=t/2+e.labelXAdjust,s.y=e.y2-u,s.x=(isFinite(r.m)?r.getX(s.y):e.x1)-c;break;case e.mode==a&&"left"==e.labelPosition:c=i+e.labelXAdjust,u=-n/2+e.labelYAdjust,s.x=e.x1+c,s.y=r.getY(s.x)+u;break;case e.mode==a&&"right"==e.labelPosition:c=t+i+e.labelXAdjust,u=-n/2+e.labelYAdjust,s.x=e.x2-c,s.y=r.getY(s.x)+u;break;default:s.x=(e.x1+e.x2-t)/2+e.labelXAdjust,s.y=(e.y1+e.y2-n)/2+e.labelYAdjust}return s}(r,h,b,r.labelXPadding,r.labelYPadding);r.labelX=m.x-r.labelXPadding,r.labelY=m.y-r.labelYPadding,r.labelWidth=h+2*r.labelXPadding,r.labelHeight=b+2*r.labelYPadding,r.borderColor=s.borderColor,r.borderWidth=s.borderWidth,r.borderDash=s.borderDash||[],r.borderDashOffset=s.borderDashOffset||0}},inRange:function(e,t){var n=this._model;return n.line&&n.line.intersects(e,t,this.getHeight())||n.labelEnabled&&n.labelContent&&e>=n.labelX&&e<=n.labelX+n.labelWidth&&t>=n.labelY&&t<=n.labelY+n.labelHeight},getCenterPoint:function(){return{x:(this._model.x2+this._model.x1)/2,y:(this._model.y2+this._model.y1)/2}},getWidth:function(){return Math.abs(this._model.right-this._model.left)},getHeight:function(){return this._model.borderWidth||1},getArea:function(){return Math.sqrt(Math.pow(this.getWidth(),2)+Math.pow(this.getHeight(),2))},draw:function(){var e=this._view,n=this.chartInstance.chart.ctx;e.clip&&(n.save(),n.beginPath(),n.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),n.clip(),n.lineWidth=e.borderWidth,n.strokeStyle=e.borderColor,n.setLineDash&&n.setLineDash(e.borderDash),n.lineDashOffset=e.borderDashOffset,n.beginPath(),n.moveTo(e.x1,e.y1),n.lineTo(e.x2,e.y2),n.stroke(),e.labelEnabled&&e.labelContent&&(n.beginPath(),n.rect(e.clip.x1,e.clip.y1,e.clip.x2-e.clip.x1,e.clip.y2-e.clip.y1),n.clip(),n.fillStyle=e.labelBackgroundColor,t.drawRoundedRectangle(n,e.labelX,e.labelY,e.labelWidth,e.labelHeight,e.labelCornerRadius),n.fill(),n.font=t.fontString(e.labelFontSize,e.labelFontStyle,e.labelFontFamily),n.fillStyle=e.labelFontColor,n.textAlign="center",n.textBaseline="middle",n.fillText(e.labelContent,e.labelX+e.labelWidth/2,e.labelY+e.labelHeight/2)),n.restore())}})}}}]);