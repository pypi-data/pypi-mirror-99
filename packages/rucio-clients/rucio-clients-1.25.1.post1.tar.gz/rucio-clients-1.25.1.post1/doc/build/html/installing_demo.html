

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting up a Rucio demo environment &mdash; Rucio 1.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rucio 1.2 documentation" href="index.html"/>
        <link rel="next" title="Rucio demo" href="rucio_demo.html"/>
        <link rel="prev" title="Monitoring" href="monitoring.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rucio
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts and terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="replica_workflow.html">Typical replica workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="developing.html">Setting up a Rucio development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">RESTful APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The Client API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database operations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_clients.html">Installing Rucio Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_examples.html">Rucio CLI: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/rucio.html">Rucio CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/rucio-admin.html">Rucio Administrative CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="rse_expressions.html">RSE Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Rucio Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html#errors-and-exceptions">Errors and Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_server.html">Installing Rucio server</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_daemons.html">Installing Rucio daemons</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/daemons.html">Daemons CLIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up a Rucio demo environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-compose">docker-compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-the-containers">Checking the containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initial-setup-of-demo-data">Initial setup of demo data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-container">Using the container</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stopping-the-demo">Stopping the demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-the-webui">Accessing the WebUI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rucio_demo.html">Rucio demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_examples.html">Rucio CLI: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_admin_examples.html">Rucio administration CLI: Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Individual contributors to the source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html#organisations-employing-contributors">Organisations employing contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rucio</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Setting up a Rucio demo environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/installing_demo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-a-rucio-demo-environment">
<h1>Setting up a Rucio demo environment<a class="headerlink" href="#setting-up-a-rucio-demo-environment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Setting up a Rucio demo environment requires to have <cite>docker</cite> and <cite>docker-compose</cite>
installed. Docker is an application that makes it simple and easy to run
application processes. To install Docker for your platform, please refer to
the <a class="reference external" href="https://docs.docker.com/install/">Docker installation guide</a>.
<cite>Git</cite> should be also <a class="reference external" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">installed</a>.</p>
<p>The containers provided here can be used to easily setup a small demo instance of
Rucio with some mock data to play around with some Rucio commands.</p>
</div>
<div class="section" id="docker-compose">
<h2>docker-compose<a class="headerlink" href="#docker-compose" title="Permalink to this headline">¶</a></h2>
<p>A YAML file for <cite>docker-compose</cite> has been provided to allow easily setup of the containers.
to have access to this <a class="reference external" href="https://github.com/rucio/rucio/blob/master/etc/docker/demo/docker-compose.yml">docker-compose.yml file</a>,
you can either:</p>
<ul class="simple">
<li><a class="reference external" href="https://help.github.com/articles/cloning-a-repository/">clone</a> the <a class="reference external" href="https://github.com/rucio/rucio/">Rucio repository</a>,</li>
<li>or <a class="reference external" href="https://help.github.com/articles/fork-a-repo/">fork and clone</a> the <a class="reference external" href="https://github.com/rucio/rucio/">Rucio repository</a> for the ones who want to <a class="reference external" href="https://github.com/rucio/rucio/blob/master/CONTRIBUTING.rst">contribute</a> to Rucio,</li>
</ul>
<p>To run the multi-container Rucio Docker applications, do:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; $ sudo docker-compose --file etc/docker/demo/docker-compose.yml up -d
</pre></div>
</div>
<p>Here we assume that the command is executed at the root of the Rucio cloned repository.</p>
<p>The names of the two containers (rucio and mysql) should be printed in the terminal for you.</p>
</div>
<div class="section" id="checking-the-containers">
<h2>Checking the containers<a class="headerlink" href="#checking-the-containers" title="Permalink to this headline">¶</a></h2>
<p>After you run the docker-compose command you can check the status of the containers:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; $ sudo docker ps
CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS                     PORTS                  NAMES
ad03d8dc3b4a        demo_rucio               &quot;httpd -D FOREGROUND&quot;    13 minutes ago      Up 13 minutes              0.0.0.0:443-&gt;443/tcp   demo_rucio_1
8d5f8253f3d8        mysql/mysql-server:5.7   &quot;/entrypoint.sh mysql&quot;   13 minutes ago      Up 13 minutes (healthy)    3306/tcp, 33060/tcp    demo_mysql_1
</pre></div>
</div>
</div>
<div class="section" id="initial-setup-of-demo-data">
<h2>Initial setup of demo data<a class="headerlink" href="#initial-setup-of-demo-data" title="Permalink to this headline">¶</a></h2>
<p>After the first start of the demo containers you will have to setup the demo account
and the demo data to be able to use the Rucio commands and the WebUI. To do this you
have to simply run the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo docker exec -it demo_rucio_1 /setup_demo.sh
</pre></div>
</div>
<dl class="docutils">
<dt>You might see the following error message::</dt>
<dd>…
sqlalchemy.exc.OperationalError: (_mysql_exceptions.OperationalError) (2003, “Can’t connect to MySQL server on ‘mysql’ (111)”) (Background on this error at: <a class="reference external" href="http://sqlalche.me/e/e3q8">http://sqlalche.me/e/e3q8</a>)</dd>
</dl>
<p>This only means that the MySQL container is not ready, yet, and you just have to wait a
moment before you try again. If everything worked fine you should see something like
this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">INFO</span>  <span class="p">[</span><span class="n">alembic</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">migration</span><span class="p">]</span> <span class="n">Context</span> <span class="n">impl</span> <span class="n">SQLiteImpl</span><span class="o">.</span>
<span class="n">INFO</span>  <span class="p">[</span><span class="n">alembic</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">migration</span><span class="p">]</span> <span class="n">Will</span> <span class="n">assume</span> <span class="n">non</span><span class="o">-</span><span class="n">transactional</span> <span class="n">DDL</span><span class="o">.</span>
<span class="n">INFO</span>  <span class="p">[</span><span class="n">alembic</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">migration</span><span class="p">]</span> <span class="n">Running</span> <span class="n">stamp_revision</span>  <span class="o">-&gt;</span> <span class="mi">2962</span><span class="n">ece31cf4</span>
<span class="n">Start</span> <span class="n">Automatix</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">216</span> <span class="mi">68</span>      <span class="n">DEBUG</span>   <span class="n">Still</span> <span class="mi">1</span> <span class="n">active</span> <span class="n">threads</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">718</span> <span class="mi">68</span>      <span class="n">INFO</span>    <span class="n">Thread</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">Getting</span> <span class="n">data</span> <span class="n">distribution</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">719</span> <span class="mi">68</span>      <span class="n">DEBUG</span>   <span class="n">Thread</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">Probabilities</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;type1&#39;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">719</span> <span class="mi">68</span>      <span class="n">INFO</span>    <span class="n">Thread</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">Running</span> <span class="n">on</span> <span class="n">site</span> <span class="n">SITE1_DISK</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">720</span> <span class="mi">68</span>      <span class="n">INFO</span>    <span class="n">Thread</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="p">]</span> <span class="p">:</span> <span class="n">Generating</span> <span class="n">file</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">tmpOX4uPw</span><span class="o">/</span><span class="n">AOD</span><span class="o">.</span><span class="mi">735</span><span class="n">cd55130fb4852b8b41656428820fc</span> <span class="ow">in</span> <span class="n">dataset</span> <span class="n">tests</span><span class="p">:</span><span class="n">test</span><span class="o">.</span><span class="mf">1925.</span><span class="n">automatix_stream</span><span class="o">.</span><span class="n">recon</span><span class="o">.</span><span class="n">AOD</span><span class="o">.</span><span class="mi">496</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">735</span> <span class="mi">68</span>      <span class="n">DEBUG</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span> <span class="mi">12</span><span class="p">:</span><span class="mi">26</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span><span class="mi">735</span> <span class="mi">68</span>      <span class="n">DEBUG</span>   <span class="mi">1</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="ow">in</span>
<span class="mi">1</span><span class="o">+</span><span class="mi">0</span> <span class="n">records</span> <span class="n">out</span>
<span class="mi">1000000</span> <span class="nb">bytes</span> <span class="p">(</span><span class="mf">1.0</span> <span class="n">MB</span><span class="p">)</span> <span class="n">copied</span><span class="p">,</span> <span class="mf">0.00734248</span> <span class="n">s</span><span class="p">,</span> <span class="mi">136</span> <span class="n">MB</span><span class="o">/</span><span class="n">s</span>
<span class="o">...</span>
</pre></div>
</div>
<p>To test that Rucio is set up correctly you can do a ping and you should
get the rucio version:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo docker exec -it demo_rucio_1 rucio ping
1.15.0
</pre></div>
</div>
</div>
<div class="section" id="using-the-container">
<h2>Using the container<a class="headerlink" href="#using-the-container" title="Permalink to this headline">¶</a></h2>
<p>When everything is ready you can log into the container
and start playing around with rucio:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo docker exec -it demo_rucio_1 /bin/bash
[root@ad03d8dc3b4a rucio]# rucio whoami
status     : ACTIVE
account    : root
account_type : SERVICE
created_at : 2018-02-08T15:37:26
suspended_at : None
updated_at : 2018-02-08T15:37:26
deleted_at : None
email      : None
[root@ad03d8dc3b4a rucio]# rucio list-scopes
tests
user.jdoe
[root@ad03d8dc3b4a rucio]#
</pre></div>
</div>
</div>
<div class="section" id="stopping-the-demo">
<h2>Stopping the demo<a class="headerlink" href="#stopping-the-demo" title="Permalink to this headline">¶</a></h2>
<p>To stop the demo, you can do:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ docker-compose --file etc/docker/demo/docker-compose.yml down
</pre></div>
</div>
</div>
<div class="section" id="accessing-the-webui">
<h2>Accessing the WebUI<a class="headerlink" href="#accessing-the-webui" title="Permalink to this headline">¶</a></h2>
<p>In the demo container is also an instance of the Rucio WebUI started.</p>
<p>To be able to access it you will first have to install the demo client
certificate in your browser. You can find the p12 file containing the
certificate under:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">etc</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">demo</span><span class="o">/</span><span class="n">certs</span><span class="o">/</span><span class="n">rucio_demo_cert</span><span class="o">.</span><span class="n">p12</span>
</pre></div>
</div>
<p>The import password is <cite>rucio-demo</cite>.</p>
<p>Then you can access the WebUI using this url: ´https://&lt;hostname&gt;/ui/´</p>
<p>Normally, it’s <a class="reference external" href="https://localhost/ui/">https://localhost/ui/</a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rucio_demo.html" class="btn btn-neutral float-right" title="Rucio demo" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="monitoring.html" class="btn btn-neutral" title="Monitoring" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2018 CERN for the benefit of the ATLAS collaboration.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>