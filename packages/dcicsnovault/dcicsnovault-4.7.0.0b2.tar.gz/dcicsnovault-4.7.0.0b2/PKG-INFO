Metadata-Version: 2.1
Name: dcicsnovault
Version: 4.7.0.0b2
Summary: Storage support for 4DN Data Portals.
Home-page: https://github.com/4dn-dcic/snovault
License: MIT
Author: 4DN-DCIC Team
Author-email: support@4dnucleome.org
Requires-Python: >=3.6,<3.7
Classifier: Development Status :: 4 - Beta
Classifier: Framework :: Pyramid
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.6
Classifier: Topic :: Database :: Database Engines/Servers
Requires-Dist: MarkupSafe (>=0.23,<1)
Requires-Dist: Pillow (>=6.2.2,<7.0.0)
Requires-Dist: PyBrowserID (>=0.10.0,<0.11.0)
Requires-Dist: PyYAML (>=5.1,<5.3)
Requires-Dist: SPARQLWrapper (>=1.7.6,<2.0.0)
Requires-Dist: SQLAlchemy (==1.3.16)
Requires-Dist: WSGIProxy2 (==0.4.2)
Requires-Dist: WebOb (>=1.8.5,<2.0.0)
Requires-Dist: WebTest (>=2.0.21,<3.0.0)
Requires-Dist: aws_requests_auth (>=0.4.1,<0.5.0)
Requires-Dist: awscli (>=1.15.42,<2.0.0)
Requires-Dist: backports.statistics (==0.1.0)
Requires-Dist: boto3 (>=1.7.42,<2.0.0)
Requires-Dist: dcicutils (>=1.8.3,<2.0.0)
Requires-Dist: elasticsearch_dsl (>=6.4.0,<7.0.0)
Requires-Dist: future (>=0.15.2,<0.16.0)
Requires-Dist: futures (>=3.1.1,<4.0.0)
Requires-Dist: html5lib (==0.9999999)
Requires-Dist: humanfriendly (>=1.44.5,<2.0.0)
Requires-Dist: jsonschema_serialize_fork (==2.1.1)
Requires-Dist: keepalive (==0.5)
Requires-Dist: loremipsum (==1.0.5)
Requires-Dist: netaddr (>=0.7.18,<1)
Requires-Dist: passlib (>=1.6.5,<2.0.0)
Requires-Dist: psutil (>=5.6.6,<6.0.0)
Requires-Dist: psycopg2 (>=2.7.3,<3.0.0)
Requires-Dist: pyramid (==1.10.4)
Requires-Dist: pyramid-multiauth (>=0.8.0,<1)
Requires-Dist: pyramid-retry (>=1.0,<2.0)
Requires-Dist: pyramid-tm (>=2.2.1,<3.0.0)
Requires-Dist: pyramid-translogger (>=0.1,<0.2)
Requires-Dist: pyramid_localroles (>=0.1,<1)
Requires-Dist: python-dateutil (>=2.5.3,<3.0.0)
Requires-Dist: python_magic (==0.4.15)
Requires-Dist: pytz (>=2020.1)
Requires-Dist: rdflib (>=4.2.2,<5.0.0)
Requires-Dist: rdflib-jsonld (>=0.3.0,<1.0.0)
Requires-Dist: rfc3987 (>=1.3.6,<2.0.0)
Requires-Dist: rutter (>=0.2,<1)
Requires-Dist: simplejson (==3.17.0)
Requires-Dist: strict-rfc3339 (>=0.7,<1)
Requires-Dist: structlog (>=18.1.0,<20)
Requires-Dist: subprocess_middleware (>=0.3,<1)
Requires-Dist: transaction (>=2.4.0,<3.0.0)
Requires-Dist: venusian (>=1.2.0,<2.0.0)
Requires-Dist: xlrd (>=1.0.0,<2.0.0)
Requires-Dist: zope.deprecation (>=4.4.0,<5.0.0)
Requires-Dist: zope.interface (>=4.6.0,<5.0.0)
Requires-Dist: zope.sqlalchemy (==1.3)
Project-URL: Documentation, https://github.com/4dn-dcic/snovault
Project-URL: Repository, https://github.com/4dn-dcic/snovault
Description-Content-Type: text/x-rst

=============
DCIC Snovault
=============

|Build status|_

.. |Build status| image:: https://travis-ci.org/4dn-dcic/snovault.svg?branch=master
.. _Build status: https://travis-ci.org/4dn-dcic/snovault

.. Important::

 DCIC Snovault is a FORK of `snovault <https://pypi.org/project/snovault/>`_
 created at the `ENCODE DCC project at Stanford <https://github.com/ENCODE-DCC>`_.
 Our fork supports other projects of the
 `4D Nucleome Data Coordination and Integration Center (4DN-DCIC)
 <https://github.com/4dn-dcic>`_.
 Although this software is available as open source software,
 its primary function is to support our layered projects,
 and we are not at this time able to offer any active support for other uses.
 In particular, this fork does not purport to supersede
 the original `snovault <https://pypi.org/project/snovault/>`_.
 we just have a different use case that we are actively exploring.

Overview
========

DCIC Snovault is a JSON-LD Database Framework that serves as the backend for the 4DN Data portal and CGAP. Check out our full documentation `here
<https://snovault.readthedocs.io/en/latest/>`_.

.. note::

    This repository contains a core piece of functionality shared amongst several projects
    in the 4DN-DCIC. It is meant to be used internally by the DCIC team
    in support of `Fourfront <https://data.4dnucleome.org>`_\ ,
    the 4DN data portal, and at this point in time it is not expected to be useful
    in a standalone/plug-and-play way to others.

Installation in 4DN components
==============================

DCIC Snovault is pip installable as the ``dcicsnovault`` package with::

    $ pip install dcicsnovault``

However, at the present time, the functionality it provides might only be useful in conjunction
with other 4DN-DCIC components.

NOTE: If you'd like to enable Elasticsearch mapping with type=nested, set the environment variable "MAPPINGS_USE_NESTED"
or set the registry setting "mappings.use_nested".

Installation for Development
============================

Currently these are for Mac OSX using homebrew. If using linux, install dependencies with a different package manager.

Step 0: Install Xcode
---------------------

Install Xcode (from App Store) and homebrew: http://brew.sh

Step 1: Verify Homebrew Itself
------------------------------

Verify that homebrew is working properly::

    $ brew doctor

Step 2: Install Homebrewed Dependencies
---------------------------------------

Install or update dependencies::

    $ brew install libevent libmagic libxml2 libxslt openssl postgresql graphviz python3
    $ brew install freetype libjpeg libtiff littlecms webp  # Required by Pillow
    $ brew cask install adoptopenjdk8
    $ brew install elasticsearch@5.6

NOTES:

* If installation of adtopopenjdk8 fails due to an ambiguity, it should work to do this instead::

    $ brew cask install homebrew/cask-versions/adoptopenjdk8

* If you try to invoke elasticsearch and it is not found,
  you may need to link the brew-installed elasticsearch::

    $ brew link --force elasticsearch@5.6

* If you need to update dependencies::

    $ brew update
    $ rm -rf encoded/eggs

* If you need to upgrade brew-installed packages that don't have pinned versions,
  you can use the following. However, take care because there is no command to directly
  undo this effect::

    $ brew update
    $ brew upgrade
    $ rm -rf encoded/eggs

Step 3: Running Poetry
----------------------

To locally install using versions of Python libraries that have worked before, use this::

    $ poetry install


Updating dependencies
=====================

To update the version dependencies, use::

    $ poetry update

This command also takes space-separated names of specific packages to update. For more information, do::

    $ poetry help update


Managing poetry.lock after update
---------------------------------

There may be situations where you do this with no intent to check in the resulting updates,
but once you have checked that the updates are sound, you may wish to check the resulting
``poetry.lock`` file.

Publishing
==========

Normally, a successful build on a tagged branch will cause publication automatically.
It should not be necessary for you to manually use::

    $ poetry publish

Also, you would need appropriate credentials on PyPi for such publication to succeed. As presently configured,
these credentials need to be in the environment variables ``PYPI_USER`` and ``PYPI_PASSWORD``.
If you attempt to do this manually, be sure the version is set properly!

Running tests
=============

To run specific tests locally::

    $ bin/test -k test_name

To run with a debugger::

    $ bin/test --pdb

Specific tests to run locally for schema changes::

    $ bin/test -k test_load_workbook

Run the Pyramid tests with::

    $ bin/test


