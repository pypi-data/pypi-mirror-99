# This configuration file has been automatically generated by ddb
[http.routers]
  [http.routers.extra-service-path_prefix_with_redirect]
    rule = "Host(`secured.project.test`)"
    entrypoints = ["http"]
    service = "extra-service-path_prefix_with_redirect"
    middlewares = ["extra-service-path_prefix_with_redirect-redirect-to-https"]
  [http.routers.extra-service-path_prefix_with_redirect-tls]
    rule = "Host(`secured.project.test`) && PathPrefix(`/path_prefix{regex:$$|/.*}`)"
    entrypoints = ["https"]
    tls = true
    service = "extra-service-path_prefix_with_redirect"
    middlewares = ["extra-service-path_prefix_with_redirect-stripprefix"]
  [http.routers.extra-service-path_prefix_with_redirect-redirect-to-path-prefix-tls]
    rule = "Host(`secured.project.test`)"
    entrypoints = ["https"]
    tls = true
    service = "extra-service-path_prefix_with_redirect"
    middlewares = ["extra-service-path_prefix_with_redirect-redirect-to-path-prefix"]

[http.middlewares]
  [http.middlewares.extra-service-path_prefix_with_redirect-redirect-to-https.redirectScheme]
    scheme = "https"
  [http.middlewares.extra-service-path_prefix_with_redirect-stripprefix.stripPrefix]
    prefixes = "/path_prefix"
  [http.middlewares.extra-service-path_prefix_with_redirect-redirect-to-path-prefix.redirectregex]
    regex = "^.*$"
    replacement = "/path_prefix"

[http.services]
  [http.services.extra-service-path_prefix_with_redirect]
    [http.services.extra-service-path_prefix_with_redirect.loadBalancer]
      [[http.services.extra-service-path_prefix_with_redirect.loadBalancer.servers]]
        url = "http://192.168.240.211:10000"
