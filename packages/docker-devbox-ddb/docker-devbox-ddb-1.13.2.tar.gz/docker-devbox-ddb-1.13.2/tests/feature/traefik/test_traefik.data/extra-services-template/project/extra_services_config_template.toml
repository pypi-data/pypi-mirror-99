# This configuration file has been automatically generated by ddb
[http.routers]
{%- if _local.https is none or _local.https is sameas false %}
  [http.routers.extra-service-{{_local.id}}]
    rule = "{{_local.rule}}"
    entrypoints = ["http"]
    service = "extra-service-{{_local.id}}"
{%- if _local.redirect_to_https %}
    middlewares = ["extra-service-{{_local.id}}-redirect-to-https"]
{%- endif %}
{%- endif %}
{%- if _local.https is none or _local.https is sameas true %}
  [http.routers.extra-service-{{_local.id}}-tls]
    rule = "{{_local.rule}}"
    entrypoints = ["https"]
    tls = true
    service = "extra-service-{{_local.id}}"
{%- if _local.certresolver is defined %}
  [http.routers.extra-service-{{_local.service}}-tls.tls]
    certResolver = "{{_local.certresolver}}"
{%- endif %}
{%- endif %}
{%- if _local.redirect_to_https %}

[http.middlewares]
  [http.middlewares.extra-service-{{_local.id}}-redirect-to-https.redirectScheme]
    scheme = "https"
{%- endif %}

[http.services]
  [http.services.extra-service-{{_local.id}}]
    [http.services.extra-service-{{_local.id}}.loadBalancer]
      [[http.services.extra-service-{{_local.id}}.loadBalancer.servers]]
        url = "{{_local.url}}"

