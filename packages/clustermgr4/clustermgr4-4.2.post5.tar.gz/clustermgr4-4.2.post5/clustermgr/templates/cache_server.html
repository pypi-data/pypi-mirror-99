{% from 'macros.html' import render_checkbox_field %}

{{ form.csrf_token }}

  <div class="form-group {{ 'has-error' if form.hostname.errors else '' }}">
    <label class="control-label col-sm-4" for="hostname">{{ form.hostname.label}}:</label>
      <div class="col-sm-8">
        {{ form.hostname(class="form-control") }}
        
        {% for error in form.hostname.errors %}
            <p class="help-block">{{ error }}</p>
        {% endfor %}
      </div>
  </div>


  <div class="form-group {{ 'has-error' if form.ip.errors else '' }}">
    <label class="control-label col-sm-4" for="ipl">{{ form.ip.label}}:</label>
      <div class="col-sm-8">
        {{ form.ip(class="form-control") }}
        
        {% for error in form.ip.errors %}
            <p class="help-block">{{ error }}</p>
        {% endfor %}
      </div>
  </div>

<div class="form-group {{ 'has-error' if form.ssh_port.errors else '' }}">
    <label class="control-label col-sm-4" for="ssh_port">{{ form.ssh_port.label}}:</label>
      <div class="col-sm-8">
        {{ form.ssh_port(class="form-control") }}
        
        {% for error in form.ssh_port.errors %}
            <p class="help-block">{{ error }}</p>
        {% endfor %}
      </div>
  </div>

<div class="form-group">
    <div class="col-md-offset-4 col-md-8">
        {{ render_checkbox_field(form.install_redis) }}
    </div>
</div>

<div id="redis_form">
  
  <div class="form-group {{ 'has-error' if form.redis_password.errors else '' }}">
    <label class="control-label col-sm-4" for="redis_password">{{ form.redis_password.label}}:</label>
      <div class="col-sm-6">
        {{ form.redis_password(class="form-control") }}
      </div>
      <div class="col-sm-2" ><span id="redis-password-show" class="glyphicon glyphicon-eye-open fa-2x"></span></div>
  </div>

  <div class="form-group {{ 'has-error' if form.stunnel_port.errors else '' }}">
    <label class="control-label col-sm-4" for="redis_password">{{ form.stunnel_port.label}}:</label>
      <div class="col-sm-6">
        {{ form.stunnel_port(class="form-control") }}
      </div>
     
  </div>
  
  
</div>

<script>

$("#redis_password").attr("type","password");
var rps = $("#redis-password-show");

rps.click(function(e){
    if (rps.hasClass("glyphicon-eye-close")){
        rps.removeClass("glyphicon-eye-close");
        rps.addClass("glyphicon-eye-open");
        $("#redis_password").attr("type","password");
        }
    else {
        rps.removeClass("glyphicon-eye-open");
        rps.addClass("glyphicon-eye-close");
        $("#redis_password").attr("type","text");
        }
});

$("#install_redis").click(function(e){
  
  if ($("#install_redis").is(":checked")) {
      $("#redis_form").show();
} else {
    $("#redis_form").hide();
    }
})

</script>
