
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hardware Requirements &#8212; intelmq 2.3.1.alpha1 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="hardware-requirements">
<h1><a class="toc-backref" href="#id1">Hardware Requirements</a><a class="headerlink" href="#hardware-requirements" title="Permalink to this headline">¶</a></h1>
<p>Do you ask yourself how much RAM do you need to give your new IntelMQ virtual machine?</p>
<p>The honest answer is simple and pointless: It depends ;)</p>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hardware-requirements" id="id1">Hardware Requirements</a></p>
<ul>
<li><p><a class="reference internal" href="#intelmq-and-the-messaging-queue-broker" id="id2">IntelMQ and the messaging queue (broker)</a></p>
<ul>
<li><p><a class="reference internal" href="#disk-space" id="id3">Disk space</a></p></li>
<li><p><a class="reference internal" href="#background-on-memory" id="id4">Background on memory</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-components" id="id5">Additional components</a></p>
<ul>
<li><p><a class="reference internal" href="#eventdb" id="id6">EventDB</a></p></li>
<li><p><a class="reference internal" href="#intelmq-cb-mailgen" id="id7">IntelMQ cb mailgen</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="intelmq-and-the-messaging-queue-broker">
<h2><a class="toc-backref" href="#id2">IntelMQ and the messaging queue (broker)</a><a class="headerlink" href="#intelmq-and-the-messaging-queue-broker" title="Permalink to this headline">¶</a></h2>
<p>IntelMQ uses a messaging queue to move the messages between the bots.
All bot instances can only process one message at a time, therefore all other messages need to wait in the queue.
As not all bots are equally fast, the messages will naturally “queue up” before the slower ones.
Further, parsers produce many events with just one message (the report) as input.</p>
<p>The following estimations assume Redis as messaging broker which is the default for IntelMQ.
When RabbitMQ is used, the required resources will differ, and RabbitMQ can handle system overload and therefore a shortage of memory.</p>
<p>As Redis stores all data in memory, the data which is processed at any point in time must fit there, including overheads. Please note that IntelMQ does <em>neither store nor cache</em> any input data. These estimates therefore only relate to the processing step, not the storage.</p>
<p>For a minimal system, these requirements suffice:</p>
<ul class="simple">
<li><p>4 GB of RAM</p></li>
<li><p>2 CPUs</p></li>
<li><p>10 GB disk size</p></li>
</ul>
<p><strong>Depending on your data input, you will need the twentiethfold of the input data size as memory for processing.</strong></p>
<p>When using <a class="reference external" href="http://redis.io/topics/persistence">Redis persistence</a>, you will additionally need twice as much memory for Redis.</p>
<div class="section" id="disk-space">
<h3><a class="toc-backref" href="#id3">Disk space</a><a class="headerlink" href="#disk-space" title="Permalink to this headline">¶</a></h3>
<p>Disk space is only relevant if you save your data to a file, whic is not recommended for production setups, and only useful for testing and evaluation.</p>
<p>Do not forget to rotate your logs or use syslog, especially if you use the logging level “DEBUG”.
logrotate is in use by default for all installation with deb/rpm packages. When other means of installation are used (pip, manual), configure log rotation manually. See <a class="reference internal" href="configuration-management.html#configuration-logging"><span class="std std-ref">Logging</span></a>.</p>
</div>
<div class="section" id="background-on-memory">
<h3><a class="toc-backref" href="#id4">Background on memory</a><a class="headerlink" href="#background-on-memory" title="Permalink to this headline">¶</a></h3>
<p>For experimentation, we used multiple Shadowserver Poodle reports for demonstration purpose, totaling in 120 MB of data. All numbers are estimates and are rounded.
In memory, the report data requires 160 MB. After parsing, the memory usage increases to 850 MB in total, as every data line is stored as JSON, with additional information plus the original data encoded in Base 64.
The further processing steps depend on the configuration, but you can estimate that caches (for lookups and deduplication) and other added information cause an additional size increase of about 2x.
Once a dataset finished processing in IntelMQ, it is no longer stored in memory. Therefore, the memory is only needed to catch high load.</p>
<p>The above numbers result in a factor of 14 for input data size vs. memory required by Redis. Assuming some overhead and memory for the bots’ processes, a factor of 20 seems sensible.</p>
<p>To reduce the amount of required memory and disk size, you can optionally remove the <cite>raw</cite> data field, see <a class="reference internal" href="FAQ.html#faq-remove-raw-data"><span class="std std-ref">Removing raw data for higher performance and less space usage</span></a> in the FAQ.</p>
</div>
</div>
<div class="section" id="additional-components">
<h2><a class="toc-backref" href="#id5">Additional components</a><a class="headerlink" href="#additional-components" title="Permalink to this headline">¶</a></h2>
<p>If some of the <cite>optional</cite> components of the <a class="reference internal" href="ecosystem.html"><span class="doc">IntelMQ Ecosystem</span></a> are in use, they can add additional hardware requirements.</p>
<p>Those components do not add relevant requirements:</p>
<ul class="simple">
<li><p>IntelMQ API: It is just an API for <cite>intelmqctl</cite>.</p></li>
<li><p>IntelMQ Manager: Only contains static files served by the webserver.</p></li>
<li><p>IntelMQ Webinput CSV: Just a webinterface to insert data. Requires the amount of processed data to fit in memory, see above.</p></li>
<li><p>Stats Portal: The aggregation step and Graphana require some resources, but no exact numbers are known.</p></li>
<li><p>Malware Name Mapping</p></li>
<li><p>Docker: The docker layer adds only minimal hardware requirements.</p></li>
</ul>
<div class="section" id="eventdb">
<h3><a class="toc-backref" href="#id6">EventDB</a><a class="headerlink" href="#eventdb" title="Permalink to this headline">¶</a></h3>
<p>When storing data in databases (such as MongoDB, PostgreSQL, ElasticSearch), it is recommended to do this on separate machines for operational reasons.
Using a different machine results in a separation of stream processing to data storage and allows for a specialized system optimization for both use-cases.</p>
</div>
<div class="section" id="intelmq-cb-mailgen">
<h3><a class="toc-backref" href="#id7">IntelMQ cb mailgen</a><a class="headerlink" href="#intelmq-cb-mailgen" title="Permalink to this headline">¶</a></h3>
<p>While the Fody backend and frontend do not have significant requirements, the <a class="reference external" href="https://github.com/Intevation/intelmq-certbund-contact/blob/master/README-ripe-import.md">RIPE import tool of the certbund-contact</a> requires about 8 GB of memory as of March 2021.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/Logo_Intel_MQ.svg" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">IntelMQ is a solution for IT security teams for collecting and processing security feeds using a message queuing protocol.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=certtools&repo=intelmq&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hardware Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration-management.html">Configuration and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="bots.html">Bots</a></li>
<li class="toctree-l1"><a class="reference internal" href="intelmqctl.html">intelmqctl documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="feeds.html">Feeds</a></li>
<li class="toctree-l1"><a class="reference internal" href="FAQ.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intelmq-api.html">Intelmq Api</a></li>
<li class="toctree-l1"><a class="reference internal" href="intelmq-manager.html">IntelMQ Manager</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">IntelMQ Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="ELK-Stack.html">ELK Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="MISP-Integrations.html">MISP integrations in IntelMQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="n6-integrations.html">IntelMQ - n6 Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/guide.html">Developers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/data-harmonization.html">Data Harmonization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/harmonization-fields.html">Harmonization field names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/release-procedure.html">Release procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/feeds-wishlist.html">Feeds wishlist</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter">Introduction</a></li>
      <li>Next: <a href="installation.html" title="next chapter">Installation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, cert.at.
      
      |
      <a href="../_sources/user/hardware-requirements.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>