(self.webpackChunk_ijmbarr_jupyterlab_spellchecker=self.webpackChunk_ijmbarr_jupyterlab_spellchecker||[]).push([[568],{568:function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.spellcheckIcon=void 0;const r=s(91),a=s(245),o=s(419),i=s(441),c=s(510),l=s(389),d=s(865),u=s(453);s(549);const h=n(s(688));t.spellcheckIcon=new o.LabIcon({name:"spellcheck:spellcheck",svgstr:h.default});const g=s(397),p="Adjust spelling to",f="Spell Checker",m=n(s(751)),_=n(s(44)),b=n(s(470)),k=n(s(121)),v=n(s(323)),y=n(s(729)),w=n(s(995)),x=n(s(169)),C=n(s(651)),M=n(s(170)),j=n(s(652)),I=n(s(215)),S=n(s(701)),T=n(s(962)),L=n(s(905)),E=n(s(756)),A=n(s(890)),D=n(s(699)),N=n(s(304)),O=n(s(614)),P=[{code:"en-us",name:"English (American)",aff:m.default,dic:_.default},{code:"en-gb",name:"English (British)",aff:b.default,dic:k.default},{code:"en-ca",name:"English (Canadian)",aff:v.default,dic:y.default},{code:"en-au",name:"English (Australian)",aff:w.default,dic:x.default},{code:"de-de",name:"Deutsch (Deutschland)",aff:C.default,dic:M.default},{code:"de-at",name:"Deutsch (Österreich)",aff:j.default,dic:I.default},{code:"de-ch",name:"Deutsch (Schweiz)",aff:S.default,dic:T.default},{code:"fr-fr",name:"Français (France)",aff:L.default,dic:E.default},{code:"es-es",name:"Español (España)",aff:A.default,dic:D.default},{code:"pt-pt",name:"Português (Portugal)",aff:N.default,dic:O.default}];class B extends i.ReactWidget{constructor(e){super(),this.language_source=e}render(){return d.TextItem({source:this.language_source()})}}class F{constructor(e,t,s,n,r,a,o){this.app=e,this.tracker=t,this.editor_tracker=s,this.setting_registry=n,this.code_mirror=r,this.palette=a,this.status_bar=o,this.status_msg="Dictionary not loaded",this.check_spelling=!0,this.rx_word_char=/[^-[\]{}():/!;&@$£%§<>"*+=?.,~\\^|_`#±\s\t]/,this.rx_non_word_char=/[-[\]{}():/!;&@$£%§<>"*+=?.,~\\^|_`#±\s\t]/,this.ignored_tokens=new Set,this.define_mode=e=>{if(0===e.indexOf("spellcheck_"))return e;const t="spellcheck_"+e;return this.code_mirror.CodeMirror.defineMode(t,(s=>{const n={name:t,token:(e,t)=>{if(e.eatWhile(this.rx_word_char)){const t=e.current().replace(/(^')|('$)/g,"");if(""!==t&&!t.match(/^\d+$/)&&void 0!==this.dictionary&&!this.dictionary.check(t)&&!this.ignored_tokens.has(t))return"spell-error"}return e.eatWhile(this.rx_non_word_char),null}};return this.code_mirror.CodeMirror.overlayMode(this.code_mirror.CodeMirror.getMode(s,e),n,!0)})),t},this.language=P[0],this.setup_settings(),this.setup_button(),this.setup_suggestions(),this.setup_language_picker(),this.setup_ignore_action(),this.tracker.activeCellChanged.connect((()=>{this.tracker.activeCell&&this.setup_cell_editor(this.tracker.activeCell)})),this.editor_tracker.widgetAdded.connect(((e,t)=>this.setup_file_editor(t.content,!0))),this.editor_tracker.currentChanged.connect(((e,t)=>{null!==t&&this.setup_file_editor(t.content,!1)}))}setup_settings(){Promise.all([this.setting_registry.load(H.id),this.app.restored]).then((([e])=>{this.update_settings(e),e.changed.connect((()=>{this.update_settings(e)}))})).catch((e=>{console.error(e.message)}))}_set_theme(e){document.body.setAttribute("data-jp-spellchecker-theme",e)}update_settings(e){this.settings=e;const t=e.get("ignore").composite;this.ignored_tokens=new Set(t),this.accepted_types=e.get("mimeTypes").composite;const s=e.get("theme").composite;this._set_theme(s);const n=e.get("language").composite,r=P.filter((e=>e.code===n))[0];void 0===r?console.warn("The language "+n+" is not supported!"):(this.language=r,this.load_dictionary().catch(console.warn)),this.refresh_state()}setup_file_editor(e,t=!1){if(this.accepted_types&&-1!==this.accepted_types.indexOf(e.model.mimeType)){const t=this.extract_editor(e);this.setup_overlay(t)}t&&e.model.mimeTypeChanged.connect(((t,s)=>{setTimeout((()=>this.setup_file_editor(e)),0)}))}setup_cell_editor(e){if(null!==e&&"markdown"===e.model.type){const t=this.extract_editor(e);this.setup_overlay(t)}}extract_editor(e){return e.editor.editor}setup_overlay(e,t=!0){const s=e.getOption("mode");if("null"!==s)if(this.check_spelling)e.setOption("mode",this.define_mode(s));else{const t=s.match(/^spellcheck_/)?s.substr(11):s;e.setOption("mode",t)}else t&&setTimeout((()=>this.setup_overlay(e,!1)),0)}toggle_spellcheck(){this.check_spelling=!this.check_spelling,console.log("Spell checking is currently: ",this.check_spelling)}setup_button(){this.app.commands.addCommand("spellchecker:toggle-check-spelling",{label:"Toggle spellchecker",execute:()=>{this.toggle_spellcheck()}}),this.palette&&this.palette.addItem({command:"spellchecker:toggle-check-spelling",category:f})}get_contextmenu_context(){const e=this.app._contextMenuEvent,t=e.target.closest(".CodeMirror");if(null===t)return null;const s=t.CodeMirror,n=s.coordsChar({left:e.clientX,top:e.clientY});return{editor:s,position:n}}get_current_word(e){const{editor:t,position:s}=e,n=t.getDoc().getLine(s.line);let r=s.ch;for(;r>0&&n[r].match(this.rx_word_char);)r--;let a=s.ch;for(;a<n.length&&n[a].match(this.rx_word_char);)a++;return{line:s.line,start:r,end:a,text:n.substring(r,a)}}setup_suggestions(){this.suggestions_menu=new c.Menu({commands:this.app.commands}),this.suggestions_menu.title.label=p,this.suggestions_menu.title.icon=t.spellcheckIcon.bindprops({stylesheet:"menuItem"}),this.app.commands.addCommand("spellchecker:update-suggestions",{execute:e=>{},isVisible:e=>(this.prepare_suggestions(),!1)}),this.app.contextMenu.addItem({selector:".cm-spell-error",command:"spellchecker:update-suggestions"}),this.app.contextMenu.addItem({selector:".cm-spell-error",submenu:this.suggestions_menu,type:"submenu"}),this.app.commands.addCommand("spellchecker:apply-suggestion",{execute:e=>{this.apply_suggestion(e.name)},label:e=>e.name})}setup_ignore_action(){this.app.commands.addCommand("spellchecker:ignore",{execute:()=>{this.ignore()},label:"Ignore"}),this.app.contextMenu.addItem({selector:".cm-spell-error",command:"spellchecker:ignore"})}ignore(){const e=this.get_contextmenu_context();if(null===e)console.log("Could not ignore the word as the context was no longer available");else{const t=this.get_current_word(e);this.settings.set("ignore",[t.text.trim(),...this.settings.get("ignore").composite]).catch(console.warn)}}prepare_suggestions(){const e=this.get_contextmenu_context();let t;if(null===e)t=[];else{const s=this.get_current_word(e);t=this.dictionary.suggest(s.text)}if(this.suggestions_menu.clearItems(),t.length){for(const e of t)this.suggestions_menu.addItem({command:"spellchecker:apply-suggestion",args:{name:e}});this.suggestions_menu.title.label=p,this.suggestions_menu.title.className="",this.suggestions_menu.setHidden(!1)}else this.suggestions_menu.title.className="lm-mod-disabled",this.suggestions_menu.title.label="No spellcheck suggestions",this.suggestions_menu.setHidden(!0)}apply_suggestion(e){const t=this.get_contextmenu_context();if(null===t)return void console.warn("Applying suggestion failed (probably was already applied earlier)");const s=this.get_current_word(t);t.editor.getDoc().replaceRange(e,{ch:s.start,line:s.line},{ch:s.end,line:s.line})}load_dictionary(){return this.status_msg="Loading dictionary ...",this.status_widget.update(),Promise.all([fetch(this.language.aff).then((e=>e.text())),fetch(this.language.dic).then((e=>e.text()))]).then((e=>{this.dictionary=new g(this.language.name,e[0],e[1]),console.debug("Dictionary Loaded ",this.language.name,this.language.code),this.status_msg=this.language.name,this.status_widget.update(),this.refresh_state()}))}refresh_state(){null!==this.tracker.activeCell&&this.setup_cell_editor(this.tracker.activeCell),null!==this.editor_tracker.currentWidget&&this.setup_file_editor(this.editor_tracker.currentWidget.content)}choose_language(){const e=[this.language,...P.filter((e=>e.name!==this.language.name))];i.InputDialog.getItem({title:"Choose spellchecker language",items:e.map((e=>e.name))}).then((e=>{null!==e.value&&(this.language=P.filter((t=>t.name===e.value))[0],this.settings.set("language",this.language.code).catch(console.warn))}))}setup_language_picker(){this.status_widget=new B((()=>this.status_msg)),this.status_widget.node.onclick=()=>{this.choose_language()},this.app.commands.addCommand("spellchecker:choose-language",{execute:e=>this.choose_language(),label:"Choose spellchecker language"}),this.palette&&this.palette.addItem({command:"spellchecker:choose-language",category:f}),this.status_bar&&this.status_bar.registerStatusItem("spellchecker:choose-language",{align:"right",item:this.status_widget})}}const H={id:"@ijmbarr/jupyterlab_spellchecker:plugin",autoStart:!0,requires:[a.INotebookTracker,r.IEditorTracker,l.ISettingRegistry,u.ICodeMirror],optional:[i.ICommandPalette,d.IStatusBar],activate:function(e,t,s,n,r,a,o){console.log("Attempting to load spellchecker");const i=new F(e,t,s,n,r,a,o);console.log("Spellchecker Loaded ",i)}};t.default=H},760:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(645),r=s.n(n)()((function(e){return e[1]}));r.push([e.id,"body[data-jp-spellchecker-theme='background-box'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  background: rgba(255, 0, 0, .15);\n}\n\nbody[data-jp-spellchecker-theme='background-box'][data-jp-theme-light='false'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  background: rgba(255, 0, 0, .35);\n  text-shadow: 0 0 5px black;\n}\n\nbody[data-jp-spellchecker-theme='wavy-underline'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  text-decoration-line: underline;\n  text-decoration-style: wavy;\n  text-decoration-color: red;\n  /* For Chrome */\n  text-decoration-skip-ink: none;\n}\n\nbody[data-jp-spellchecker-theme='wavy-underline'][data-jp-theme-light='false'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  /* Use bright red for dark themes */\n  text-decoration-color: #ff5722;\n}\n\nbody[data-jp-spellchecker-theme='dotted-underline'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  text-decoration-line: underline;\n  text-decoration-style: dotted;\n  text-decoration-color: red;\n  /* For Chrome */\n  text-decoration-skip-ink: none;\n}\n\nbody[data-jp-spellchecker-theme='dotted-underline'][data-jp-theme-light='false'] .CodeMirror .cm-spell-error:not(.cm-url):not(.cm-tag):not(.cm-word) {\n  /* Use bright red for dark themes */\n    text-decoration-color: #ff5722;\n}\n",""]);const a=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=e(t);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(r[o]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&r[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),t.push(c))}},t}},652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"217a6cb25b3d57414e6e54fbcf6f88bb.aff"},215:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"0ad6978d8b20fc95ae666fa5a032b5e6.dic"},701:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"cc54a471b90fa000b203fd0a9a905f95.aff"},962:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"7085782c2e6cd983e926e46bad2e757f.dic"},651:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"93c8430734e31ddc4e3f72218ad65a9c.aff"},170:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"d62f8312e4341a44bc699e673f4c10ab.dic"},995:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"bdce6f440e86b50ed324a2a834a3d6cb.aff"},169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"e04d47f0a6d463ec17cb2285c146347a.dic"},323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"bdce6f440e86b50ed324a2a834a3d6cb.aff"},729:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"c879c998bbf83faea2aa1a3cb1f11ae9.dic"},470:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"bdce6f440e86b50ed324a2a834a3d6cb.aff"},121:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"ceef28c58c994145ee07fcb604d8af42.dic"},751:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"bdce6f440e86b50ed324a2a834a3d6cb.aff"},44:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"fea358c2059d3d479bb1194ad85cfbb1.dic"},890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"e104572c75e246e0056c36806b062175.aff"},699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"cd737cb950f32dd93445f2a166c36a21.dic"},905:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"72527085f31d8bafb0884755ab6ecab9.aff"},756:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"c6e54673e081035a39b777d7952540b3.dic"},304:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"bb36b494ca619caec0fc84004099e41e.aff"},614:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=s.p+"b9550cf15a5afc8a005049462bd40aef.dic"},688:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n='<svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24">\n  <g class="jp-icon3 jp-icon-selectable" fill="#616161" shape-rendering="geometricPrecision">\n    <path d="M12.45 16h2.09L9.43 3H7.57L2.46 16h2.09l1.12-3h5.64l1.14 3zm-6.02-5L8.5 5.48L10.57 11H6.43zm15.16.59l-8.09 8.09L9.83 16l-1.41 1.41l5.09 5.09L23 13l-1.41-1.41z"/>\n  </g>\n</svg>\n'},549:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(379),r=s.n(n),a=s(760);r()(a.Z,{insert:"head",singleton:!1});const o=a.Z.locals||{}},379:(e,t,s)=>{"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),a=[];function o(e){for(var t=-1,s=0;s<a.length;s++)if(a[s].identifier===e){t=s;break}return t}function i(e,t){for(var s={},n=[],r=0;r<e.length;r++){var i=e[r],c=t.base?i[0]+t.base:i[0],l=s[c]||0,d="".concat(c," ").concat(l);s[c]=l+1;var u=o(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(a[u].references++,a[u].updater(h)):a.push({identifier:d,updater:f(h,t),references:1}),n.push(d)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=s.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,d=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function u(e,t,s,n){var r=s?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function h(e,t,s){var n=s.css,r=s.media,a=s.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,p=0;function f(e,t){var s,n,r;if(t.singleton){var a=p++;s=g||(g=c(t)),n=u.bind(null,s,a,!1),r=u.bind(null,s,a,!0)}else s=c(t),n=h.bind(null,s,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var s=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<s.length;n++){var r=o(s[n]);a[r].references--}for(var c=i(e,t),l=0;l<s.length;l++){var d=o(s[l]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}s=c}}}}}]);