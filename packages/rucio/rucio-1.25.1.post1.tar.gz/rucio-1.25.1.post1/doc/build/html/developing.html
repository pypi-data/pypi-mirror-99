

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setting up a Rucio development environment &mdash; Rucio 1.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Rucio 1.2 documentation" href="index.html"/>
        <link rel="next" title="RESTful APIs" href="rest.html"/>
        <link rel="prev" title="Contributor Guide" href="contributing.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Rucio
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts and terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="replica_workflow.html">Typical replica workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributor Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setting up a Rucio development environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#container-for-development">Container for Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-compose">docker-compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#docker-by-hand">Docker By Hand</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-tests">Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#git-hook">Git Hook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rest.html">RESTful APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">The Client API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database operations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_clients.html">Installing Rucio Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_examples.html">Rucio CLI: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/rucio.html">Rucio CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/rucio-admin.html">Rucio Administrative CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="rse_expressions.html">RSE Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html">Rucio Clients</a></li>
<li class="toctree-l1"><a class="reference internal" href="clients.html#errors-and-exceptions">Errors and Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_usage.html">Advanced Usage</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_server.html">Installing Rucio server</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_daemons.html">Installing Rucio daemons</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/daemons.html">Daemons CLIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installing_demo.html">Setting up a Rucio demo environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="rucio_demo.html">Rucio demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_examples.html">Rucio CLI: Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli_admin_examples.html">Rucio administration CLI: Examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Individual contributors to the source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html#organisations-employing-contributors">Organisations employing contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rucio</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Setting up a Rucio development environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/developing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-a-rucio-development-environment">
<h1>Setting up a Rucio development environment<a class="headerlink" href="#setting-up-a-rucio-development-environment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Setting up a Rucio development environment requires to have Docker installed. Docker is an
application that makes it simple and easy to run application processes. To install Docker for
your platform, please refer to the <a class="reference external" href="https://docs.docker.com/install/">Docker installation guide</a>.</p>
</div>
<div class="section" id="container-for-development">
<h2>Container for Development<a class="headerlink" href="#container-for-development" title="Permalink to this headline">¶</a></h2>
<p>The Dockerfile in this container is used to centrally produce the docker container available as rucio/rucio-dev. It
provides a rucio environment which allow you to mount your local code in the containers bin, lib, and tools directory. The
container is set up to run against a mysql database called rucio with user rucio, password rucio. Tests and checks may be
run against the development code without having to rebuild the environment for each test.</p>
</div>
<div class="section" id="docker-compose">
<h2>docker-compose<a class="headerlink" href="#docker-compose" title="Permalink to this headline">¶</a></h2>
<p>YAML for docker compose has been provided to allow easily setup the containers from the rucio code directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker-compose --file etc/docker/dev/docker-compose.yml up -d
</pre></div>
</div>
<p>The names of the two containers (rucio and mysql) should be printed in the terminal for you.</p>
</div>
<div class="section" id="docker-by-hand">
<h2>Docker By Hand<a class="headerlink" href="#docker-by-hand" title="Permalink to this headline">¶</a></h2>
<p>The container environment may also be setup by hand. First setup the mysql server:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker run -it -d --name mysql \
        -e MYSQL_RANDOM_ROOT_PASSWORD=True \
        -e MYSQL_DATABASE=rucio \
        -e MYSQL_USER=rucio \
        -e MYSQL_PASSWORD=rucio \
        mysql/mysql-server:5.7
</pre></div>
</div>
<p>And to provide a server for rucio monitoring to report to:</p>
<blockquote>
<div><dl class="docutils">
<dt>$&gt; docker run -d</dt>
<dd>–name graphite–restart=always-p 80:80-p 2003-2004:2003-2004-p 2023-2024:2023-2024-p 8125:8125/udp-p 8126:8126graphiteapp/graphite-statsd</dd>
</dl>
</div></blockquote>
<p>Then start the rucio container:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker run -it -d --name rucio -p &quot;443:443&quot; \
        -v `pwd`/tools/:/opt/rucio/tools \
        -v `pwd`/bin/:/opt/rucio/bin \
        -v `pwd`/lib/:/opt/rucio/lib \
        --link mysql:mysql \
        rucio/rucio-dev
</pre></div>
</div>
</div>
<div class="section" id="running-tests">
<h2>Running Tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h2>
<p>You should have something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker ps
CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS                    PORTS                        NAMES
5bbf88de58a7        graphiteapp/graphite-statsd   &quot;/sbin/my_init&quot;           2 hours ago        Up 2 hours                0.0.0.0:80-&gt;80/tcp, ...     dev_graphite_1
3d9dfb317ada        rucio-dev                     &quot;httpd -D FOREGROUND&quot;    28 minutes ago      Up 28 minutes             0.0.0.0:443-&gt;443/tcp        dev_rucio_1
88a5ad6cf6d0        mysql/mysql-server:5.7        &quot;/entrypoint.sh my...&quot;   28 minutes ago      Up 28 minutes (healthy)   3306/tcp, 33060/tcp         dev_mysql_1
</pre></div>
</div>
<p>Note that the names of the containers may end up looking different on your system. To run the test suite use <cite>docker exec</cite> with the rucio container, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker exec -it dev_rucio_1 tools/run_tests_docker.sh
</pre></div>
</div>
<p>If needed, it is also possible to login directly to the container:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$&gt; docker exec -it dev_rucio_1 /bin/bash
</pre></div>
</div>
</div>
<div class="section" id="git-hook">
<h2>Git Hook<a class="headerlink" href="#git-hook" title="Permalink to this headline">¶</a></h2>
<p>Replace the <cite>pre-commit</cite> hook provided in <cite>tools</cite> with the one provided <a class="reference external" href="https://github.com/rucio/rucio/blob/master/etc/docker/dev/pre-commit">here</a>.
It runs <cite>pylint</cite> in the rucio development container rather then in the local system.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rest.html" class="btn btn-neutral float-right" title="RESTful APIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="contributing.html" class="btn btn-neutral" title="Contributor Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2018 CERN for the benefit of the ATLAS collaboration.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>