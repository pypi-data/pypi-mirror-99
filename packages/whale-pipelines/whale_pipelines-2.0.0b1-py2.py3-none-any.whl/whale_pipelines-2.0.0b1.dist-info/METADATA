Metadata-Version: 2.1
Name: whale-pipelines
Version: 2.0.0b1
Summary: A pared-down metadata scraper + SQL runner.
Home-page: https://github.com/dataframehq/whale
Author: Robert Yi
Author-email: robert@ryi.me
License: UNKNOWN
Platform: UNKNOWN
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: aadict
Requires-Dist: amundsen-databuilder
Requires-Dist: asn1crypto
Requires-Dist: asset
Requires-Dist: azure-common
Requires-Dist: azure-core
Requires-Dist: azure-storage-blob
Requires-Dist: boto3
Requires-Dist: botocore
Requires-Dist: cachetools
Requires-Dist: certifi
Requires-Dist: cffi
Requires-Dist: chardet
Requires-Dist: colored
Requires-Dist: cryptography
Requires-Dist: elasticsearch
Requires-Dist: future
Requires-Dist: globre
Requires-Dist: google-api-core
Requires-Dist: google-api-python-client
Requires-Dist: google-auth
Requires-Dist: google-auth-httplib2
Requires-Dist: google-auth-oauthlib
Requires-Dist: google-cloud-bigquery
Requires-Dist: google-cloud-core
Requires-Dist: google-cloud-datacatalog
Requires-Dist: google-cloud-spanner
Requires-Dist: google-crc32c
Requires-Dist: google-resumable-media
Requires-Dist: googleapis-common-protos
Requires-Dist: grpcio
Requires-Dist: grpcio-gcp
Requires-Dist: httplib2
Requires-Dist: idna
Requires-Dist: isodate
Requires-Dist: Jinja2
Requires-Dist: jmespath
Requires-Dist: msrest
Requires-Dist: neo4j-driver
Requires-Dist: neobolt
Requires-Dist: neotime
Requires-Dist: numpy
Requires-Dist: oauthlib
Requires-Dist: oscrypto
Requires-Dist: pandas
Requires-Dist: proto-plus
Requires-Dist: protobuf
Requires-Dist: psycopg2-binary
Requires-Dist: pyasn1
Requires-Dist: pyasn1-modules
Requires-Dist: pybigquery
Requires-Dist: pycparser
Requires-Dist: pycryptodomex
Requires-Dist: PyHive
Requires-Dist: pyhocon
Requires-Dist: PyJWT
Requires-Dist: pyOpenSSL
Requires-Dist: pyparsing
Requires-Dist: python-dateutil
Requires-Dist: pytz
Requires-Dist: PyYAML
Requires-Dist: requests
Requires-Dist: requests-oauthlib
Requires-Dist: retrying
Requires-Dist: rsa
Requires-Dist: s3transfer
Requires-Dist: six
Requires-Dist: snowflake-connector-python
Requires-Dist: snowflake-sqlalchemy
Requires-Dist: SQLAlchemy
Requires-Dist: statsd
Requires-Dist: termcolor
Requires-Dist: Unidecode
Requires-Dist: uritemplate
Requires-Dist: urllib3

# whale-pipelines

whale-pipelines is a library based on amundsen's databuilder that enables easy extraction of metadata into whale's markdown format. The library references static config files in `~/.whale/` to establish connections and customize the scraping process. Whale also provides hooks into SQLAlchemy for easy execution of SQL queries against these locally defined connections, without having to specify connection strings at every request.

For information on the full CLI platform, visit [whale](https://github.com/dataframehq/whale).

There are two main functions: `pull`, which handles metadata extraction, and `run`, which is enables execution of SQL queries.

## `pull`
While [whale](https://github.com/dataframehq/whale) invokes a `build_script.py` function to run `pull`, it does nothing else than call `pull()`, with some logging set up around it. If, therefore, you'd like to pare down/write a custom CI/CD pipeline, all you need to do is:

```
pip install whale-pipelines
```

then run:
```
import whale as wh
wh.pull()
```

## `run`
While libraries like pydobc, sqlalchemy, pyhive, etc. provide easy-to-use interfaces against a warehouse, the stateless nature of these libraries can make it a bit repetitive -- whenever you need to write a query, you generally need to open a cursor, specifying your warehouse URI and credentials. While somewhat trivial, `run` simply wraps SQLAlchemy, enabling you to open a connection automatically against connections defined in `~/.whale/config/connections.yaml`.

To use this, simply run:
```
import whale as wh
wh.run()
```

A `warehouse_name` kwarg can be specified, which will force `run` to establish a connection with the first warehouse with the corresponding `name` field matching the argument passed. If not given, the first warehouse in the list will be used.


