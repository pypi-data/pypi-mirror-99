(self.webpackChunk_gavincyi_jupyterlab_executor=self.webpackChunk_gavincyi_jupyterlab_executor||[]).push([[559],{559:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>z});var s=n(188),r=n(989),i=n(389),a=n(441),o=n(290),l=n(828),c=n(168),u=n(271);let h=0;const d=Object.create(null),g=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const e of g)for(const t of["-webkit-","-ms-","-moz-","-o-",""])d[t+e]=!0;function f(e,t){return t&&"number"==typeof t&&!d[e]?`${e}:${t}px`:`${e}:${t}`}function p(e){return e.sort(((e,t)=>e[0]>t[0]?1:-1))}function m(e){return e.map((([e,t])=>Array.isArray(t)?t.map((t=>f(e,t))).join(";"):f(e,t))).join(";")}function y(e,t){return-1===e.indexOf("&")?`${t} ${e}`:e.replace(/&/g,t)}function _(e,t,n,s,r){const{style:i,nested:a,isUnique:o}=function(e,t){const n=[],s=[];for(const t of Object.keys(e)){const i=t.trim(),a=e[t];36!==i.charCodeAt(0)&&null!=a&&("object"!=typeof a||Array.isArray(a)?n.push([(r=i,r.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)).replace(/^ms-/,"-ms-")),a]):s.push([i,a]))}var r;return{style:m(p(n)),nested:t?s:p(s),isUnique:!!e.$unique}}(t,""!==e);let l=i;if(64===e.charCodeAt(0)){const t={selector:e,styles:[],rules:[],style:r?"":i};n.push(t),i&&r&&t.styles.push({selector:r,style:i,isUnique:o});for(const[e,n]of a)l+=e+_(e,n,t.rules,t.styles,r)}else{const t=r?y(e,r):e;i&&s.push({selector:t,style:i,isUnique:o});for(const[e,r]of a)l+=e+_(e,r,n,s,t)}return l}function v(e,t,n,s,r,i){for(const{selector:n,style:a,isUnique:o}of s){const s=i?y(n,r):n,l=o?`u\0${(++h).toString(36)}`:`s\0${t}\0${a}`,c=new S(a,l);c.add(new $(s,`k\0${t}\0${s}`)),e.add(c)}for(const{selector:s,style:a,rules:o,styles:l}of n){const n=new C(s,a,`r\0${t}\0${s}\0${a}`);v(n,t,o,l,r,i),e.add(n)}}function b(e){let t="";for(let n=0;n<e.length;n++)t+=e[n];return t}const x={add:()=>{},change:()=>{},remove:()=>{}};class w{constructor(e=x){this.changes=e,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(e){const t=this._counters[e.id]||0,n=this._children[e.id]||e.clone();if(this._counters[e.id]=t+1,0===t)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof w&&e instanceof w){const t=this._keys.indexOf(e.id),s=n.changeId;n.merge(e),n.changeId!==s&&(this.sheet.splice(t,1,n.getStyles()),this.changeId++,this.changes.change(n,t,t))}}remove(e){const t=this._counters[e.id];if(t){this._counters[e.id]=t-1;const n=this._children[e.id],s=this._keys.indexOf(n.id);if(1===t)delete this._counters[e.id],delete this._children[e.id],this._keys.splice(s,1),this.sheet.splice(s,1),this.changeId++,this.changes.remove(n,s);else if(n instanceof w&&e instanceof w){const t=n.changeId;n.unmerge(e),n.changeId!==t&&(this.sheet.splice(s,1,n.getStyles()),this.changeId++,this.changes.change(n,s,s))}}}values(){return this._keys.map((e=>this._children[e]))}merge(e){for(const t of e.values())this.add(t);return this}unmerge(e){for(const t of e.values())this.remove(t);return this}clone(){return(new w).merge(this)}}class ${constructor(e,t){this.selector=e,this.id=t}getStyles(){return this.selector}clone(){return this}}class S extends w{constructor(e,t){super(),this.style=e,this.id=t}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new S(this.style,this.id).merge(this)}}class C extends w{constructor(e,t,n){super(),this.rule=e,this.style=t,this.id=n}getStyles(){return`${this.rule}{${this.style}${b(this.sheet)}}`}clone(){return new C(this.rule,this.style,this.id).merge(this)}}function j(e,t){return`f${function(e){let t=5381,n=e.length;for(;n--;)t=33*t^e.charCodeAt(n);return(t>>>0).toString(36)}(e)}`}class k extends w{constructor(e,t){super(t),this.id=e}registerStyle(e){const t=[],n=[],s=_("&",e,t,n),r=j(s);return v(this,s,t,n,`.${r}`,!0),r}registerKeyframes(e){return this.registerHashRule("@keyframes",e)}registerHashRule(e,t){const n=[],s=[],r=_("",t,n,s),i=j(r),a=new C(`${e} ${i}`,"",`h\0${r}\0${e}`);return v(a,r,n,s,"",!1),this.add(a),i}registerRule(e,t){const n=[],s=[];v(this,_(e,t,n,s),n,s,"",!1)}registerCss(e){return this.registerRule("",e)}getStyles(){return b(this.sheet)}clone(){return new k(this.id,this.changes).merge(this)}}function E(e){var t={};for(var n in e){var s=e[n];if("$nest"===n){var r=s;for(var i in r){var a=r[i];t[i]=E(a)}}else"$debugName"===n?t.$displayName=s:t[n]=s}return t}var I="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window);function R(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},s=0,r=e;s<r.length;s++){var i=r[s];if(null!=i&&!1!==i)for(var a in i){var o=i[a];(o||0===o)&&("$nest"===a&&o?n[a]=n.$nest?R(n.$nest,o):o:-1!==a.indexOf("&")||0===a.indexOf("@media")?n[a]=n[a]?R(n[a],o):o:n[a]=o)}}return n}var A=function(){return new k(`f${(++h).toString(36)}`,undefined)},N=new(function(){function e(e){var t=this,n=e.autoGenerateTag;this.cssRaw=function(e){e&&(t._raw+=e||"",t._pendingRawChange=!0,t._styleUpdated())},this.cssRule=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var r=E(R.apply(void 0,n));t._freeStyle.registerRule(e,r),t._styleUpdated()},this.forceRenderStyles=function(){var e=t._getTag();e&&(e.textContent=t.getStyles())},this.fontFace=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var s=t._freeStyle,r=0,i=e;r<i.length;r++){var a=i[r];s.registerRule("@font-face",a)}t._styleUpdated()},this.getStyles=function(){return(t._raw||"")+t._freeStyle.getStyles()},this.keyframes=function(e){var n=function(e){var t={};for(var n in e)"$debugName"!==n&&(t[n]=e[n]);return e.$debugName&&(t.$displayName=e.$debugName),t}(e),s=t._freeStyle.registerKeyframes(n);return t._styleUpdated(),s},this.reinit=function(){var e=A();t._freeStyle=e,t._lastFreeStyleChangeId=e.changeId,t._raw="",t._pendingRawChange=!1;var n=t._getTag();n&&(n.textContent="")},this.setStylesTarget=function(e){t._tag&&(t._tag.textContent=""),t._tag=e,t.forceRenderStyles()},this.stylesheet=function(e){for(var n={},s=0,r=Object.getOwnPropertyNames(e);s<r.length;s++){var i=r[s],a=e[i];a&&(a.$debugName=i,n[i]=t.style(a))}return n};var s=A();this._autoGenerateTag=n,this._freeStyle=s,this._lastFreeStyleChangeId=s.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var n=this._pending;I((function(){n===t._pending&&e()}))},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==n)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync((function(){return e.forceRenderStyles()})))},e.prototype.style=function(){var e=this._freeStyle.registerStyle(E(R.apply(void 0,arguments)));return this._styleUpdated(),e},e}())({autoGenerateTag:!0}),T=(N.setStylesTarget,N.cssRaw,N.cssRule,N.forceRenderStyles,N.fontFace,N.getStyles,N.keyframes,N.reinit,N.style);N.stylesheet;const F=T({marginTop:"6px",marginBottom:"0",borderBottom:"var(--jp-border-width) solid var(--jp-border-color2)"}),U=T({boxSizing:"border-box",width:"100%",height:"2em",padding:"1px 18px 2px 7px",color:"var(--jp-ui-font-color1)",fontSize:"var(--jp-ui-font-size1)",fontWeight:300,backgroundColor:"var(--jp-layout-color1)",border:"var(--jp-border-width) solid var(--jp-border-color2)",borderRadius:"3px",$nest:{"&:active":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"},"&:focus":{border:"var(--jp-border-width) solid var(--jp-brand-color1)"}}});class O extends a.ReactWidget{constructor(e,t){super(),this._path="",this._selectedExecutor="",this._arguments="",this._environVariables="",this._options=[],this._signal=new c.Signal(this),this._path=e,this._options=t,console.log(t),this._selectedExecutor=t[0].command}getValue(){const e=this._selectedExecutor.replace("{path}",this._path).replace("{args}",this._arguments);return 0===this._environVariables.length?e:`${this._environVariables} ${e}`}render(){return u.createElement("div",{className:F},u.createElement("label",{htmlFor:"executor"},"Executor"),u.createElement("select",{id:"executor",className:U,onChange:e=>{this._selectedExecutor=e.target.value,this._signal.emit()}},this._options.map((e=>u.createElement("option",{value:e.command},e.name)))),u.createElement("label",null,"Path",u.createElement("input",{type:"text",id:"path",className:U,value:this._path,disabled:!0})),u.createElement("label",null,"Arugments",u.createElement("input",{type:"text",id:"arguments",className:U,onChange:e=>{this._arguments=e.target.value,this._signal.emit()}})),u.createElement("label",null,"Environment variables",u.createElement("input",{type:"text",id:"environVariables",className:U,onChange:e=>{this._environVariables=e.target.value,this._signal.emit()}})),u.createElement("label",null,"Command",u.createElement(a.UseSignal,{signal:this._signal},(()=>u.createElement("input",{type:"text",className:U,value:this.getValue(),disabled:!0})))))}}const q="@gavincyi/jupyterlab-executor:executor",V="jupyterlab-executor:execute",z={id:q,autoStart:!0,requires:[r.IFileBrowserFactory,i.ISettingRegistry],activate:function(e,t,n){console.log("JupyterLab extension jupyterlab-executor is activated!");const{tracker:r}=t;let i=[];const c=e=>{i=e.composite.executors};Promise.all([n.load(q),e.restored]).then((([e])=>{c(e),e.changed.connect(c)})),e.commands.addCommand(V,{execute:()=>{const t=r.currentWidget;if(!t)return;const n=t.selectedItems().next().path;!function(e,t,n){(0,a.showDialog)({title:"Execute",buttons:[a.Dialog.cancelButton({label:"Cancel"}),a.Dialog.createButton({label:"Copy Command"}),a.Dialog.okButton({label:"Execute"})],body:new O(t,n)}).then((async t=>{if(t.button.accept)if("Execute"===t.button.label){console.log("Execute the command");const n=new o.TerminalManager,s=await n.startNew(),r=new l.Terminal(s,{initialCommand:`${t.value}`});r.title.closable=!0;const i=new a.MainAreaWidget({content:r});i.id=`jupyter-executor-${Date.now()}`,i.title.label="Execute",i.title.closable=!0,i.isAttached||e.shell.add(i,"main"),e.shell.activateById(i.id)}else"Copy Command"===t.button.label?a.Clipboard.copyToSystem(t.value):console.log(`${t.button.label}`);else console.log("Canceled")}))}(e,n,i)},isVisible:()=>{return(e=r.currentWidget)&&1===(0,s.toArray)(e.selectedItems()).length;var e},iconClass:"jp-RunIcon",label:"Execute"}),e.contextMenu.addItem({command:V,selector:".jp-DirListing-item"})}}}}]);