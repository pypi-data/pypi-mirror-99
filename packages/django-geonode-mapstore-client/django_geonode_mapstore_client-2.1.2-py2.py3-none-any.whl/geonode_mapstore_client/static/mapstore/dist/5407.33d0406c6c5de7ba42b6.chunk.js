(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5407],{90173:(e,n,r)=>{e.exports=r(10761)},37275:(e,n,r)=>{"use strict";r.d(n,{$F:()=>j,jQ:()=>E,y9:()=>U,wJ:()=>k,qg:()=>_,jS:()=>A,pT:()=>W,u8:()=>z,nv:()=>F,ZP:()=>N});var t=r(90173),o=r(45697),i=r.n(o),a=r(8575),u=r(9669),s=r.n(u),c=r(96486),l=r(27418),p=r.n(l),f=r(82702),d=r(50456),g=r.n(d);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function w(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?y(Object(r),!0).forEach((function(n){b(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function b(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var v=t.default?new t.default.Proj("EPSG:4326"):null,h=i().shape({x:i().number.isRequired,y:i().number.isRequired,crs:i().string}),x=a.parse(window.location.href,!0).query,O="localConfig.json",P={proxyUrl:"/mapstore/proxy/?url=",geoStoreUrl:"/rest/geostore/",printUrl:"/mapstore/print/info.json",translationsPath:"translations",extensionsRegistry:"extensions.json",extensionsFolder:"",configurationFolder:"",contextPluginsConfiguration:"pluginsConfig.json",projectionDefs:[],themePrefix:"ms2",bingApiKey:null,mapquestApiKey:null,defaultSourceType:"gxp_wmssource",backgroundGroup:"background",userSessions:{enabled:!1}},S=function(e,n,r,t){var o=e.mapId;return{configUrl:o?(t||P.geoStoreUrl)+"data/"+o:P.configurationFolder+(e.config||n||"config")+"."+(r||"json"),legacy:!!o}},j=function(e){var n=e.split("?");if(n.length>2){var r=n.slice(1);return n[0]+"?"+r.join("&")}return e},C=function(e,n){var r=j(e).split("?"),t="";if(r.length>=2&&r[1]){var o=r[1].split(/[&;]/g).filter((function(e){return!!e}));o.forEach((function(e,r){var i=e.split("=");if(-1===n.indexOf(i[0].toLowerCase())){var a=r===o.length-1?"":"&";t+=i.join("=")+a}}))}return t?r[0]+"?"+t:r[0]},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,c.isNil)(e)||""===e?null:C(j(e),n)},U=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var t=a.parse(E(e,r),!0),o=null;if((0,c.endsWith)(t.pathname,"wfs")||(0,c.endsWith)(t.pathname,"wms")||(0,c.endsWith)(t.pathname,"ows"))return o=t.pathname.replace(/(wms|ows|wfs|wps)$/,"wps"),a.format(p()({},t,{search:null,pathname:o},{query:p()(w({service:"WPS"},n),t.query)}))}return null},k=function(e){O=e},_=function(e,n){var r=(0,c.isArray)(e)?{x:e[0],y:e[1]}:e,o=e.crs||n||"EPSG:4326",i="EPSG:4326"!==o?t.default.transform(new t.default.Proj(o),v,r):r;return p()({},i,{crs:"EPSG:4326"})},q=function(e){return"bing"===e.type&&(e.apiKey=P.bingApiKey),"mapquest"===e.type&&(e.apiKey=P.mapquestApiKey),e},D=function(e,n){return e.id||(e.id=e.name+"__"+n),e},M=function(e){var n=e;return(n.match(/\{.*?\}/g)||[]).forEach((function(e){var r=P[e.substring(1,e.length-1)];void 0!==r&&(n=n.replace(e,r||""))})),n},T=function(e){return e.url&&((0,c.isArray)(e.url)?e.url=e.url.map((function(e){return M(e)})):e.url=M(e.url)),e},A=function(e){var n=e.layers,r=e.groups,t=e.plugins,o=function(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers","groups","plugins"]);return o.center=_(o.center),{map:o,layers:n.map(q,e).map(D).map(T),groups:r,plugins:t}},L=function(e,n){var r,t=n;for(r in n||(t=P.defaultSourceType),e)e.hasOwnProperty(r)&&(e[r].ptype||(e[r].ptype=t))},I=function(e){return e&&-1!==e.indexOf("?")?e.split("?")[0]:e},K=function(e,n){if(e.baseParams=n.baseParams,n.url){var r=a.parse(n.url,!0);for(var t in r.query)"REQUEST"===t.toUpperCase()&&delete r.query[t];e.baseParams=p()({},e.baseParams,r.query)}e.url=I(n.url)},R=function(e,n,r){var t,o,i,a;for(o=0;o<e.length;o++){(a=n[(i=e[o]).source])&&K(i,a);var u=a.ptype;i.type=u?u.replace(/^gxp_(.*)source$/i,"$1"):"unknown",i&&(r.indexOf(a&&a.ptype)>=0?i.group===P.backgroundGroup&&(i.visibility=i.visibility||!1,t&&t.visibility?i.visibility&&(t.visibility=!1,t=i):t=i):i.visibility=!1)}t&&(t.visibility=!0)},W=function(e){var n=e.map,r=e.gsSources||e.sources,t=n.layers.filter((function(e){return r[e.source]})),o=_(n.center,n.projection),i=n.zoom,a=n.maxExtent||n.extent;return L(r,e.defaultSourceType),R(t,r,["gxp_osmsource","gxp_wmssource","gxp_googlesource","gxp_bingsource","gxp_mapquestsource","gxp_olsource"]),A({center:o,zoom:i,maxExtent:a,layers:t,projection:n.projection||"EPSG:3857"})},G=function(e){return e.proxyUrl?e.proxyUrl:P.proxyUrl},z=function(e){return P[e]},F=function(e,n){P[e]=n};const N={PropTypes:{center:h,config:i().shape({center:h,zoom:i().number.isRequired}),mapStateSource:i().string},getParsedUrl:U,getDefaults:function(){return w({},P)},setLocalConfigurationFile:k,loadConfiguration:function(){return O?s().get(O).then((function(e){return"object"===m(e.data)&&(P=p()({},P,e.data)),w({},P)})):new f.Promise((function(e){e(w({},P))}))},getCenter:_,normalizeConfig:A,getUserConfiguration:function(e,n,r){return S(x,e,n,r)},getConfigurationOptions:S,getConfigUrl:function(e){var n=e.mapId,r=n,t=e.config;try{var o=parseInt(r,10);isNaN(o)&&(t=n,r=null)}catch(e){t=n,r=null}return S({mapId:r,config:t})},convertFromLegacy:W,setupSources:L,normalizeSourceUrl:I,copySourceOptions:K,setupLayers:R,mergeConfigs:function(e,n){return e.map=n.map,e.gsSources=n.gsSources||n.sources,e},getProxyUrl:G,cleanDuplicatedQuestionMarks:j,getUrlWithoutParameters:C,filterUrlParams:E,getProxiedUrl:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(0===e.indexOf("http")),t=!r&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var o=window.location;r=t[1]===o.protocol&&t[3]===o.hostname;var i=t[4],a=o.port,u=0===o.protocol.indexOf("https")?443:80;i=""===i?u+"":i+"",a=""===a?u+"":a+"",r=r&&i===a}if(!r){var s=G(n);if(s){var l=[];(0,c.isObject)(s)&&(l=s.useCORS||[],s=s.url);var p=l.reduce((function(n,r){return n||0===e.indexOf(r)}),!1);if(!p)return s+encodeURIComponent(e)}}return e},getBrowserProperties:function(){var e="ActiveXObject"in window,n=e&&!document.addEventListener,r=e&&window.location.hash===!!window.MSInputMethodContext&&!!document.documentMode,t=navigator.userAgent.toLowerCase(),o=-1!==t.indexOf("webkit"),i=-1!==t.indexOf("chrome"),a=-1!==t.indexOf("safari")&&-1===t.indexOf("chrome"),u=-1!==t.indexOf("phantom"),s=-1!==t.indexOf("android"),c=-1!==t.search("android [23]"),l=-1!==t.indexOf("gecko"),p=g().any,f=!window.PointerEvent&&window.MSPointerEvent,d=window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||f,m="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,y=document.documentElement,w=e&&"transition"in y.style,b="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!c,v="MozPerspective"in y.style,h="OTransition"in y.style,x=!window.L_DISABLE_3D&&(w||b||v||h)&&!u,O=!window.L_NO_TOUCH&&!u&&(d||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);return{ie:e,ie11:r,ielt9:n,webkit:o,gecko:l&&!o&&!window.opera&&!e,android:s,android23:c,chrome:i,safari:a,ie3d:w,webkit3d:b,gecko3d:v,opera3d:h,any3d:x,mobile:p,mobileWebkit:p&&o,mobileWebkit3d:p&&b,mobileOpera:p&&window.opera,touch:O,msPointer:f,pointer:d,retina:m}},setApiKeys:q,setUrlPlaceholders:T,replacePlaceholders:M,setLayerId:D,getConfigProp:z,setConfigProp:F,removeConfigProp:function(e){delete P[e]}}},45968:()=>{}}]);