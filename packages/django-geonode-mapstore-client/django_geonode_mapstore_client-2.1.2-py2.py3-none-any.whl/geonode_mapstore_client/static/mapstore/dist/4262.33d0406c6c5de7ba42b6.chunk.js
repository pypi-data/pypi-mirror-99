(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4262],{86570:(e,t,r)=>{var n={"./cesium/Layers":19690,"./leaflet/Layers":44712,"./openlayers/Layers":8010};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=86570},24262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getWpsUrl:()=>P,getNode:()=>B,getGroupNodes:()=>F,getNestedGroupTitle:()=>z,deepChange:()=>q,getSourceId:()=>V,extractTileMatrixFromSources:()=>Z,extractTileMatrixSetFromLayers:()=>K,extractSourcesFromLayers:()=>$,extractDataFromSources:()=>J,getURLs:()=>Q,getLayerUrl:()=>Y,getGroupByName:()=>H,getDimension:()=>X,getLayerId:()=>ee,normalizeLayer:()=>te,normalizeMap:()=>re,belongsToGroup:()=>ne,getLayersByGroup:()=>ie,removeEmptyGroups:()=>oe,getNotEmptyGroup:()=>ue,reorderFunc:()=>ae,denormalizeGroups:()=>le,sortLayers:()=>ce,toggleByType:()=>se,sortUsing:()=>de,splitMapAndLayers:()=>fe,geoJSONToLayer:()=>pe,saveLayer:()=>me,REG_GEOSERVER_RULE:()=>ge,setRegGeoserverRule:()=>ye,getRegGeoserverRule:()=>ve,findGeoServerName:()=>be,getCapabilitiesUrl:()=>he,getSearchUrl:()=>xe,invalidateUnsupportedLayer:()=>Le,isSupportedLayer:()=>Se,getLayerTitleTranslations:()=>Oe,setCustomUtils:()=>Re,getAuthenticationParam:()=>Ie,excludeGoogleBackground:()=>ke,creditsToAttribution:()=>we,formatCapabitiliesOptions:()=>Ge,getLayerTitle:()=>Te,isInsideResolutionsLimits:()=>je});var n,i=r(27418),o=r.n(i),u=r(94707),a=r.n(u),l=r(23570),c=r.n(l),s=r(47037),d=r.n(s),f=r(13218),p=r.n(f),m=r(1469),g=r.n(m),y=r(91175),v=r.n(y),b=r(84596),h=r.n(b),x=r(41609),L=r.n(x),S=r(30998),O=r.n(S),R=r(78718),I=r.n(R),k=r(14293),w=r.n(k),G=r(33044);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=/\/[\w- ]*geoserver[\w- ]*\//,N=function(e,t){return t.filter((function(t){return(t.group||"Default")===e})).map((function(e){return e.id})).reverse()},P=function(e){return e&&e.wpsUrl||e.search&&e.search.url||e.url},_=function e(t,r){return t.slice(0).reverse().reduce((function(t,n){return t.concat(n.nodes.slice(0).reverse().reduce((function(t,n){return p()(n)?t.concat(e([n],r)):t.concat(function(e,t){return v()(t.filter((function(t){return t.id===e})))}(n,r))}),[]))}),[])},A=function(e,t){return _(e,t)},D=function(e,t){var n=r(86570)("./"+t+"/Layers");return"mapquest"===e.type||"bing"===e.type?n.isSupported(e.type)&&e.apiKey&&"__API_KEY_MAPQUEST__"!==e.apiKey&&!e.invalid:"empty"===e.type||n.isSupported(e.type)&&!e.invalid},B=function e(t,r){return t&&g()(t)?t.reduce((function(t,n){return t||(!n||n.name!==r&&n.id!==r&&n!==r?n&&n.nodes&&n.nodes.length>0?e(n.nodes,r):t:n)}),null):null},F=function e(t){return t&&t.nodes?t.nodes.reduce((function(t,r){var n=[].concat(t);return r.nodes&&(n=t.concat(e(r))),d()(r)?[].concat(U(n),[r]):[].concat(U(n),[r.id])}),[]):[]},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return g()(t)&&v()(t.map((function(t){var r=t.id===e?t:null;if(r)return r.title;var n=B(t.nodes,e);return n?n.title:null})))},q=function e(t,r,n,i){return t&&g()(t)&&t.length>0?t.map((function(t){if(p()(t)){if(t.id===r)return j(j({},t),p()(n)?n:M({},n,i));if(t.nodes)return j(j({},t),{},{nodes:e(t.nodes,r,n,i)})}return t})):[]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||v()(h()(e.url))},Z=function(e,t){if(!e||!t)return{};!g()(t.matrixIds)&&p()(t.matrixIds)&&(t.matrixIds=U(Object.keys(t.matrixIds)));var r=V(t),n=t.matrixIds&&t.matrixIds.reduce((function(t,n){var i=e[r]&&e[r].tileMatrixSet&&e[r].tileMatrixSet[n]&&e[r].tileMatrixSet[n].TileMatrix.map((function(e){return{identifier:e["ows:Identifier"],ranges:e.ranges}}))||[];return 0===i.length?o()({},t):o()({},t,M({},n,U(i)))}),{})||null,i=t.tileMatrixSet&&t.matrixIds.map((function(t){return e[r].tileMatrixSet[t]})).filter((function(e){return e}))||null;return i&&n&&{tileMatrixSet:i,matrixIds:n}||{}},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce((function(r,n){var i=e[n].reduce((function(e,t){return o()(e,M({},t.id||t.name,{srs:U(Object.keys(t.matrixIds)),matrixIds:o()({},t.matrixIds)}))}),{}),u=e[n].reduce((function(e,t){var r=t.tileMatrixSet.reduce((function(e,t){return o()({},e,M({},t["ows:Identifier"],o()({},t)))}),{}),n=Object.keys(r).reduce((function(e,t){var n=Object.keys(i).filter((function(e){return v()(i[e].srs.filter((function(e){return e===t})))})).map((function(e){return i[e].matrixIds[t]})),u=n[0]&&r[t].TileMatrix.map((function(e,t){return n[0][t]&&n[0][t].ranges?o()({},e,{ranges:n[0][t].ranges}):o()({},e)}));return v()(n)?o()({},e,M({},t,o()({},r[t],{TileMatrix:u}))):o()({},e)}),{});return o()({},e,n)}),{});return o()({},r,M({},n,o()({},t[n]||{},{tileMatrixSet:o()({},r[n]&&r[n].tileMatrixSet||{},u)})))}),o()({},t))||t},$=function(e){var t=e.filter((function(e){return e.tileMatrixSet})).reduce((function(e,t){var r=V(t);return e[r]?o()({},e,M({},r,[].concat(U(e[r]),[t]))):o()({},e,M({},r,[t]))}),{});return K(t)},J=function(e){if(!e||!e.layers||!g()(e.layers))return null;var t=e.mapInitialConfig&&e.mapInitialConfig.sources&&o()({},e.mapInitialConfig.sources)||{};return L()(t)?U(e.layers):e.layers.map((function(e){var r=Z(t,e);return o()({},e,r)}))},Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((function(e){return e.split("?")[0]+t}))},W={},Y=function(e){return g()(e.url)?e.url[0]:e.url},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=v()(t.filter((function(t){return t.name===e})));return r||t.reduce((function(t,r){return t||!!r.nodes&&n.getGroupByName(e,r.nodes)}),void 0)},X=function(e,t){switch(t.toLowerCase()){case"elevation":return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return"elevation"===t.name.toLowerCase()||"depth"===t.name.toLowerCase()?o()({positive:"elevation"===t.name.toLowerCase()},t,{name:"elevation"===t.name.toLowerCase()?t.name:"DIM_"+t.name}):e}),null)}(e);default:return null}},ee=function(e,t){return e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15))},te=function(e){return e.id?e:j(j({},e),{},{id:n.getLayerId(e)})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[function(e){return(e.layers||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return!t})).length>0?j(j({},e),{},{layers:(e.layers||[]).map((function(e){return n.normalizeLayer(e)}))}):e},function(e){return e.groups?e:j(j({},e),{},{groups:{id:"Default",expanded:!0}})}].reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))(e)},ne=function(e){return function(t){return(t.group||"Default")===e||0===(t.group||"").indexOf("".concat(e,"."))}},ie=function(e,t){var r=0,n=e.map((function(e){return o()({},e,{storeIndex:r++})}));return n.reduce((function(e,t){return-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e}),[]).filter((function(e){return"background"!==e})).reverse().reduce((function(e,r){var i=r||"Default";return i.split(".").reduce((function(e,r,u,a){var l=i.split(".",u+1).join("."),c=function(e,t){return v()(t.filter((function(t){return p()(t)&&t.id===e})))}(l,e),s=u===a.length-1;return c?s&&(c.nodes=c.nodes.concat(N(l,n))):(c=function(e,t,r,n){return o()({},{id:e,title:(t||"").replace(/\${dot}/g,"."),name:t,nodes:n?N(e,r):[],expanded:!0})}(l,z(l,t)||r,n,s),e.push(c)),c.nodes}),e),e}),[])},oe=function(e){return e.reduce((function(e,t){return e.concat(n.getNotEmptyGroup(t))}),[])},ue=function(e){var t=e.nodes.reduce((function(e,t){return t.nodes?e.concat(n.getNotEmptyGroup(t)):e.concat(t)}),[]);return t.length>0?o()({},e,{nodes:t}):[]},ae=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(A(e,t))},le=function(e,t){var r=function(e){var t=!0;return e.forEach((function(e){e.visibility||(t=!1)})),t},n=function e(t,n){var i=t.nodes.map((function(t){return p()(t)?e(t,n):n.filter((function(e){return e.id===t}))[0]}));return o()({},t,{nodes:i,visibility:r(i)})},i=e.map((function(e){return o()({},e,{expanded:e.expanded||!1})}));return{flat:i,groups:t.map((function(e){return n(e,i)}))}},ce=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(A(e,t))},se=function(e,t){return function(r,n){return t(r,e,n)}},de=function(e,t){return function(r,n){return t(r,n,e)}},fe=function(e){if(e&&g()(e.layers)){var t=n.getLayersByGroup(e.layers,e.groups);g()(e.groups)&&(t=e.groups.reduce((function(e,t){var r=e;if(t.title){var i={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};r=n.deepChange(r,t.id,i)}return n.deepChange(r,t.id,"expanded",t.expanded)}),[].concat(t)));var r=J(e);return o()({},e,{layers:{flat:n.reorder(t,r),groups:t}})}return e},pe=function(e,t){var r,n=a()(e);return r="FeatureCollection"===e.type?e.features.map((function(e,t){return e.id||(e.id=t),e.geometry&&e.geometry.bbox&&isNaN(e.geometry.bbox[0])&&(e.geometry.bbox=[null,null,null,null]),e})):[I()(j(j({},e),{},{id:w()(e.id)?c()():e.id}),["geometry","type","style","id"])],{type:"vector",visibility:!0,group:"Local shape",id:t,name:e.fileName,hideLoading:!0,bbox:{bounds:{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]},crs:"EPSG:4326"},features:r}},me=function(e){return o()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,availableStyles:e.availableStyles,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{})},ge=C,ye=function(e){C=e},ve=function(){return C},be=function(e){var t=e.url,r=e.regexRule||n.getRegGeoserverRule(),i=g()(t)?t[0]:t;return r.test(i)&&i.match(r)[0]||null},he=function(e){var t,r,i,o=n.findGeoServerName({url:e.url}),u=Y(e);if(o){var a=u.split(o);if(2===a.length){var l=e.name.split(":");2===l.length&&(u=a[0]+o+l[0]+"/"+l[1]+"/"+a[1])}}return t=u,r=j(j({},e.baseParams),e.params),i=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&"),-1===t.indexOf("?")?t+"?"+i:t+"&"+i},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.search&&e.search.url||e.url},Le=function(e,t){return D(e,t)?function(e){return e&&e.invalid?o()({},e,{invalid:!1}):e}(e):o()({},e,{invalid:!0})},Se=function(e,t){return!!D(e,t)},Oe=function(e){return W.getLayerTitleTranslations?W.getLayerTitleTranslations(e):e.Title},Re=function(e,t){W[e]=t},Ie=function(e){var t=Q(g()(e.url)?e.url:[e.url]),r={};return t.forEach((function(t){(0,G.addAuthenticationParameter)(t,r,e.securityToken)})),r},ke=function(e){var t=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group,n=e.visibility;return"background"===r&&"google"===t&&n})).length>0,r=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"google"!==t})),n=r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group;return"background"===t}));if(t&&0===n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibility;return t})).length){if(n.length>0){var i=O()(r,{group:"background"});return r.map((function(e,t){return t===i?j(j({},e),{},{visibility:!0}):e}))}return[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}].concat(U(r))}return r},we=function(e){var t=e.imageUrl,r=e.link,n=e.title,i=t?'<img src="'.concat(t,'" ').concat(n?'title="'.concat(n,'"'):"",">"):n;return r&&i?'<a href="'.concat(r,'" target="_blank">').concat(i,"</a>"):i},Ge=function(e){return p()(e)?{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}:{}},Te=function(e){var t=e.title,r=e.name,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return(null==t?void 0:t[n])||(null==t?void 0:t.default)||t||r},je=function(e,t){if(e.disableResolutionLimits)return!0;var r=e.minResolution||-1/0,n=e.maxResolution||1/0;return void 0===t||t<n&&t>=r};n={getGroupByName:H,getLayerId:ee,normalizeLayer:te,getNotEmptyGroup:ue,getLayersByGroup:ie,deepChange:q,reorder:ae,getRegGeoserverRule:ve,findGeoServerName:be,isInsideResolutionsLimits:je}},19690:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r,n){var i=t[e];return i&&i.create?i.create(r,n):i?i(r,n):null},renderLayer:function(e,r,n,i,o){var u=t[e];return u&&u.render?u.render(r,n,i,o):null},updateLayer:function(e,r,n,i,o){var u=t[e];return u&&u.update?u.update(r,n,i,o):null},isSupported:function(e){return!!t[e]}};e.exports=r},44712:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r){var n=t[e];return n&&n.create?n.create(r):n?n(r):null},renderLayer:function(e,r,n,i,o){var u=t[e];return u&&u.render?u.render(r,n,i,o):null},updateLayer:function(e,r,n,i){var o=t[e];return o&&o.update?o.update(r,n,i):null},isValid:function(e,r){var n=t[e];return!n||!n.isValid||n.isValid(r)},isSupported:function(e){return!!t[e]}};e.exports=r}}]);