(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5190],{40797:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s});var o=r(53329),n=r(15402),c=r(5346),i=n.Z,a=o.Z;const s={Message:c.Z,HTML:i,DateFormat:a}},6790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>W});var o,n,c=r(96486),i=r(27418),a=r.n(i),s=r(45697),l=r.n(s),u=r(67294),p=r.n(u),f=r(33664),h=r(1852),y=r.n(h),g=r(22222),d=r(60604),m=r(81808),b=r(82904),v=r(1550),S=r(97222),O=r(25016),w=r(8578),C=r(86568),P=r(28578),T=r(26125),k=r(69301),j=r(75110),E=r(827),I=r(37275),R=r(18412),x=r(64975);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=(0,g.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,o){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:(0,c.get)(e,"activeSearchTool","addressSearch"),format:(0,c.get)(e,"format")||I.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:o||{}}})),U=(0,f.connect)(z,{onSearch:S.tt,onChangeCoord:S.TS,onChangeActiveSearchTool:S.a,onClearCoordinatesSearch:d.fU,onClearBookmarkSearch:O.N3,onChangeFormat:S.Zw,onToggleControl:b.Xi,onZoomToPoint:S.Z,onPurgeResults:S.kV,onSearchReset:S.v2,onSearchTextChange:S.k9,onCancelSelectedItem:S.KG,onZoomToExtent:v.Px,onLayerVisibilityLoad:m.H0})(w.Z),q=(0,g.P1)([E.Od,j.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),H=(0,f.connect)(q,{onItemClick:S.Jc,addMarker:S._q,showGFI:S.w4})(C.Z),V=(0,f.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:S.o$})((n=o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(s,e);var t,r,o,n,i=(o=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(o);if(n){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return G(this,e)});function s(){var e;B(this,s);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return L(J(e=i.call.apply(i,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&(0,c.get)(e.props.selectedItems[e.props.selectedItems.length-1],t)})),L(J(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,o=t.textSearchConfig;return o&&o.services&&o.services.length>0?o.override?a()({},r,{services:o.services}):a()({},r,{services:r.services.concat(o.services)}):r})),L(J(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?a()({},r,{services:t}):r})),L(J(e),"getSearchAndToggleButton",(function(){var t=p().createElement(U,_({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[p().createElement(x.Z,null)].concat(e.props.enabled?[t]:null):(0,c.isArray)(e.props.withToggle)?p().createElement("span",null,p().createElement(y(),{query:"("+e.props.withToggle[0]+")"},p().createElement(x.Z,null),e.props.enabled?t:null),p().createElement(y(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=s,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(M(M({},R.be),this.props.resultsStyle))}},{key:"render",value:function(){return p().createElement("span",null,this.getSearchAndToggleButton(),p().createElement(H,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&A(t.prototype,r),s}(p().Component),L(o,"propTypes",{splitTools:l().bool,showOptions:l().bool,isSearchClickable:l().bool,fitResultsToMapSize:l().bool,searchOptions:l().object,resultsStyle:l().object,selectedItems:l().array,selectedServices:l().array,userServices:l().array,withToggle:l().oneOfType([l().bool,l().array]),enabled:l().bool,textSearchConfig:l().object}),L(o,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),n));const W={SearchPlugin:a()(V,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:P.Mk,searchOnStartEpic:P.h5,searchItemSelected:P.XH,zoomAndAddPointEpic:P.OY,textSearchShowGFIEpic:P.Ls},reducers:{search:k.Z,mapInfo:T.Z}}},54625:e=>{e.exports=function(e){if(!e||!e.type)return null;var r=t[e.type];return r?"geometry"===r?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===r?{type:"FeatureCollection",features:[e]}:"featurecollection"===r?e:void 0:null};var t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},19081:(e,t,r)=>{"use strict";e.exports=r(1174)},55745:(e,t,r)=>{var o=r(3465),n=o.featureCollection,c=r(98098),i=r(54625);e.exports=function(e,t,r){var a=o.distanceToDegrees(t,r),s=i(e),l=i(n(s.features.map((function(e){return function(e,t){var r=(new c.io.GeoJSONReader).read(e.geometry).buffer(t);return{type:"Feature",geometry:r=(new c.io.GeoJSONWriter).write(r),properties:{}}}(e,a)}))));return l.features.length>1?l:1===l.features.length?l.features[0]:void 0}},65442:(e,t,r)=>{var o=r(98098);e.exports=function(e,t){var r,n;r="Feature"===e.type?e.geometry:e,n="Feature"===t.type?t.geometry:t;var c=new o.io.GeoJSONReader,i=c.read(JSON.stringify(r)),a=c.read(JSON.stringify(n)),s=i.intersection(a);if(!s.isEmpty())return{type:"Feature",properties:{},geometry:(new o.io.GeoJSONWriter).write(s)}}}}]);