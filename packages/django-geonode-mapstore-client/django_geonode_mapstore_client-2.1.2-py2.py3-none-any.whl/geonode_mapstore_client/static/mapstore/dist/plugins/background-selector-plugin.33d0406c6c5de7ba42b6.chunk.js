(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4813],{81808:(e,t,r)=>{"use strict";r.d(t,{eD:()=>n,AM:()=>o,ok:()=>c,Gg:()=>i,nT:()=>u,TL:()=>a,KS:()=>l,EB:()=>s,DZ:()=>p,Aw:()=>f,V_:()=>y,H0:()=>d,jW:()=>b,JZ:()=>O,fQ:()=>m,HK:()=>g,YO:()=>E,I6:()=>h,$D:()=>v,SI:()=>S});var n="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",c="MAP_CONFIG_LOADED",i="MAP_CONFIG_LOAD_ERROR",u="MAP_LOAD_INFO",a="MAP_INFO_LOAD_START",l="MAP_INFO_LOADED",s="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",y="MAP:RESET_MAP_SAVE_ERROR";function d(e,t,r){return{type:c,config:e,legacy:!!t,mapId:t,zoomToExtent:r}}function b(e,t){return{type:i,error:e,mapId:t}}function O(e,t,r,n,c){return{type:o,configName:e,mapId:t,config:r,mapInfo:n,overrideConfig:c}}function m(e,t){return{type:l,mapId:t,info:e}}function g(e,t){return{type:s,mapId:e,error:t}}function E(e){return{type:a,mapId:e}}function h(e){return{type:u,mapId:e}}var v=function(e){return{type:p,error:e}},S=function(e){return{type:f,resourceId:e}}},80416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>c,ih:()=>i,OX:()=>u,sb:()=>a,K$:()=>l,k7:()=>s,cX:()=>p,x9:()=>f,vs:()=>y,oE:()=>d,Po:()=>b,qv:()=>O,cI:()=>m,g6:()=>g,I4:()=>E,l$:()=>h,Xv:()=>v,k3:()=>S,CQ:()=>A,sH:()=>R,c7:()=>P,_7:()=>_,eF:()=>w,O6:()=>D,ED:()=>j,RP:()=>C,sF:()=>T,VP:()=>L,He:()=>k,vO:()=>I,WO:()=>N,bh:()=>M,pV:()=>x,ZF:()=>B,tV:()=>Y,Dv:()=>G,Yz:()=>Z,kI:()=>F,XG:()=>H,A4:()=>V,ct:()=>z,oh:()=>U,$h:()=>X,ud:()=>W,Qr:()=>$,LR:()=>K,nN:()=>q,UG:()=>J,F5:()=>Q,c9:()=>ee,Jh:()=>te});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",c="CHANGE_GROUP_PROPERTIES",i="TOGGLE_NODE",u="SORT_NODE",a="REMOVE_NODE",l="UPDATE_NODE",s="MOVE_NODE",p="LAYER_LOADING",f="LAYER_LOAD",y="LAYER_ERROR",d="ADD_LAYER",b="ADD_GROUP",O="REMOVE_LAYER",m="SHOW_SETTINGS",g="HIDE_SETTINGS",E="UPDATE_SETTINGS",h="REFRESH_LAYERS",v="LAYERS:UPDATE_LAYERS_DIMENSION",S="LAYERS_REFRESHED",A="LAYERS_REFRESH_ERROR",R="LAYERS:CLEAR_LAYERS",P="LAYERS:SELECT_NODE",_="LAYERS:FILTER_LAYERS",w="LAYERS:SHOW_LAYER_METADATA",D="LAYERS:HIDE_LAYER_METADATA",j="LAYERS:UPDATE_SETTINGS_PARAMS";function C(e,t,r){return{type:m,node:e,nodeType:t,options:r}}function T(){return{type:g}}function L(e){return{type:E,options:e}}function k(e,t){return{type:n,newProperties:t,layer:e}}function I(e,t){return{type:o,layer:e,params:t}}function N(e,t){return{type:c,newProperties:t,group:e}}function M(e,t,r){return{type:i,node:e,nodeType:t,status:!r}}function x(e){return{type:"CONTEXT_NODE",node:e}}function B(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:a,node:e,nodeType:t,removeEmpty:r}}function Y(e,t,r){return{type:l,node:e,nodeType:t,options:r}}function G(e,t,r){return{type:s,node:e,groupId:t,index:r}}function Z(e){return{type:p,layerId:e}}function F(e,t){return{type:f,layerId:e,error:t}}function H(e,t,r){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:r}}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:d,layer:e,foreground:t}}function z(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function U(e){return{type:S,layers:e}}function X(e,t){return{type:A,layers:e,error:t}}function W(e,t,r,n){return{type:v,dimension:e,value:t,options:r,layers:n}}function $(e){return{type:"LAYERS:BROWSE_DATA",layer:e}}function K(e){return{type:"LAYERS:DOWNLOAD",layer:e}}function q(){return{type:R}}function J(e,t,r){return{type:P,id:e,nodeType:t,ctrlKey:r}}function Q(e){return{type:_,text:e}}function ee(e,t){return{type:w,metadataRecord:e,maskLoading:t}}function te(){return{type:D}}},1262:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(27418),o=r.n(n),c=r(45697),i=r.n(c),u=r(67294),a=r.n(u),l=r(73935),s=r.n(l),p=r(30294),f=r(38560),y=r(5346),d=r(7472);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,r,n,c,i=(n=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(c){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function u(){var e;O(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(h(e=i.call.apply(i,[this].concat(r))),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}return t=u,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&s().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return a().createElement(d.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},a().createElement("span",{role:"header"},a().createElement("span",{className:"user-panel-title"},this.props.title),a().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?a().createElement(p.Glyphicon,{glyph:this.props.closeGlyph}):a().createElement("span",null,"Ã—"))),a().createElement("div",{role:"body"},this.props.children),a().createElement("div",{role:"footer"},a().createElement(p.ButtonGroup,null,a().createElement(f.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),a().createElement(f.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&m(t.prototype,r),u}(a().Component);S(A,"propTypes",{show:i().bool,draggable:i().bool,onClose:i().func,onConfirm:i().func,onSave:i().func,modal:i().bool,closeGlyph:i().string,style:i().object,buttonSize:i().string,inputStyle:i().object,title:i().node,confirmButtonContent:i().node,confirmButtonDisabled:i().bool,closeText:i().node,confirmButtonBSStyle:i().string,focusConfirm:i().bool}),S(A,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:a().createElement(y.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:a().createElement(y.Z,{msgId:"confirm"})||"Confirm",closeText:a().createElement(y.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const R=A},80833:(e,t,r)=>{"use strict";r.d(t,{kB:()=>a}),r(8575),r(96486);var n=r(90173),o=r(89255),c=r(67007),i=(r(75875),r(90183),r(24262)),u=r(10284);r(33044),n.default;var a=function(e){return o.Observable.defer((function(){return c.ZP.getCapabilities((0,i.getCapabilitiesUrl)(e))})).let(u.oB).map((function(t){return c.ZP.parseLayerCapabilities(t,e)}))}},23634:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var n=r(33664),o=r(18093),c=r(96486),i=r(82904),u=r(80416),a=r(53001),l=r(22222),s=r(75110),p=r(827),f=r(31935),y=r(55105),d=r(7872),b=r(22843),O=r(25108),m=r(62632),g=r(79504),E=r(2220);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=(0,l.P1)([p.uy,f.B0,f.Mz,f.TC,s.pV,p.Od,p.HJ,f.TP,s.X_,s.DP,s.qh,function(e){return(0,y.ic)(e,{left:!0,bottom:!0})},function(e){return e.controls&&e.controls.metadataexplorer&&e.controls.metadataexplorer.enabled},function(e){return e.browser&&e.browser.mobile?"mobile":"desktop"},f.qS,f.Pe],(function(e,t,r,n,o,c,i,u,a,l,s,p,f,y,d,b){return{mode:y,modalParams:t,backgroundList:r,deletedId:n,backgrounds:o,size:c&&c.size||{width:0,height:0},mapIsEditable:i,layers:u,tempLayer:s,currentLayer:l,start:a.start||0,enabled:a.enabled,style:p,enabledCatalog:f,confirmDeleteBackgroundModal:d,allowDeletion:b,projection:e}})),R=(0,o.compose)((0,n.connect)(A,{onPropertiesChange:u.He,onToggle:i.Xi.bind(null,"backgroundSelector",null),onLayerChange:i.Xg.bind(null,"backgroundSelector"),onStartChange:i.Xg.bind(null,"backgroundSelector","start"),onAdd:a.st,addLayer:u.A4,backgroundAdded:a.pW,onRemove:u.ZF,onBackgroundEdit:a.$D,updateNode:u.tV,onUpdateThumbnail:a.r5,removeBackground:a.X1,clearModal:a.V3,addBackgroundProperties:a.US,onRemoveBackground:a.p2,setCurrentBackgroundLayer:a.ke},(function(e,t,r){return v(v(v(v({},e),t),r),{},{thumbs:v(v({},d.Z),r.thumbs)})})),(0,o.withProps)((function(e){var t=e.items,r=void 0===t?[]:t;return{hasCatalog:!!(0,c.find)(r,{name:"MetadataExplorer"})}})))(E.Z);const P=(0,b.rx)("BackgroundSelector",{component:R,reducers:{controls:O.Z,backgroundSelector:m.Z},epics:g.Z})},25108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(82904),o=r(27418),c=r.n(o);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.kM:var r=t.property||"enabled";return c()({},e,i({},t.control,c()({},e[t.control],i({},r,!(e[t.control]||{})[r]))));case n.At:return!0===t.toggle&&e[t.control]&&e[t.control][t.property]===t.value?c()({},e,i({},t.control,c()({},e[t.control],i({},t.property,void 0)))):c()({},e,i({},t.control,c()({},e[t.control],i({},t.property,t.value))));case n.dc:return c()({},e,i({},t.control,c()({},e[t.control],t.properties)));case n.l:var o=Object.keys(e).filter((function(e){return-1===(t.skip||[]).indexOf(e)})),u=o.reduce((function(t,r){return c()(t,i({},r,c()({},e[r],!0===e[r].enabled?{enabled:!1}:{})))}),{});return c()({},e,u);default:return e}}},88113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>l,_S:()=>s,R7:()=>p,bA:()=>f,Cb:()=>y,$t:()=>d,kS:()=>b,y:()=>O,l2:()=>m,HN:()=>g});var n=r(22222),o=r(96486),c=r(827);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return(0,o.get)(e,"catalog.services")},s=((0,n.P1)((function(e){return(0,o.get)(e,"catalog.default.staticServices")}),l,(function(e,t){return u(u({},t),(0,o.pick)(e,"default_map_backgrounds"))})),function(e){return(0,o.get)(e,"catalog.newService")}),p=function(e){return(0,o.get)(e,'catalog.services["'.concat((0,o.get)(e,"catalog.selectedService"),'"]'))},f=function(e){return(0,o.get)(e,"catalog.searchOptions")},y=function(e){return(0,o.get)(e,"catalog.selectedService")},d=function(e){return"metadataexplorer"===(0,o.get)(e,"controls.toolbar.active")||(0,o.get)(e,"controls.metadataexplorer.enabled")},b=function(e){return((0,o.get)(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},O=function(e){return(0,o.get)(e,"catalog.pageSize",4)},m=function(e){return(0,o.get)(e,"catalog.delayAutoSearch",1e3)},g=(0,n.zB)({projection:c.uy})},55105:(e,t,r)=>{"use strict";r.d(t,{Nr:()=>l,ic:()=>s,CF:()=>p}),r(96486);var n=r(827),o=r(52259);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(e){return e.maplayout&&e.maplayout.layout||{}},l=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){return i(i({},e),{},u({},t,r[t]))}),{})||{}},p=function(e){var t=(0,n.Od)(e),r=l(e);return r&&t&&t.size&&{left:(0,o.parseLayoutValue)(r.left,t.size.width),bottom:(0,o.parseLayoutValue)(r.bottom,t.size.height),right:(0,o.parseLayoutValue)(r.right,t.size.width),top:(0,o.parseLayoutValue)(r.top,t.size.height)}}},10284:(e,t,r)=>{"use strict";r.d(t,{sw:()=>O,oB:()=>m,X0:()=>g});var n=r(89255),o=r(96486),c=r(5055),i=r(7526),u=r(24384);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return p(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)})(e)}function p(e,t,r){return(p=f()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&y(o,r.prototype),o}).apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t,r,n=(t=o,r=f(),function(){var e,n=d(t);if(r){var o=d(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return l(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="OGCError",r.code=t,r}return o}(s(Error)),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tagNameProcessors:[i.stripPrefix],explicitArray:!1,mergeAttrs:!0};return n.Observable.bindNodeCallback((function(e,r){return(0,c.parseString)(e,t,r)}))(e)},m=function(e){return e.switchMap((function(e){return"string"==typeof e.data&&e.data.indexOf("ExceptionReport")>0?n.Observable.bindNodeCallback((function(e,t){return(0,c.parseString)(e,{tagNameProcessors:[i.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data).map((function(e){var t=(0,o.get)(e,"ExceptionReport.Exception.ExceptionText");throw new b(t||"Undefined OGC Service Error",(0,o.get)(e,"ExceptionReport.Exception.exceptionCode"))})):n.Observable.of(e)}))},g=function(e,t){return e?u.Z.deleteResource(e,t).then((function(e){return{data:e.data,resType:"success",error:null}})).catch((function(e){return{error:e,resType:"error"}})):n.Observable.of({resType:"success"})}}}]);