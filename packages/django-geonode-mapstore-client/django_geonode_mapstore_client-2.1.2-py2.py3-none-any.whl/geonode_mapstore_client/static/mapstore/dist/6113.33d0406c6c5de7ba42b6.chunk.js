(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6113],{66113:(t,e,n)=>{"use strict";n.d(e,{$F:()=>f,eg:()=>g,Kg:()=>y,PR:()=>p,eK:()=>m,pu:()=>v,Lu:()=>b,W5:()=>E,TQ:()=>A,KR:()=>P,sY:()=>O,vv:()=>T,jq:()=>M,Tr:()=>R,w:()=>S,CK:()=>w,u5:()=>C,z7:()=>N,FW:()=>j,GC:()=>D,yL:()=>G,_O:()=>U,JM:()=>z,bU:()=>k,mm:()=>W,X6:()=>B});var r=n(96486),o=n(92579),i=n(74621),c=n(24684);function u(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(t){return function(e){return(0,r.get)(e,(0,o.Ll)("geostory.currentStory.".concat(t),e),"")}},g=function(t){return(0,r.get)(t,"geostory.isCollapsed",!1)},y=function(t){return(0,r.get)(t,"geostory.currentStory")},p=function(t){return(0,r.get)(t,"geostory.currentPage",{})},m=function(t){return(0,r.get)(t,"geostory.mode")},v=function(t){return function(t){return(0,r.get)(function(t){return(0,r.get)(t,"geostory.resource")}(t),"canEdit",!1)}(t)||(0,i.qg)(t)},h=function(t){return(0,r.get)(y(t),"sections",[])},b=function(t){return h(t).length>0},E=function(t){return(0,r.get)(t,"geostory.isSettingsEnabled",!1)},A=function(t){var e=(0,r.get)(y(t),"settings",{}),n=h(t).filter((function(t){return t.type===o.ID.IMMERSIVE})),i=e.checked||[],c=(0,r.uniq)(i.map((function(t){return(0,o.Un)(n,t)})).filter((function(t){return t})));return s(s({},e),{},{expanded:c})},I=function(t){return(0,r.get)(A(t),"checked",[]).reduce((function(t,e){return s(s({},t),{},d({},e,!0))}),{})},P=function(t){return!(0,r.isEqual)((0,r.get)(y(t),"settings",{}),function(t){return(0,r.get)(t,"geostory.oldSettings",{})}(t))},O=function(t){return(0,r.get)(t,"geostory.selectedCard","")},T=function(t){return function(e){return f("".concat(t,".resourceId"))(e)}},M=function(t){return(0,r.get)(y(t),"resources",[])},R=function(t){return function(e){return(0,r.find)(M(e),{id:t})}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.withImmersiveSection,n=void 0!==e&&e,r=t.includeAlways,i=void 0===r||r;return function(t){var e=h(t),r=I(t);return e.reduce((function(t,e){if(e.type===o.ID.TITLE&&(i||r[e.id]))return[].concat(u(t),[e]);if(e.type===o.ID.PARAGRAPH&&(i||r[e.id]))return[].concat(u(t),[e]);if(e.type===o.ID.BANNER&&(i||r[e.id]))return[].concat(u(t),[e]);if(e.type===o.ID.IMMERSIVE){var c=e.contents&&e.contents.reduce((function(t,e){return i||r[e.id]?[].concat(u(t),[s(s({},e),{},{sectionId:t.id})]):t}),[])||[];return n?[].concat(u(t),[e],u(c)):[].concat(u(t),u(c))}return t}),[])}},w=function(t){return S({includeAlways:!0})(t).length},C=function(t){return(0,r.findIndex)(S({includeAlways:!0})(t),{id:p(t).columns&&p(t).columns[p(t).sectionId]?p(t).columns[p(t).sectionId]:p(t).sectionId||""})},N=function(t){return void 0!==(0,r.get)(t,"geostory.focusedContent.target")},j=function(t){return(0,r.get)(t,"geostory.focusedContent")},D=function(t){return f((0,r.get)(t,"geostory.focusedContent.path",""))(t)},G=function(t){return h(t).reduce((function(t,e){if(e.type===o.ID.IMMERSIVE){var n=e.contents&&e.contents.map((function(t){return{label:t.title||"",value:t.id}}))||[];return[].concat(u(t),[{label:e.title||"",value:e.id,children:n}])}return[].concat(u(t),[{label:e.title||"",value:e.id}])}),[])},L=function t(e,n){var o=n.contents,i=n.background;return n.resourceId===e||!(!i||i.resourceId!==e)||!!o&&!!(0,r.find)(o,(function(n){return t(e,n)}))},U=function(t,e){return!!(0,r.find)(h(t),(function(t){return L(e,t)}))},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.F)(t).includes("geostory/shared")},k=function(t){return(0,r.get)(t,"geostory.updateUrlOnScroll",!1)},W=function(t){return(0,r.get)(t,"geostory.currentStory.settings.theme.fontFamilies",[])},B=function(t){return(0,r.get)(t,"geostory.mediaEditorSettings")}},24684:(t,e,n)=>{"use strict";n.d(e,{F:()=>o,y:()=>i});var r=n(96486),o=function(t){return(0,r.get)(t,"router.location.pathname")||"/"},i=function(t){return(0,r.get)(t,"router.location.search")||""}},92579:(t,e,n)=>{"use strict";n.d(e,{gg:()=>w,Ln:()=>C,ID:()=>N,bT:()=>j,tQ:()=>D,Tr:()=>G,nl:()=>L,ZX:()=>U,lg:()=>z,w:()=>k,cy:()=>W,lt:()=>B,M1:()=>V,kn:()=>x,oH:()=>X,Aq:()=>q,nq:()=>F,Ll:()=>K,ln:()=>J,Un:()=>Y,NC:()=>Z,t4:()=>$,NP:()=>Q,bm:()=>tt,_R:()=>et,Km:()=>nt,of:()=>rt});var r=n(27361),o=n.n(r),i=n(30998),c=n.n(i),u=n(30084),a=n.n(u),l=n(1469),s=n.n(l),d=n(52628),f=n.n(d),g=n(63105),y=n.n(g),p=n(82492),m=n.n(p),v=n(47037),h=n.n(v),b=n(13218),E=n.n(b),A=n(64721),I=n.n(A),P=n(13880),O=n.n(P),T=n(55877),M=n.n(T);function R(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var w="EMPTY_CONTENT",C={CASCADE:"cascade"},N={TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner"},j={TEXT:"text",MEDIA:"media",WEBPAGE:"webPage",COLUMN:"column"},D={MEDIA:"template-media",WEBPAGE:"template-web-page"},G={IMAGE:"image",MAP:"map",VIDEO:"video"},L={EDIT:"edit",VIEW:"view"},U={SHOW_SAVE:"save.show",LOADING:"loading"},z={StoryTypes:f()(C),SectionTypes:f()(N),MediaTypes:f()(G),Modes:f()(L)},k=function(t){var e=t.theme,n=void 0===e?{}:e,r=t.align,o=void 0===r?"center":r,i=t.size,c=void 0===i?"full":i,u=(null==n?void 0:n.value)||h()(n)&&n,a=u&&"custom"!==u&&h()(u)&&" ms-".concat(u)||"",l=" ms-align-".concat(o),s=" ms-size-".concat(c);return"".concat(a).concat(l).concat(s)},W=function(t){var e=t.theme,n=void 0===e?{}:e,r=t.storyTheme;if(""===n||""===(null==n?void 0:n.value))return E()(r)?r:{};var o=null==n?void 0:n.value,i=null==n?void 0:n[o];return E()(i)&&i||{}},B=function(t){return t.type===N.PARAGRAPH&&t&&s()(t.contents)&&t.contents.length&&s()(t.contents[0].contents)&&t.contents[0].contents.length&&t.contents[0].contents[0].type===j.MEDIA},V=function(t,e){var n=function(t){var e=t.split("?");return 2===e.length?e[0]:t}(t),r=document.getElementById(n);r&&r.scrollIntoView(e)},H={zoomControl:!0,mapInfoControl:!1,mapOptions:{scrollWheelZoom:!1,interactions:{mouseWheelZoom:!1,dragPan:!0}}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m()({},H,t)},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m()({},t,e)},_=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(e,"i");return!e||n.test(t)},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RegExp(e,"i");return y()(t,(function(t){return _(t.data&&(t.data.title||t.data.name),e,n)||_(t.data&&t.data.description,e,n)}))},F=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};switch(e){case N.TITLE:return{id:M()(),type:N.TITLE,title:n("geostory.builder.defaults.titleTitle"),cover:!1,contents:[{id:M()(),type:j.TEXT,html:"",size:"large",align:"center",theme:"",background:{fit:"cover",size:"full",align:"center"}}]};case N.BANNER:return{id:M()(),type:N.BANNER,title:n("geostory.builder.defaults.titleBanner"),cover:!1,contents:[{id:M()(),background:{fit:"cover",size:"full",align:"center"}}]};case N.PARAGRAPH:return{id:M()(),type:N.PARAGRAPH,title:n("geostory.builder.defaults.titleParagraph"),contents:[{id:M()(),type:j.COLUMN,size:"full",align:"center",contents:[{id:M()(),type:j.TEXT,html:""}]}]};case N.IMMERSIVE:return{id:M()(),type:N.IMMERSIVE,title:n("geostory.builder.defaults.titleImmersive"),contents:[t(j.COLUMN,n)]};case D.MEDIA:return{id:M()(),type:N.PARAGRAPH,title:n("geostory.builder.defaults.titleMedia"),contents:[{id:M()(),type:j.COLUMN,contents:[{id:M()(),type:j.MEDIA,size:"large",align:"center"}]}]};case D.WEBPAGE:return{id:M()(),type:N.PARAGRAPH,title:n("geostory.builder.defaults.titleWebPageSection"),contents:[{id:M()(),type:j.COLUMN,contents:[{id:M()(),type:j.WEBPAGE,size:"medium",align:"center"}]}]};case j.COLUMN:return{id:M()(),type:j.COLUMN,align:"left",size:"small",theme:"",title:n("geostory.builder.defaults.titleImmersiveContent"),contents:[{id:M()(),type:j.TEXT,html:""}],background:{fit:"cover",size:"full",align:"center"}};case j.TEXT:return{id:M()(),type:j.TEXT,title:n("geostory.builder.defaults.titleText"),html:""};case j.IMAGE:return{id:M()(),type:e,title:n("geostory.builder.defaults.titleMedia"),size:"full",align:"center"};case j.WEBPAGE:return{id:M()(),type:e,title:n("geostory.builder.defaults.titleWebPage"),size:"medium",align:"center"};case j.MEDIA:return{id:M()(),type:e,title:n("geostory.builder.defaults.titleUnknown"),size:"large",align:"center"};default:return{id:M()(),type:e,title:n("geostory.builder.defaults.titleUnknown"),size:"full",align:"center"}}},K=function(t,e){return a()(t).reduce((function(t,n){if(n&&0===n.indexOf("{")){var r=JSON.parse(n),i=o()(e,t),u=c()(i,r);return u>=0?[].concat(R(t),[u]):t}return[].concat(R(t),[n])}),[])},J=function(t,e){return a()(t).reduce((function(t,n){var r=t.path,i=t.flatPath;if(n&&0===n.indexOf("{")){var u=JSON.parse(n),a=o()(e,r),l=c()(a,u);if(l>=0){var s=a[l],d=s.id,f=s.type;return{path:[].concat(R(r),[l]),flatPath:[].concat(R(i),[{id:d,type:r[r.length-1],contentType:f}])}}return{path:r,flatPath:i}}return{path:[].concat(R(r),[n]),flatPath:i}}),{path:[],flatPath:[]})},Y=function(t,e){return t.reduce((function(t,n){return I()(n.contents.map((function(t){return t.id})),e)?n.id:t}),null)},Z=function(t){return t.type===N.PARAGRAPH&&!1!==t.editURL&&t&&s()(t.contents)&&t.contents.length&&s()(t.contents[0].contents)&&t.contents[0].contents.length&&t.contents[0].contents[0].type===j.WEBPAGE&&!1!==t.contents[0].contents[0].editURL},$=function(t,e){if(e)switch(t){case"small":return.4*e;case"medium":return.6*e;case"large":return.8*e;default:return e}return 0},Q=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i="EMPTY";if(!e.includes(n))return null;var c=e.substring(e.indexOf(n)).split("/");return r&&n?c.length>1&&c[2]&&Number(c[0])===n?5===c.length?O()(t,"".concat(c[2],"/column/").concat(c[4]),"".concat(r)):O()(t,"".concat(c[2]),"".concat(r)):(e.includes("shared"),""!==c[1]?"".concat(t,"/section/").concat(r):"".concat(t,"section/").concat(r)):!r&&o&&h()(o)&&o!==i&&c.length>1?e.includes("shared")&&!c[2]?t:5===c.length?O()(t,"".concat(c[4]),"".concat(o)):"".concat(t,"/column/").concat(o):null},tt=function(t,e,n){var r={active:e,inactive:n,custom:{families:[],urls:[]}};return t.filter((function(t){return!!t.src})).forEach((function(t,e){r.custom.families[e]=t.family,r.custom.urls[e]=t.src})),r},et=function(t){return t.map((function(t){return t.family}))},nt=["inherit","Arial","Georgia","Impact","Tahoma","Times New Roman","Verdana"],rt=function(){return window.location.href.match("geostory-embedded")?"geostoryEmbedded":"geostory"}}}]);