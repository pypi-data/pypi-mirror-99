(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6190],{34990:(t,e,r)=>{"use strict";r.d(e,{D7:()=>a,mN:()=>s,vb:()=>d,KT:()=>l,QK:()=>O,cc:()=>S,XH:()=>E,lX:()=>p,tP:()=>y,Dq:()=>f,LE:()=>T,SW:()=>v,si:()=>g,i2:()=>R,IY:()=>m,Zf:()=>G,ij:()=>h,Hb:()=>_,Mk:()=>Y,c:()=>b,NZ:()=>A,Cx:()=>C,wb:()=>D,km:()=>I,un:()=>P,Ro:()=>L,jr:()=>N,ZY:()=>j,EQ:()=>w,IH:()=>U,rp:()=>k,D_:()=>M,zJ:()=>V,wJ:()=>q,OS:()=>Z,YP:()=>F,Ct:()=>z,Od:()=>B,y6:()=>W,g5:()=>H,_e:()=>K,DF:()=>x,GD:()=>Q,K0:()=>X,kB:()=>J,Xn:()=>$,G5:()=>tt,Vx:()=>et,RZ:()=>rt,pB:()=>nt,$A:()=>ot,m7:()=>ct,YM:()=>it,o2:()=>ut,ql:()=>at,c0:()=>st,nL:()=>dt,Fu:()=>lt});var n=r(47037),o=r.n(n),c=r(55877),i=r.n(c),u=r(92579),a="GEOSTORY:ADD",s="GEOSTORY:ADD_RESOURCE",d="GEOSTORY:CHANGE_MODE",l="GEOSTORY:CLEAR_SAVE_ERROR",O="GEOSTORY:EDIT_RESOURCE",S="GEOSTORY:EDIT_WEBPAGE",E="GEOSTORY:LOAD_GEOSTORY",p="GEOSTORY:LOADING_GEOSTORY",y="GEOSTORY:MOVE",f="GEOSTORY:REMOVE",T="GEOSTORY:SAVE_STORY",v="GEOSTORY:SAVE_ERROR",g="GEOSTORY:STORY_SAVED",R="GEOSTORY:SELECT_CARD",m="GEOSTORY:SET_CONTROL",G="GEOSTORY:SET_RESOURCE",h="GEOSTORY:SET_CURRENT_STORY",_="GEOSTORY:SET_WEBPAGE_URL",Y="GEOSTORY:TOGGLE_CARD_PREVIEW",b="GEOSTORY:TOGGLE_SETTINGS_PANEL",A="GEOSTORY:TOGGLE_SETTING",C="GEOSTORY:TOGGLE_CONTENT_FOCUS",D="GEOSTORY:UPDATE",I="GEOSTORY:UPDATE_SETTING",P="GEOSTORY:UPDATE_CURRENT_PAGE",L="GEOSTORY:REMOVE_RESOURCE",N="GEOSTORY:SET_PENDING_CHANGES",j="GEOSTORY:SET_UPDATE_URL_SCROLL",w="GEOSTORY:UPDATE_MEDIA_EDITOR_SETTINGS",U=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t};return{type:a,id:r&&r.id||i()(),path:t,position:e,element:o()(r)&&(0,u.nq)(r,n)||r}},k=function(t,e,r){return{type:s,id:t,mediaType:e,data:r}},M=function(t){return{type:d,mode:t?u.nl.EDIT:u.nl.VIEW}},V=function(t,e,r){return{type:O,id:t,mediaType:e,data:r}},q=function(t,e){return{type:E,id:t,options:e}},Z=function(t){return{type:"GEOSTORY:GEOSTORY_LOADED",id:t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading";return{type:p,value:t,name:e}},z=function(t){return{type:"GEOSTORY:LOAD_GEOSTORY_ERROR",error:t}},B=function(t){return{type:f,path:t}},W=function(t){return{type:v,error:t}},H=function(t,e){return{type:m,control:t,value:e}},K=function(t){return{type:R,card:t}},x=function(t){return{type:G,resource:t}},Q=function(t){return{type:g,id:t}},X=function(t){return{type:h,story:t}},J=function(){return{type:Y}},$=function(t){return{type:A,option:t}},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:b,withSave:t}},et=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";return{type:D,path:t,element:e,mode:r}},rt=function(t){var e=t.sectionId,r=t.columnId;return{type:P,sectionId:e,columnId:r}},nt=function(t,e,r){return{type:y,source:t,target:e,position:r}},ot=function(t,e,r,n,o){return{type:C,status:t,target:e,selector:r,hideContent:n,path:o}},ct=function(t,e){return{type:I,prop:t,value:e}},it=function(t){return{type:_,src:t}},ut=function(t){var e=t.path,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY";return{type:S,path:e,owner:r}},at=function(t,e){return{type:L,id:t,mediaType:e}},st=function(t){return{type:N,value:t}},dt=function(t){return{type:j,value:t}},lt=function(t){return{type:w,mediaEditorSettings:t}}},66190:(t,e,r)=>{"use strict";r.d(e,{Z:()=>p});var n=r(96486),o=r(61868),c=r(92579),i=r(34990);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var O=function(t,e){var r=t.length,o=0;return e||0===e||(o=r),(0,n.isString)(e)?o=(0,n.findIndex)(t,{id:e})+1:(0,n.isNumber)(e)&&(o=Math.min(e,t.length)),o},S=function t(e,r,n){var o=n.contents,c=n.background,i=n.id,u=n.resourceId,a=[],s=r+'{"id": "'.concat(i,'"}]');return u===e?[s]:(c&&c.resourceId===e&&a.push(s+".background"),o?o.reduce((function(r,n){return[].concat(d(r),d(t(e,s+".contents[",n)))}),a):a)},E={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case i.D7:var r=e.id,u=e.path,l=e.position,p=e.element,y=(0,c.Ll)("currentStory.".concat(u),t),f=(0,n.get)(t,y,[]),T=O(f,l),v=f.slice();return v.splice(T,0,a({id:r},p)),(0,o.t8)(y,v,t);case i.mN:var g=e.id,R=e.mediaType,m=e.data;return(0,o.t8)("currentStory.resources",(0,n.uniqBy)([{id:g,type:R,data:m}].concat(d(t.currentStory&&t.currentStory.resources||[])),"id"),t);case i.vb:return(0,o.t8)("mode",e.mode,t);case i.QK:var G=e.id,h=e.mediaType,_=e.data,Y=(0,o.cc)("currentStory.resources",{id:G,type:h,data:_},{id:G},t);return h===c.Tr.MAP&&t.currentStory.sections.reduce((function(t,e){return[].concat(d(t),d(S(G,"sections[",e)))}),[]).map((function(e){var r=(0,c.Ll)("currentStory.".concat(e,".map"),t);Y=(0,o.t8)(r,void 0,Y)})),Y;case i.Ro:var b=e.id,A=e.mediaType,C=(0,o.z6)("currentStory.resources",{id:b},t);return t.currentStory.sections.reduce((function(t,e){return[].concat(d(t),d(S(b,"sections[",e)))}),[]).map((function(e){var r=(0,c.Ll)("currentStory.".concat(e,".resourceId"),t);if(C=(0,o.zN)(r,C),A===c.Tr.MAP){var n=(0,c.Ll)("currentStory.".concat(e,".map"),t);C=(0,o.zN)(n,C)}})),C;case i.lX:return(0,o.t8)("loading"===e.name?"loading":"loadFlags.".concat(e.name),e.value,(0,o.t8)("loading",e.value,t));case i.Dq:var D=e.path,I=(0,c.Ll)("currentStory.".concat(D),t),P=d(I),L=P.pop(),N=(0,n.get)(t,P);return(0,n.isArray)(N)?((0,n.isString)(L)&&(L=parseInt(L,10)),(0,o.t8)(P,[].concat(d(N.slice(0,L)),d(N.slice(L+1))),t)):(0,o.zN)(I,t);case i.ij:var j,w,U,k,M,V=t.defaultSettings||{},q=e.story.settings||V,Z=(null===(j=q)||void 0===j||null===(w=j.theme)||void 0===w?void 0:w.fontFamilies)||[],F=null===(U=t.currentStory)||void 0===U||null===(k=U.settings)||void 0===k||null===(M=k.theme)||void 0===M?void 0:M.fontFamilies;return F&&F.length>0&&(q=(0,o.t8)("theme.fontFamilies",(0,n.uniqBy)([].concat(d(F),d(Z)),"family"),q)),(0,o.t8)("currentStory",a(a({},e.story),{},{settings:q}),t);case i.i2:return(0,o.t8)("selectedCard",t.selectedCard===e.card?"":e.card,t);case i.IY:var z=e.control,B=e.value;return(0,o.t8)("controls.".concat(z),B,t);case i.Zf:var W=e.resource,H=t.currentStory&&t.currentStory.settings||{};return(0,o.qC)((0,o.t8)("resource",W),(0,o.t8)("currentStory.settings.storyTitle",H.storyTitle||W.name))(t);case i.si:case i.KT:return(0,o.zN)("errors.save",t);case i.SW:return(0,o.t8)("errors.save",(0,n.castArray)(e.error),t);case i.Mk:return(0,o.t8)("isCollapsed",!t.isCollapsed,t);case i.NZ:var K=(0,n.get)(t,"currentStory.settings.".concat(e.option));return(0,o.t8)("currentStory.settings.".concat(e.option),!K,t);case i.c:var x=!t.isSettingsEnabled,Q=t.currentStory&&t.currentStory.settings||{};return(0,o.qC)((0,o.t8)("isSettingsEnabled",x),(0,o.t8)("oldSettings",x?Q:{}),(0,o.t8)("currentStory.settings",x?a({},Q):e.withSave?Q:t.oldSettings))(t);case i.wb:var X=e.path,J=e.mode,$=e.element,tt=(0,c.Ll)("currentStory.".concat(X),t),et=(0,n.get)(t,tt);return(0,n.isPlainObject)(et)&&(0,n.isPlainObject)($)&&"merge"===J&&($=a(a({},et),$)),(0,n.isArray)(et)&&(0,n.isArray)($)&&"merge"===J&&($=[].concat(d(et),d($))),(0,o.t8)(tt,$,t);case i.km:return(0,o.t8)("currentStory.settings.".concat(e.prop),e.value,t);case i.un:if(e.columnId){var rt=(0,n.find)(t.currentStory.sections,(function(t){return(0,n.find)(t.contents,{id:e.columnId})}));return rt&&(0,n.find)(rt.contents,{id:e.columnId})?(0,o.t8)("currentPage",a(a({},t.currentPage),{},{columns:a(a({},t.currentPage.columns),{},s({},rt.id,e.columnId))}),t):t}return(0,o.t8)("currentPage",a(a({},t.currentPage),{},{sectionId:e.sectionId}),t);case i.Cx:var nt=e.status,ot=e.target,ct=e.selector,it=void 0===ct?"":ct,ut=e.hideContent,at=void 0!==ut&&ut,st=e.path,dt=nt?{target:ot,selector:it,hideContent:at,path:st}:void 0;return(0,o.t8)("focusedContent",dt,t);case i.jr:return(0,o.t8)("pendingChanges",e.value,t);case i.ZY:return(0,o.t8)("updateUrlOnScroll",e.value,t);case i.EQ:return(0,o.t8)("mediaEditorSettings",e.mediaEditorSettings,t);default:return t}}}}]);