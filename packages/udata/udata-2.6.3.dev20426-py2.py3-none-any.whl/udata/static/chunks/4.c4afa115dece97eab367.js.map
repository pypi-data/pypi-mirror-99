{"version":3,"sources":["webpack:///chunks/4.c4afa115dece97eab367.js","webpack:///./js/components/discussions/modal.vue","webpack:///modal.vue?dbbf","webpack:///./js/components/discussions/modal.vue?1104","webpack:///./js/components/discussions/modal.vue?7d81","webpack:///./js/components/discussions/modal.vue?bfd0"],"names":["webpackJsonp","622","module","exports","__webpack_require__","__vue_script__","__vue_template__","__esModule","default","options","template","1602","_interopRequireDefault","obj","Object","defineProperty","value","_api","_api2","_vue","_modal","_modal2","_card","_card2","_card3","_card4","name","components","Modal","DatasetCard","ReuseCard","computed","title","this","deleting","_","formValid","comment","length","data","discussion","next_route","events","modal:closed","$go","route","_this","$route","matched","idx","parent","handler","params","id","discussion_id","discussions","get_discussion","response","methods","confirm_delete","cancel_delete","confirm_delete_comment","cidx","_this2","confirm","delete_discussion_comment","splice","$root","handleApiError","delete","_this3","delete_discussion","$refs","modal","close","close_discussion","send_comment","comment_discussion","_this4","payload","1679","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","1708","1835","content","sourceMap","locals"],"mappings":"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","file":"chunks/4.c4afa115dece97eab367.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 622:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(1835)\n\t__vue_script__ = __webpack_require__(1602)\n\t__vue_template__ = __webpack_require__(1708)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 1602:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _api = __webpack_require__(74);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tvar _vue = __webpack_require__(31);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _modal = __webpack_require__(122);\n\t\n\tvar _modal2 = _interopRequireDefault(_modal);\n\t\n\tvar _card = __webpack_require__(139);\n\t\n\tvar _card2 = _interopRequireDefault(_card);\n\t\n\tvar _card3 = __webpack_require__(141);\n\t\n\tvar _card4 = _interopRequireDefault(_card3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t    name: 'discussion-modal',\n\t    components: { Modal: _modal2.default, DatasetCard: _card2.default, ReuseCard: _card4.default },\n\t    computed: {\n\t        title: function title() {\n\t            return this.deleting ? this._('Confirm deletion') : this._('Discussion');\n\t        },\n\t        formValid: function formValid() {\n\t            return this.comment && this.comment.length > 0;\n\t        }\n\t    },\n\t    data: function data() {\n\t        return {\n\t            discussion: {},\n\t            next_route: null,\n\t            comment: null,\n\t            deleting: false\n\t        };\n\t    },\n\t\n\t    events: {\n\t        'modal:closed': function modalClosed() {\n\t            this.$go(this.next_route);\n\t        }\n\t    },\n\t    route: {\n\t        data: function data() {\n\t            var _this = this;\n\t\n\t            if (this.$route.matched.length > 1) {\n\t                var idx = this.$route.matched.length - 2,\n\t                    parent = this.$route.matched[idx];\n\t                this.next_route = {\n\t                    name: parent.handler.name,\n\t                    params: parent.params\n\t                };\n\t            }\n\t            var id = this.$route.params.discussion_id;\n\t            _api2.default.discussions.get_discussion({ id: id }, function (response) {\n\t                _this.discussion = response.obj;\n\t            });\n\t        }\n\t    },\n\t    methods: {\n\t        confirm_delete: function confirm_delete() {\n\t            this.deleting = true;\n\t        },\n\t        cancel_delete: function cancel_delete() {\n\t            this.deleting = false;\n\t        },\n\t        confirm_delete_comment: function confirm_delete_comment(cidx) {\n\t            var _this2 = this;\n\t\n\t            if (confirm(this._('Are you sure you want to delete this comment?'))) {\n\t                _api2.default.discussions.delete_discussion_comment({ id: this.discussion.id, cidx: cidx }, function (response) {\n\t                    _this2.discussion.discussion.splice(cidx, 1);\n\t                }, this.$root.handleApiError);\n\t            }\n\t        },\n\t        delete: function _delete() {\n\t            var _this3 = this;\n\t\n\t            _api2.default.discussions.delete_discussion({ id: this.discussion.id }, function (response) {\n\t                _this3.$refs.modal.close();\n\t            }, this.$root.handleApiError);\n\t        },\n\t        close_discussion: function close_discussion() {\n\t            this.send_comment(this.comment, true);\n\t        },\n\t        comment_discussion: function comment_discussion() {\n\t            this.send_comment(this.comment);\n\t        },\n\t        send_comment: function send_comment(comment, close) {\n\t            var _this4 = this;\n\t\n\t            if (this.formValid) {\n\t                _api2.default.discussions.comment_discussion({ id: this.discussion.id, payload: {\n\t                        comment: comment,\n\t                        close: close || false\n\t                    } }, function (response) {\n\t                    _this4.discussion = response.obj;\n\t                    _this4.comment = null;\n\t                }, this.$root.handleApiError);\n\t            }\n\t        }\n\t    }\n\t};\n\n/***/ },\n\n/***/ 1679:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(9)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".discussion-modal h3{margin-top:0}.discussion-modal .direct-chat-messages{height:auto}.discussion-modal .direct-chat-delete{padding-left:10px;text-decoration:underline;color:#fff}.discussion-modal .direct-chat-timestamp{color:#eee}.discussion-modal .direct-chat-text{background:#fff;border:1px solid #fff}.discussion-modal .direct-chat-text:after,.discussion-modal .direct-chat-text:before{border-right-color:#fff}.discussion-modal .card-container{margin-bottom:1em}\", \"\", {\"version\":3,\"sources\":[\"/./js/components/discussions/modal.vue\"],\"names\":[],\"mappings\":\"AAAA,qBAAqB,YAAY,CAAC,wCAAwC,WAAW,CAAC,sCAAsC,kBAAkB,0BAA0B,UAAW,CAAC,yCAAyC,UAAU,CAAC,oCAAoC,gBAAgB,qBAAqB,CAAC,qFAAqF,uBAAuB,CAAC,kCAAkC,iBAAiB,CAAC\",\"file\":\"modal.vue\",\"sourcesContent\":[\".discussion-modal h3{margin-top:0}.discussion-modal .direct-chat-messages{height:auto}.discussion-modal .direct-chat-delete{padding-left:10px;text-decoration:underline;color:white}.discussion-modal .direct-chat-timestamp{color:#eee}.discussion-modal .direct-chat-text{background:#fff;border:1px solid #fff}.discussion-modal .direct-chat-text:before,.discussion-modal .direct-chat-text:after{border-right-color:#fff}.discussion-modal .card-container{margin-bottom:1em}\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 1708:\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <modal v-ref:modal :title=title class=discussion-modal :large=!deleting :class=\\\"{'modal-danger': deleting, 'modal-info': !deleting}\\\"> <div class=modal-body v-show=!deleting> <div class=\\\"row card-container\\\"> <dataset-card class=\\\"col-xs-12 col-md-offset-3 col-md-6\\\" v-if=\\\"discussion.subject | is 'dataset'\\\" :datasetid=discussion.subject.id></dataset-card> <reuse-card class=\\\"col-xs-12 col-md-offset-3 col-md-6\\\" v-if=\\\"discussion.subject | is 'reuse'\\\" :reuseid=discussion.subject.id></reuse-card> </div> <h3>{{ discussion.title }}</h3> <div class=direct-chat-messages> <div class=direct-chat-msg v-for=\\\"(idx, message) in discussion.discussion\\\"> <div class=\\\"direct-chat-info clearfix\\\"> <span class=\\\"direct-chat-name pull-left\\\">{{message.posted_by | display}}</span> <a v-if=\\\"$root.me.is_admin && idx !== 0\\\" @click.prevent=confirm_delete_comment(idx) href class=\\\"direct-chat-name direct-chat-delete\\\">{{ _('Delete comment') }}</a> <span class=\\\"direct-chat-timestamp pull-right\\\">{{message.posted_on | dt}}</span> </div> <img class=direct-chat-img :alt=\\\"_('User Image')\\\" :src=\\\"message.posted_by | avatar_url 40\\\"/> <div class=direct-chat-text v-markdown=message.content></div> </div> </div> </div> <div class=modal-body v-show=deleting> <p class=\\\"lead text-center\\\"> {{ _('You are about to delete this discussion') }} </p> <p class=\\\"lead text-center\\\"> {{ _('Are you sure?') }} </p> </div> <footer class=\\\"modal-footer text-center\\\" v-show=!deleting> <form v-if=!discussion.closed v-el:form> <div class=form-group :class=\\\"{'has-success': formValid}\\\"> <textarea class=form-control rows=3 :placeholder=\\\"_('Type your comment')\\\" v-model=comment required>\\n                </textarea> </div> </form> <button type=button class=\\\"btn btn-info btn-flat pull-left\\\" @click=$refs.modal.close> {{ _('Close') }} </button> <button type=button class=\\\"btn btn-danger btn-flat\\\" v-if=$root.me.is_admin @click=confirm_delete> {{ _('Delete') }} </button> <button type=button class=\\\"btn btn-outline btn-flat\\\" :disabled=!formValid @click=comment_discussion v-if=!discussion.closed> {{ _('Comment the discussion') }} </button> <button type=button class=\\\"btn btn-outline btn-flat\\\" :disabled=!formValid @click=close_discussion v-if=!discussion.closed> {{ _('Comment and close discussion') }} </button> </footer> <footer class=\\\"modal-footer text-center\\\" v-show=deleting> <button type=button class=\\\"btn btn-danger btn-flat pull-left\\\" @click=cancel_delete> {{ _('Cancel') }} </button> <button type=button class=\\\"btn btn-warning btn-flat\\\" @click=delete> {{ _('Confirm') }} </button> </footer> </modal> \";\n\n/***/ },\n\n/***/ 1835:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(1679);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(10)(content, {\"sourceMap\":true});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!../../../node_modules/less-loader/index.js?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!../../../node_modules/less-loader/index.js?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** chunks/4.c4afa115dece97eab367.js\n **/","var __vue_script__, __vue_template__\nrequire(\"!!vue-style?sourceMap!css?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!less?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\")\n__vue_script__ = require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./modal.vue\")\n__vue_template__ = require(\"!!vue-html-loader!../../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./modal.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/components/discussions/modal.vue\n ** module id = 622\n ** module chunks = 4\n **/","<style lang=\"less\">\n.discussion-modal {\n    h3 {\n        margin-top: 0;\n    }\n\n    .direct-chat-messages {\n        height: auto;\n    }\n\n    .direct-chat-delete {\n        padding-left: 10px;\n        text-decoration: underline;\n        color: white;\n    }\n\n    .direct-chat-timestamp {\n        color: #eee;\n    }\n\n    .direct-chat-text {\n        background: #fff;\n        border: 1px solid #fff;\n\n        &:before, &:after {\n            border-right-color: #fff;\n        }\n    }\n\n    .card-container {\n        margin-bottom: 1em;\n    }\n}\n</style>\n\n<template>\n<modal v-ref:modal :title=\"title\" class=\"discussion-modal\" :large=\"!deleting\"\n    :class=\"{'modal-danger': deleting, 'modal-info': !deleting}\">\n    <div class=\"modal-body\" v-show=\"!deleting\">\n        <div class=\"row card-container\">\n            <dataset-card class=\"col-xs-12 col-md-offset-3 col-md-6\"\n                v-if=\"discussion.subject | is 'dataset'\"\n                :datasetid=\"discussion.subject.id\"></dataset-card>\n            <reuse-card class=\"col-xs-12 col-md-offset-3 col-md-6\"\n                v-if=\"discussion.subject | is 'reuse'\"\n                :reuseid=\"discussion.subject.id\"></reuse-card>\n        </div>\n        <h3>{{ discussion.title }}</h3>\n        <div class=\"direct-chat-messages\">\n            <div class=\"direct-chat-msg\"\n                v-for=\"(idx, message) in discussion.discussion\">\n                <div class=\"direct-chat-info clearfix\">\n                    <span class=\"direct-chat-name pull-left\">{{message.posted_by | display}}</span>\n                    <a v-if=\"$root.me.is_admin && idx !== 0\"  @click.prevent=\"confirm_delete_comment(idx)\" href class=\"direct-chat-name direct-chat-delete\">{{ _('Delete comment') }}</a>\n                    <span class=\"direct-chat-timestamp pull-right\">{{message.posted_on | dt}}</span>\n                </div>\n                <img class=\"direct-chat-img\"  :alt=\"_('User Image')\"\n                    :src=\"message.posted_by | avatar_url 40\"/>\n                <div class=\"direct-chat-text\" v-markdown=\"message.content\"></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"modal-body\" v-show=\"deleting\">\n        <p class=\"lead text-center\">\n            {{ _('You are about to delete this discussion') }}\n        </p>\n        <p class=\"lead text-center\">\n            {{ _('Are you sure?') }}\n        </p>\n    </div>\n    <footer class=\"modal-footer text-center\" v-show=\"!deleting\">\n        <form v-if=\"!discussion.closed\" v-el:form>\n            <div class=\"form-group\" :class=\"{'has-success': formValid}\">\n                <textarea class=\"form-control\" rows=\"3\"\n                    :placeholder=\"_('Type your comment')\"\n                    v-model=\"comment\" required>\n                </textarea>\n            </div>\n        </form>\n        <button type=\"button\" class=\"btn btn-info btn-flat pull-left\"\n            @click=\"$refs.modal.close\">\n            {{ _('Close') }}\n        </button>\n        <button type=\"button\" class=\"btn btn-danger btn-flat\"\n            v-if=\"$root.me.is_admin\" @click=\"confirm_delete\">\n            {{ _('Delete') }}\n        </button>\n        <button type=\"button\" class=\"btn btn-outline btn-flat\"\n            :disabled=\"!formValid\"\n            @click=\"comment_discussion\" v-if=\"!discussion.closed\">\n            {{ _('Comment the discussion') }}\n        </button>\n        <button type=\"button\" class=\"btn btn-outline btn-flat\"\n            :disabled=\"!formValid\"\n            @click=\"close_discussion\" v-if=\"!discussion.closed\">\n            {{ _('Comment and close discussion') }}\n        </button>\n    </footer>\n    <footer class=\"modal-footer text-center\" v-show=\"deleting\">\n        <button type=\"button\" class=\"btn btn-danger btn-flat pull-left\"\n            @click=\"cancel_delete\">\n            {{ _('Cancel') }}\n        </button>\n        <button type=\"button\" class=\"btn btn-warning btn-flat\"\n            @click=\"delete\">\n            {{ _('Confirm') }}\n        </button>\n    </footer>\n</modal>\n</template>\n\n<script>\nimport API  from 'api';\nimport Vue from 'vue';\nimport Modal from 'components/modal.vue';\nimport DatasetCard from 'components/dataset/card.vue';\nimport ReuseCard from 'components/reuse/card.vue';\n\nexport default {\n    name: 'discussion-modal',\n    components: {Modal, DatasetCard, ReuseCard},\n    computed: {\n        title() {\n            return this.deleting ? this._('Confirm deletion') : this._('Discussion');\n        },\n        formValid() {\n            return this.comment && this.comment.length > 0;\n        }\n    },\n    data() {\n        return {\n            discussion: {},\n            next_route: null,\n            comment: null,\n            deleting: false,\n        };\n    },\n    events: {\n        'modal:closed': function() {\n            this.$go(this.next_route);\n        }\n    },\n    route: {\n        data() {\n            if (this.$route.matched.length > 1) {\n                // This is a nested view\n                let idx = this.$route.matched.length - 2,\n                    parent = this.$route.matched[idx];\n                this.next_route = {\n                    name: parent.handler.name,\n                    params: parent.params\n                };\n            }\n            let id = this.$route.params.discussion_id;\n            API.discussions.get_discussion({id}, (response) => {\n                this.discussion = response.obj;\n            });\n        }\n    },\n    methods: {\n        confirm_delete() {\n            this.deleting = true;\n        },\n        cancel_delete() {\n            this.deleting = false;\n        },\n        confirm_delete_comment(cidx) {\n            if(confirm(this._('Are you sure you want to delete this comment?'))) {\n                API.discussions.delete_discussion_comment({id: this.discussion.id, cidx: cidx},\n                    (response) => {\n                        this.discussion.discussion.splice(cidx, 1);\n                    },\n                    this.$root.handleApiError\n                );\n            }\n        },\n        delete() {\n            API.discussions.delete_discussion({id: this.discussion.id},\n                (response) => {\n                    this.$refs.modal.close();\n                },\n                this.$root.handleApiError\n            );\n        },\n        close_discussion() {\n            this.send_comment(this.comment, true);\n        },\n        comment_discussion() {\n            this.send_comment(this.comment);\n        },\n        send_comment(comment, close) {\n            if (this.formValid) {\n                API.discussions.comment_discussion({id: this.discussion.id, payload: {\n                    comment: comment,\n                    close: close || false\n                }}, (response) => {\n                    this.discussion = response.obj;\n                    this.comment = null;\n                }, this.$root.handleApiError);\n            }\n        }\n    }\n};\n</script>\n\n\n\n/** WEBPACK FOOTER **\n ** modal.vue?741859e7\n **/","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".discussion-modal h3{margin-top:0}.discussion-modal .direct-chat-messages{height:auto}.discussion-modal .direct-chat-delete{padding-left:10px;text-decoration:underline;color:#fff}.discussion-modal .direct-chat-timestamp{color:#eee}.discussion-modal .direct-chat-text{background:#fff;border:1px solid #fff}.discussion-modal .direct-chat-text:after,.discussion-modal .direct-chat-text:before{border-right-color:#fff}.discussion-modal .card-container{margin-bottom:1em}\", \"\", {\"version\":3,\"sources\":[\"/./js/components/discussions/modal.vue\"],\"names\":[],\"mappings\":\"AAAA,qBAAqB,YAAY,CAAC,wCAAwC,WAAW,CAAC,sCAAsC,kBAAkB,0BAA0B,UAAW,CAAC,yCAAyC,UAAU,CAAC,oCAAoC,gBAAgB,qBAAqB,CAAC,qFAAqF,uBAAuB,CAAC,kCAAkC,iBAAiB,CAAC\",\"file\":\"modal.vue\",\"sourcesContent\":[\".discussion-modal h3{margin-top:0}.discussion-modal .direct-chat-messages{height:auto}.discussion-modal .direct-chat-delete{padding-left:10px;text-decoration:underline;color:white}.discussion-modal .direct-chat-timestamp{color:#eee}.discussion-modal .direct-chat-text{background:#fff;border:1px solid #fff}.discussion-modal .direct-chat-text:before,.discussion-modal .direct-chat-text:after{border-right-color:#fff}.discussion-modal .card-container{margin-bottom:1em}\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js!./~/less-loader?sourceMap=source-map-less-inline!./~/vue-loader/lib/selector.js?type=style&index=0!./js/components/discussions/modal.vue\n ** module id = 1679\n ** module chunks = 4\n **/","module.exports = \" <modal v-ref:modal :title=title class=discussion-modal :large=!deleting :class=\\\"{'modal-danger': deleting, 'modal-info': !deleting}\\\"> <div class=modal-body v-show=!deleting> <div class=\\\"row card-container\\\"> <dataset-card class=\\\"col-xs-12 col-md-offset-3 col-md-6\\\" v-if=\\\"discussion.subject | is 'dataset'\\\" :datasetid=discussion.subject.id></dataset-card> <reuse-card class=\\\"col-xs-12 col-md-offset-3 col-md-6\\\" v-if=\\\"discussion.subject | is 'reuse'\\\" :reuseid=discussion.subject.id></reuse-card> </div> <h3>{{ discussion.title }}</h3> <div class=direct-chat-messages> <div class=direct-chat-msg v-for=\\\"(idx, message) in discussion.discussion\\\"> <div class=\\\"direct-chat-info clearfix\\\"> <span class=\\\"direct-chat-name pull-left\\\">{{message.posted_by | display}}</span> <a v-if=\\\"$root.me.is_admin && idx !== 0\\\" @click.prevent=confirm_delete_comment(idx) href class=\\\"direct-chat-name direct-chat-delete\\\">{{ _('Delete comment') }}</a> <span class=\\\"direct-chat-timestamp pull-right\\\">{{message.posted_on | dt}}</span> </div> <img class=direct-chat-img :alt=\\\"_('User Image')\\\" :src=\\\"message.posted_by | avatar_url 40\\\"/> <div class=direct-chat-text v-markdown=message.content></div> </div> </div> </div> <div class=modal-body v-show=deleting> <p class=\\\"lead text-center\\\"> {{ _('You are about to delete this discussion') }} </p> <p class=\\\"lead text-center\\\"> {{ _('Are you sure?') }} </p> </div> <footer class=\\\"modal-footer text-center\\\" v-show=!deleting> <form v-if=!discussion.closed v-el:form> <div class=form-group :class=\\\"{'has-success': formValid}\\\"> <textarea class=form-control rows=3 :placeholder=\\\"_('Type your comment')\\\" v-model=comment required>\\n                </textarea> </div> </form> <button type=button class=\\\"btn btn-info btn-flat pull-left\\\" @click=$refs.modal.close> {{ _('Close') }} </button> <button type=button class=\\\"btn btn-danger btn-flat\\\" v-if=$root.me.is_admin @click=confirm_delete> {{ _('Delete') }} </button> <button type=button class=\\\"btn btn-outline btn-flat\\\" :disabled=!formValid @click=comment_discussion v-if=!discussion.closed> {{ _('Comment the discussion') }} </button> <button type=button class=\\\"btn btn-outline btn-flat\\\" :disabled=!formValid @click=close_discussion v-if=!discussion.closed> {{ _('Comment and close discussion') }} </button> </footer> <footer class=\\\"modal-footer text-center\\\" v-show=deleting> <button type=button class=\\\"btn btn-danger btn-flat pull-left\\\" @click=cancel_delete> {{ _('Cancel') }} </button> <button type=button class=\\\"btn btn-warning btn-flat\\\" @click=delete> {{ _('Confirm') }} </button> </footer> </modal> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./js/components/discussions/modal.vue\n ** module id = 1708\n ** module chunks = 4\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!../../../node_modules/less-loader/index.js?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/addStyles.js\")(content, {\"sourceMap\":true});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!../../../node_modules/less-loader/index.js?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\", function() {\n\t\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?sourceMap!../../../node_modules/vue-loader/lib/style-rewriter.js!../../../node_modules/less-loader/index.js?sourceMap=source-map-less-inline!../../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./modal.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-style-loader?sourceMap!./~/css-loader?sourceMap!./~/vue-loader/lib/style-rewriter.js!./~/less-loader?sourceMap=source-map-less-inline!./~/vue-loader/lib/selector.js?type=style&index=0!./js/components/discussions/modal.vue\n ** module id = 1835\n ** module chunks = 4\n **/"],"sourceRoot":""}