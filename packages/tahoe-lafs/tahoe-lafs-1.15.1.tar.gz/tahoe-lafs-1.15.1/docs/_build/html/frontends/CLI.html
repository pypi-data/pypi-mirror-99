
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The Tahoe-LAFS CLI commands &#8212; Tahoe-LAFS 1.x documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The Tahoe REST-ful Web API" href="webapi.html" />
    <link rel="prev" title="Tahoe-LAFS Architecture" href="../architecture.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="webapi.html" title="The Tahoe REST-ful Web API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../architecture.html" title="Tahoe-LAFS Architecture"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Tahoe-LAFS 1.x documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-tahoe-lafs-cli-commands">
<h1>The Tahoe-LAFS CLI commands<a class="headerlink" href="#the-tahoe-lafs-cli-commands" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#cli-command-overview">CLI Command Overview</a><ol class="arabic">
<li><a class="reference internal" href="#unicode-support">Unicode Support</a></li>
</ol>
</li>
<li><a class="reference internal" href="#node-management">Node Management</a></li>
<li><a class="reference internal" href="#file-store-manipulation">File Store Manipulation</a><ol class="arabic">
<li><a class="reference internal" href="#starting-directories">Starting Directories</a></li>
<li><a class="reference internal" href="#command-syntax-summary">Command Syntax Summary</a></li>
<li><a class="reference internal" href="#command-examples">Command Examples</a></li>
</ol>
</li>
<li><a class="reference internal" href="#storage-grid-maintenance">Storage Grid Maintenance</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
</ol>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Tahoe-LAFS provides a single executable named “<code class="docutils literal notranslate"><span class="pre">tahoe</span></code>”, which can be used
to create and manage client/server nodes, manipulate the file store, and
perform several debugging/maintenance tasks. This executable is installed
into your virtualenv when you run <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">tahoe-lafs</span></code>.</p>
</div>
<div class="section" id="cli-command-overview">
<h2>CLI Command Overview<a class="headerlink" href="#cli-command-overview" title="Permalink to this headline">¶</a></h2>
<p>The “<code class="docutils literal notranslate"><span class="pre">tahoe</span></code>” tool provides access to three categories of commands.</p>
<ul class="simple">
<li>node management: create a client/server node, start/stop/restart it</li>
<li>file store manipulation: list files, upload, download, unlink, rename</li>
<li>debugging: unpack cap-strings, examine share files</li>
</ul>
<p>To get a list of all commands, just run “<code class="docutils literal notranslate"><span class="pre">tahoe</span></code>” with no additional
arguments. “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">--help</span></code>” might also provide something useful.</p>
<p>Running “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">--version</span></code>” will display a list of version strings, starting
with the “allmydata” module (which contains the majority of the Tahoe-LAFS
functionality) and including versions for a number of dependent libraries,
like Twisted, Foolscap, cryptography, and zfec. “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">--version-and-path</span></code>”
will also show the path from which each library was imported.</p>
<p>On Unix systems, the shell expands filename wildcards (<code class="docutils literal notranslate"><span class="pre">'*'</span></code> and <code class="docutils literal notranslate"><span class="pre">'?'</span></code>)
before the program is able to read them, which may produce unexpected results
for many <code class="docutils literal notranslate"><span class="pre">tahoe</span></code> comands. We recommend, if you use wildcards, to start the
path with “<code class="docutils literal notranslate"><span class="pre">./</span></code>”, for example “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">./*</span> <span class="pre">somewhere:</span></code>”. This
prevents the expanded filename from being interpreted as an option or as an
alias, allowing filenames that start with a dash or contain colons to be
handled correctly.</p>
<p>On Windows, a single letter followed by a colon is treated as a drive
specification rather than an alias (and is invalid unless a local path is
allowed in that context). Wildcards cannot be used to specify multiple
filenames to <code class="docutils literal notranslate"><span class="pre">tahoe</span></code> on Windows.</p>
<div class="section" id="unicode-support">
<h3>Unicode Support<a class="headerlink" href="#unicode-support" title="Permalink to this headline">¶</a></h3>
<p>As of Tahoe-LAFS v1.7.0 (v1.8.0 on Windows), the <code class="docutils literal notranslate"><span class="pre">tahoe</span></code> tool supports
non-ASCII characters in command lines and output. On Unix, the command-line
arguments are assumed to use the character encoding specified by the
current locale (usually given by the <code class="docutils literal notranslate"><span class="pre">LANG</span></code> environment variable).</p>
<p>If a name to be output contains control characters or characters that
cannot be represented in the encoding used on your terminal, it will be
quoted. The quoting scheme used is similar to <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html">POSIX shell quoting</a>: in
a “double-quoted” string, backslashes introduce escape sequences (like
those in Python strings), but in a ‘single-quoted’ string all characters
stand for themselves. This quoting is only used for output, on all
operating systems. Your shell interprets any quoting or escapes used on
the command line.</p>
</div>
</div>
<div class="section" id="node-management">
<h2>Node Management<a class="headerlink" href="#node-management" title="Permalink to this headline">¶</a></h2>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-node</span> <span class="pre">[NODEDIR]</span></code>” is the basic make-a-new-node
command. It creates a new directory and populates it with files that
will allow the “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">start</span></code>” and related commands to use it later
on. <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-node</span></code> creates nodes that have client functionality
(upload/download files), web API services (controlled by the
‘[node]web.port’ configuration), and storage services (unless
<code class="docutils literal notranslate"><span class="pre">--no-storage</span></code> is specified).</p>
<p>NODEDIR defaults to <code class="docutils literal notranslate"><span class="pre">~/.tahoe/</span></code> , and newly-created nodes default to
publishing a web server on port 3456 (limited to the loopback interface, at
127.0.0.1, to restrict access to other programs on the same host). All of the
other “<code class="docutils literal notranslate"><span class="pre">tahoe</span></code>” subcommands use corresponding defaults (with the exception
that “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code>” defaults to running a node in the current directory).</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-client</span> <span class="pre">[NODEDIR]</span></code>” creates a node with no storage service.
That is, it behaves like “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-node</span> <span class="pre">--no-storage</span> <span class="pre">[NODEDIR]</span></code>”.
(This is a change from versions prior to v1.6.0.)</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-introducer</span> <span class="pre">[NODEDIR]</span></code>” is used to create the Introducer node.
This node provides introduction services and nothing else. When started, this
node will produce a <code class="docutils literal notranslate"><span class="pre">private/introducer.furl</span></code> file, which should be
published to all clients.</p>
<div class="section" id="running-nodes">
<h3>Running Nodes<a class="headerlink" href="#running-nodes" title="Permalink to this headline">¶</a></h3>
<p>No matter what kind of node you created, the correct way to run it is
to use the <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code> command. “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span> <span class="pre">[NODEDIR]</span></code>” will start
a previously-created node in the foreground. This command functions
the same way on all platforms and logs to stdout. If you want to run
the process as a daemon, it is recommended that you use your favourite
daemonization tool.</p>
<p>The now-deprecated “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">start</span> <span class="pre">[NODEDIR]</span></code>” command will launch a
previously-created node. It will launch the node into the background
using <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">daemonize</span></code> (and internal-only command, not for user
use). On some platforms (including Windows) this command is unable to
run a daemon in the background; in that case it behaves in the same
way as “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code>”. <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">start</span></code> also monitors the logs for up
to 5 seconds looking for either a succesful startup message or for
early failure messages and produces an appropriate exit code.  You are
encouraged to use <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code> along with your favourite
daemonization tool instead of this. <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">start</span></code> is maintained for
backwards compatibility of users already using it; new scripts should
depend on <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code>.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">stop</span> <span class="pre">[NODEDIR]</span></code>” will shut down a running node. “<code class="docutils literal notranslate"><span class="pre">tahoe</span>
<span class="pre">restart</span> <span class="pre">[NODEDIR]</span></code>” will stop and then restart a running
node. Similar to above, you should use <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">run</span></code> instead alongside
your favourite daemonization tool.</p>
</div>
</div>
<div class="section" id="file-store-manipulation">
<h2>File Store Manipulation<a class="headerlink" href="#file-store-manipulation" title="Permalink to this headline">¶</a></h2>
<p>These commands let you exmaine a Tahoe-LAFS file store, providing basic
list/upload/download/unlink/rename/mkdir functionality. They can be used as
primitives by other scripts. Most of these commands are fairly thin wrappers
around web-API calls, which are described in <a class="reference internal" href="webapi.html"><span class="doc">The Tahoe REST-ful Web API</span></a>.</p>
<p>By default, all file store manipulation commands look in <code class="docutils literal notranslate"><span class="pre">~/.tahoe/</span></code> to
figure out which Tahoe-LAFS node they should use. When the CLI command makes
web-API calls, it will use <code class="docutils literal notranslate"><span class="pre">~/.tahoe/node.url</span></code> for this purpose: a running
Tahoe-LAFS node that provides a web-API port will write its URL into this
file. If you want to use a node on some other host, just create <code class="docutils literal notranslate"><span class="pre">~/.tahoe/</span></code>
and copy that node’s web-API URL into this file, and the CLI commands will
contact that node instead of a local one.</p>
<p>These commands also use a table of “aliases” to figure out which directory
they ought to use a starting point. This is explained in more detail below.</p>
<div class="section" id="starting-directories">
<h3>Starting Directories<a class="headerlink" href="#starting-directories" title="Permalink to this headline">¶</a></h3>
<p>As described in <a class="reference internal" href="../architecture.html"><span class="doc">Tahoe-LAFS Architecture</span></a>, the Tahoe-LAFS distributed file store
consists of a collection of directories and files, each of which has a
“read-cap” or a “write-cap” (also known as a URI). Each directory is simply a
table that maps a name to a child file or directory, and this table is turned
into a string and stored in a mutable file. The whole set of directory and
file “nodes” are connected together into a directed graph.</p>
<p>To use this collection of files and directories, you need to choose a
starting point: some specific directory that we will refer to as a
“starting directory”.  For a given starting directory, the
“<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">[STARTING_DIR]</span></code>” command would list the contents of this directory,
the “<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">[STARTING_DIR]/dir1</span></code>” command would look inside this directory
for a child named “<code class="docutils literal notranslate"><span class="pre">dir1</span></code>” and list its contents,
“<code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">[STARTING_DIR]/dir1/subdir2</span></code>” would look two levels deep, etc.</p>
<p>Note that there is no real global “root” directory, but instead each
starting directory provides a different, possibly overlapping
perspective on the graph of files and directories.</p>
<p>Each Tahoe-LAFS node remembers a list of starting points, called “aliases”,
which are short Unicode strings that stand in for a directory read- or
write- cap. They are stored (encoded as UTF-8) in the file
<code class="docutils literal notranslate"><span class="pre">NODEDIR/private/aliases</span></code> .  If you use the command line “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span></code>”
without any “[STARTING_DIR]” argument, then it will use the default alias,
which is <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code>, therefore “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span></code>” has the same effect as
“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">tahoe:</span></code>”.  The same goes for the other commands that can
reasonably use a default alias: <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">put</span></code>, <code class="docutils literal notranslate"><span class="pre">mkdir</span></code>, <code class="docutils literal notranslate"><span class="pre">mv</span></code>, and
<code class="docutils literal notranslate"><span class="pre">rm</span></code>.</p>
<p>For backwards compatibility with Tahoe-LAFS v1.0, if the <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias
is not found in <code class="docutils literal notranslate"><span class="pre">~/.tahoe/private/aliases</span></code>, the CLI will use the contents
of <code class="docutils literal notranslate"><span class="pre">~/.tahoe/private/root_dir.cap</span></code> instead. Tahoe-LAFS v1.0 had only a
single starting point, and stored it in this <code class="docutils literal notranslate"><span class="pre">root_dir.cap</span></code> file, so v1.1
and later will use it if necessary. However, once you’ve set a <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code>
alias with “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">set-alias</span></code>”, that will override anything in the old
<code class="docutils literal notranslate"><span class="pre">root_dir.cap</span></code> file.</p>
<p>The Tahoe-LAFS CLI commands use a similar path syntax to <code class="docutils literal notranslate"><span class="pre">scp</span></code> and
<code class="docutils literal notranslate"><span class="pre">rsync</span></code> – an optional <code class="docutils literal notranslate"><span class="pre">ALIAS:</span></code> prefix, followed by the pathname or
filename. Some commands (like “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span></code>”) use the lack of an alias to
mean that you want to refer to a local file, instead of something from the
Tahoe-LAFS file store. Another way to indicate this is to start the
pathname with “./”, “~/”, “~username/”, or “/”. On Windows, aliases
cannot be a single character, so that it is possible to distinguish a
path relative to an alias from a path starting with a local drive specifier.</p>
<p>When you’re dealing a single starting directory, the <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias is
all you need. But when you want to refer to something that isn’t yet
attached to the graph rooted at that starting directory, you need to
refer to it by its capability. The way to do that is either to use its
capability directory as an argument on the command line, or to add an
alias to it, with the “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span></code>” command. Once you’ve added an
alias, you can use that alias as an argument to commands.</p>
<p>The best way to get started with Tahoe-LAFS is to create a node, start it,
then use the following command to create a new directory and set it as your
<code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tahoe</span> <span class="n">create</span><span class="o">-</span><span class="n">alias</span> <span class="n">tahoe</span>
</pre></div>
</div>
<p>After that you can use “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">tahoe:</span></code>” and
“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">local.txt</span> <span class="pre">tahoe:</span></code>”, and both will refer to the directory that
you’ve just created.</p>
<div class="section" id="security-note-for-users-of-shared-systems">
<h4>SECURITY NOTE: For users of shared systems<a class="headerlink" href="#security-note-for-users-of-shared-systems" title="Permalink to this headline">¶</a></h4>
<p>Another way to achieve the same effect as the above “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span></code>”
command is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>tahoe add-alias tahoe `tahoe mkdir`
</pre></div>
</div>
<p>However, command-line arguments are visible to other users (through the
<code class="docutils literal notranslate"><span class="pre">ps</span></code> command or <code class="docutils literal notranslate"><span class="pre">/proc</span></code> filesystem, or the Windows Process Explorer tool),
so if you are using a Tahoe-LAFS node on a shared host, your login neighbors
will be able to see (and capture) any directory caps that you set up with the
“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span></code>” command.</p>
<p>The “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span></code>” command avoids this problem by creating a new
directory and putting the cap into your aliases file for you. Alternatively,
you can edit the <code class="docutils literal notranslate"><span class="pre">NODEDIR/private/aliases</span></code> file directly, by adding a line
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fun</span><span class="p">:</span> <span class="n">URI</span><span class="p">:</span><span class="n">DIR2</span><span class="p">:</span><span class="n">ovjy4yhylqlfoqg2vcze36dhde</span><span class="p">:</span><span class="mi">4</span><span class="n">d4f47qko2xm5g7osgo2yyidi5m4muyo2vjjy53q4vjju2u55mfa</span>
</pre></div>
</div>
<p>By entering the dircap through the editor, the command-line arguments are
bypassed, and other users will not be able to see them. Once you’ve added the
alias, no other secrets are passed through the command line, so this
vulnerability becomes less significant: they can still see your filenames and
other arguments you type there, but not the caps that Tahoe-LAFS uses to permit
access to your files and directories.</p>
</div>
</div>
<div class="section" id="command-syntax-summary">
<h3>Command Syntax Summary<a class="headerlink" href="#command-syntax-summary" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span> <span class="pre">ALIAS[:]</span> <span class="pre">DIRCAP</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span> <span class="pre">ALIAS[:]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">list-aliases</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span> <span class="pre">PATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">[PATH]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">webopen</span> <span class="pre">[PATH]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">[--mutable]</span> <span class="pre">[FROMLOCAL|-]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">[--mutable]</span> <span class="pre">FROMLOCAL|-</span> <span class="pre">TOPATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">[FROMLOCAL|-]</span> <span class="pre">mutable-file-writecap</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">get</span> <span class="pre">FROMPATH</span> <span class="pre">[TOLOCAL|-]</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">[-r]</span> <span class="pre">FROMPATH</span> <span class="pre">TOPATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">rm</span> <span class="pre">PATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">FROMPATH</span> <span class="pre">TOPATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ln</span> <span class="pre">FROMPATH</span> <span class="pre">TOPATH</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span> <span class="pre">FROMLOCAL</span> <span class="pre">TOPATH</span></code></p>
<p>In these summaries, <code class="docutils literal notranslate"><span class="pre">PATH</span></code>, <code class="docutils literal notranslate"><span class="pre">TOPATH</span></code> or <code class="docutils literal notranslate"><span class="pre">FROMPATH</span></code> can be one of:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">[SUBDIRS/]FILENAME</span></code> for a path relative to the default <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias;</li>
<li><code class="docutils literal notranslate"><span class="pre">ALIAS:[SUBDIRS/]FILENAME</span></code> for a path relative to another alias;</li>
<li><code class="docutils literal notranslate"><span class="pre">DIRCAP/[SUBDIRS/]FILENAME</span></code> or <code class="docutils literal notranslate"><span class="pre">DIRCAP:./[SUBDIRS/]FILENAME</span></code> for a path
relative to a directory cap.</li>
</ul>
<p>See <a class="reference internal" href="#cli-command-overview">CLI Command Overview</a> above for information on using wildcards with
local paths, and different treatment of colons between Unix and Windows.</p>
<p><code class="docutils literal notranslate"><span class="pre">FROMLOCAL</span></code> or <code class="docutils literal notranslate"><span class="pre">TOLOCAL</span></code> is a path in the local filesystem.</p>
</div>
<div class="section" id="command-examples">
<h3>Command Examples<a class="headerlink" href="#command-examples" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span> <span class="pre">ALIAS[:]</span> <span class="pre">DIRCAP</span></code></p>
<blockquote>
<div><p>An example would be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tahoe</span> <span class="n">add</span><span class="o">-</span><span class="n">alias</span> <span class="n">fun</span> <span class="n">URI</span><span class="p">:</span><span class="n">DIR2</span><span class="p">:</span><span class="n">ovjy4yhylqlfoqg2vcze36dhde</span><span class="p">:</span><span class="mi">4</span><span class="n">d4f47qko2xm5g7osgo2yyidi5m4muyo2vjjy53q4vjju2u55mfa</span>
</pre></div>
</div>
<p>This creates an alias <code class="docutils literal notranslate"><span class="pre">fun:</span></code> and configures it to use the given directory
cap. Once this is done, “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">fun:</span></code>” will list the contents of this
directory. Use “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span> <span class="pre">tahoe</span> <span class="pre">DIRCAP</span></code>” to set the contents of the
default <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias.</p>
<p>Since Tahoe-LAFS v1.8.2, the alias name can be given with or without the
trailing colon.</p>
<p>On Windows, the alias should not be a single character, because it would be
confused with the drive letter of a local path.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span> <span class="pre">fun</span></code></p>
<blockquote>
<div>This combines “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span></code>” and “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span></code>” into a single step.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">list-aliases</span></code></p>
<blockquote>
<div>This displays a table of all configured aliases.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span></code></p>
<blockquote>
<div>This creates a new empty unlinked directory, and prints its write-cap to
stdout. The new directory is not attached to anything else.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span> <span class="pre">subdir</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mkdir</span> <span class="pre">/subdir</span></code></p>
<blockquote>
<div>This creates a new empty directory and attaches it below the root directory
of the default <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias with the name “<code class="docutils literal notranslate"><span class="pre">subdir</span></code>”.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">/</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">tahoe:/</span></code></p>
<blockquote>
<div>All four list the root directory of the default <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">ls</span> <span class="pre">subdir</span></code></p>
<blockquote>
<div>This lists a subdirectory of your file store.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">webopen</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">webopen</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">webopen</span> <span class="pre">tahoe:subdir/</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">webopen</span> <span class="pre">subdir/</span></code></p>
<blockquote>
<div>This uses the python ‘webbrowser’ module to cause a local web browser to
open to the web page for the given directory. This page offers interfaces to
add, download, rename, and unlink files and subdirectories in that directory.
If no alias or path is given, this command opens the root directory of the
default <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> alias.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">./file.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">/tmp/file.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">~/file.txt</span></code></p>
<blockquote>
<div>These upload the local file into the grid, and prints the new read-cap to
stdout. The uploaded file is not attached to any directory. All one-argument
forms of “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span></code>” perform an unlinked upload.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">-</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span></code></p>
<blockquote>
<div>These also perform an unlinked upload, but the data to be uploaded is taken
from stdin.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">uploaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">tahoe:uploaded.txt</span></code></p>
<blockquote>
<div>These upload the local file and add it to your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root with the name
“<code class="docutils literal notranslate"><span class="pre">uploaded.txt</span></code>”.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">subdir/foo.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">-</span> <span class="pre">subdir/foo.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">tahoe:subdir/foo.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">DIRCAP/foo.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">DIRCAP/subdir/foo.txt</span></code></p>
<blockquote>
<div>These upload the named file and attach them to a subdirectory of the given
root directory, under the name “<code class="docutils literal notranslate"><span class="pre">foo.txt</span></code>”. When a directory write-cap is
given, you can use either <code class="docutils literal notranslate"><span class="pre">/</span></code> (as shown above) or <code class="docutils literal notranslate"><span class="pre">:./</span></code> to separate it
from the following path. When the source file is named “<code class="docutils literal notranslate"><span class="pre">-</span></code>“, the contents
are taken from stdin.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">--mutable</span></code></p>
<blockquote>
<div>Create a new (SDMF) mutable file, fill it with the contents of <code class="docutils literal notranslate"><span class="pre">file.txt</span></code>,
and print the new write-cap to stdout.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">put</span> <span class="pre">file.txt</span> <span class="pre">MUTABLE-FILE-WRITECAP</span></code></p>
<blockquote>
<div>Replace the contents of the given mutable file with the contents of
<code class="docutils literal notranslate"><span class="pre">file.txt</span></code> and print the same write-cap to stdout.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">file.txt</span> <span class="pre">tahoe:uploaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">file.txt</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">file.txt</span> <span class="pre">tahoe:/</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">./file.txt</span> <span class="pre">tahoe:</span></code></p>
<blockquote>
<div>These upload the local file and add it to your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root with the name
“<code class="docutils literal notranslate"><span class="pre">uploaded.txt</span></code>”.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">downloaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">./downloaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">/tmp/downloaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">~/downloaded.txt</span></code></p>
<blockquote>
<div>This downloads the named file from your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root, and puts the result on
your local filesystem.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">fun:stuff.txt</span></code></p>
<blockquote>
<div><p>This copies a file from your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root to a different directory, set up
earlier with “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span> <span class="pre">fun</span> <span class="pre">DIRCAP</span></code>” or “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span> <span class="pre">fun</span></code>”.</p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">~/my_dir/</span> <span class="pre">tahoe:</span></code></p>
<p>This copies the folder <code class="docutils literal notranslate"><span class="pre">~/my_dir/</span></code> and all its children to the grid, creating
the new folder <code class="docutils literal notranslate"><span class="pre">tahoe:my_dir</span></code>. Note that the trailing slash is not required:
all source arguments which are directories will be copied into new
subdirectories of the target.</p>
<p>The behavior of <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">cp</span></code>, like the regular UNIX <code class="docutils literal notranslate"><span class="pre">/bin/cp</span></code>, is subtly
different depending upon the exact form of the arguments. In particular:</p>
</div></blockquote>
<ul class="simple">
<li>Trailing slashes indicate directories, but are not required.</li>
<li>If the target object does not already exist:
* and if the source is a single file, it will be copied into the target;
* otherwise, the target will be created as a directory.</li>
<li>If there are multiple sources, the target must be a directory.</li>
<li>If the target is a pre-existing file, the source must be a single file.</li>
<li>If the target is a directory, each source must be a named file, a named
directory, or an unnamed directory. It is not possible to copy an unnamed
file (e.g. a raw filecap) into a directory, as there is no way to know what
the new file should be named.</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">unlink</span> <span class="pre">uploaded.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">unlink</span> <span class="pre">tahoe:uploaded.txt</span></code></p>
<blockquote>
<div>This unlinks a file from your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root (that is, causes there to no
longer be an entry <code class="docutils literal notranslate"><span class="pre">uploaded.txt</span></code> in the root directory that points to it).
Note that this does not delete the file from the grid.
For backward compatibility, <code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">rm</span></code> is accepted as a synonym for
<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">unlink</span></code>.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">uploaded.txt</span> <span class="pre">renamed.txt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">tahoe:renamed.txt</span></code></p>
<blockquote>
<div>These rename a file within your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root directory.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">uploaded.txt</span> <span class="pre">fun:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">fun:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">mv</span> <span class="pre">tahoe:uploaded.txt</span> <span class="pre">fun:uploaded.txt</span></code></p>
<blockquote>
<div>These move a file from your <code class="docutils literal notranslate"><span class="pre">tahoe:</span></code> root directory to the directory
set up earlier with “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">add-alias</span> <span class="pre">fun</span> <span class="pre">DIRCAP</span></code>” or
“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">create-alias</span> <span class="pre">fun</span></code>”.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span> <span class="pre">~</span> <span class="pre">work:backups</span></code></p>
<blockquote>
<div><p>This command performs a versioned backup of every file and directory
underneath your “<code class="docutils literal notranslate"><span class="pre">~</span></code>” home directory, placing an immutable timestamped
snapshot in e.g. <code class="docutils literal notranslate"><span class="pre">work:backups/Archives/2009-02-06_04:00:05Z/</span></code> (note that
the timestamp is in UTC, hence the “Z” suffix), and a link to the latest
snapshot in work:backups/Latest/ . This command uses a small SQLite database
known as the “backupdb”, stored in <code class="docutils literal notranslate"><span class="pre">~/.tahoe/private/backupdb.sqlite</span></code>, to
remember which local files have been backed up already, and will avoid
uploading files that have already been backed up (except occasionally that
will randomly upload them again if it has been awhile since had last been
uploaded, just to make sure that the copy of it on the server is still good).
It compares timestamps and filesizes when making this comparison. It also
re-uses existing directories which have identical contents. This lets it
run faster and reduces the number of directories created.</p>
<p>If you reconfigure your client node to switch to a different grid, you
should delete the stale backupdb.sqlite file, to force “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span></code>”
to upload all files to the new grid.</p>
<p>The fact that “tahoe backup” checks timestamps on your local files and
skips ones that don’t appear to have been changed is one of the major
differences between “tahoe backup” and “tahoe cp -r”. The other major
difference is that “tahoe backup” keeps links to all of the versions that
have been uploaded to the grid, so you can navigate among old versions
stored in the grid. In contrast, “tahoe cp -r” unlinks the previous
version from the grid directory and links the new version into place,
so unless you have a link to the older version stored somewhere else,
you’ll never be able to get back to it.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span> <span class="pre">--exclude=*~</span> <span class="pre">~</span> <span class="pre">work:backups</span></code></p>
<blockquote>
<div>Same as above, but this time the backup process will ignore any
filename that will end with ‘~’. <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> will accept any standard
Unix shell-style wildcards, as implemented by the
<a class="reference external" href="http://docs.python.org/library/fnmatch.html">Python fnmatch module</a>.
You may give multiple <code class="docutils literal notranslate"><span class="pre">--exclude</span></code> options.  Please pay attention that
the pattern will be matched against any level of the directory tree;
it’s still impossible to specify absolute path exclusions.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span> <span class="pre">--exclude-from=/path/to/filename</span> <span class="pre">~</span> <span class="pre">work:backups</span></code></p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">--exclude-from</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">--exclude</span></code>, but reads exclusion
patterns from <code class="docutils literal notranslate"><span class="pre">/path/to/filename</span></code>, one per line.</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">backup</span> <span class="pre">--exclude-vcs</span> <span class="pre">~</span> <span class="pre">work:backups</span></code></p>
<blockquote>
<div><p>This command will ignore any file or directory name known to be used by
version control systems to store metadata. The excluded names are:</p>
<blockquote>
<div><ul class="simple">
<li>CVS</li>
<li>RCS</li>
<li>SCCS</li>
<li>.git</li>
<li>.gitignore</li>
<li>.cvsignore</li>
<li>.svn</li>
<li>.arch-ids</li>
<li>{arch}</li>
<li>=RELEASE-ID</li>
<li>=meta-update</li>
<li>=update</li>
<li>.bzr</li>
<li>.bzrignore</li>
<li>.bzrtags</li>
<li>.hg</li>
<li>.hgignore</li>
<li>_darcs</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="storage-grid-maintenance">
<h2>Storage Grid Maintenance<a class="headerlink" href="#storage-grid-maintenance" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">manifest</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">manifest</span> <span class="pre">--storage-index</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">manifest</span> <span class="pre">--verify-cap</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">manifest</span> <span class="pre">--repair-cap</span> <span class="pre">tahoe:</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">manifest</span> <span class="pre">--raw</span> <span class="pre">tahoe:</span></code></p>
<blockquote>
<div><p>This performs a recursive walk of the given directory, visiting every file
and directory that can be reached from that point. It then emits one line to
stdout for each object it encounters.</p>
<p>The default behavior is to print the access cap string (like <code class="docutils literal notranslate"><span class="pre">URI:CHK:..</span></code>
or <code class="docutils literal notranslate"><span class="pre">URI:DIR2:..</span></code>), followed by a space, followed by the full path name.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">--storage-index</span></code> is added, each line will instead contain the object’s
storage index. This (string) value is useful to determine which share files
(on the server) are associated with this directory tree. The <code class="docutils literal notranslate"><span class="pre">--verify-cap</span></code>
and <code class="docutils literal notranslate"><span class="pre">--repair-cap</span></code> options are similar, but emit a verify-cap and repair-cap,
respectively. If <code class="docutils literal notranslate"><span class="pre">--raw</span></code> is provided instead, the output will be a
JSON-encoded dictionary that includes keys for pathnames, storage index
strings, and cap strings. The last line of the <code class="docutils literal notranslate"><span class="pre">--raw</span></code> output will be a JSON
encoded deep-stats dictionary.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">stats</span> <span class="pre">tahoe:</span></code></p>
<blockquote>
<div>This performs a recursive walk of the given directory, visiting every file
and directory that can be reached from that point. It gathers statistics on
the sizes of the objects it encounters, and prints a summary to stdout.</div></blockquote>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>For a list of all debugging commands, use “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span></code>”. For more detailed
help on any of these commands, use “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">COMMAND</span> <span class="pre">--help</span></code>”.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">find-shares</span> <span class="pre">STORAGEINDEX</span> <span class="pre">NODEDIRS..</span></code>” will look through one or
more storage nodes for the share files that are providing storage for the
given storage index.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">catalog-shares</span> <span class="pre">NODEDIRS..</span></code>” will look through one or more
storage nodes and locate every single share they contain. It produces a report
on stdout with one line per share, describing what kind of share it is, the
storage index, the size of the file is used for, etc. It may be useful to
concatenate these reports from all storage hosts and use it to look for
anomalies.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">dump-share</span> <span class="pre">SHAREFILE</span></code>” will take the name of a single share file
(as found by “<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">find-shares</span></code>”) and print a summary of its contents to
stdout. This includes a list of leases, summaries of the hash tree, and
information from the UEB (URI Extension Block). For mutable file shares, it
will describe which version (seqnum and root-hash) is being stored in this
share.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">dump-cap</span> <span class="pre">CAP</span></code>” will take any Tahoe-LAFS URI and unpack it
into separate pieces. The most useful aspect of this command is to reveal the
storage index for any given URI. This can be used to locate the share files
that are holding the encoded+encrypted data for this file.</p>
<p>“<code class="docutils literal notranslate"><span class="pre">tahoe</span> <span class="pre">debug</span> <span class="pre">corrupt-share</span> <span class="pre">SHAREFILE</span></code>” will flip a bit in the given
sharefile. This can be used to test the client-side verification/repair code.
Obviously, this command should not be used during normal operation.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Tahoe-LAFS CLI commands</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#cli-command-overview">CLI Command Overview</a><ul>
<li><a class="reference internal" href="#unicode-support">Unicode Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#node-management">Node Management</a><ul>
<li><a class="reference internal" href="#running-nodes">Running Nodes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-store-manipulation">File Store Manipulation</a><ul>
<li><a class="reference internal" href="#starting-directories">Starting Directories</a><ul>
<li><a class="reference internal" href="#security-note-for-users-of-shared-systems">SECURITY NOTE: For users of shared systems</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-syntax-summary">Command Syntax Summary</a></li>
<li><a class="reference internal" href="#command-examples">Command Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#storage-grid-maintenance">Storage Grid Maintenance</a></li>
<li><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../architecture.html"
                        title="previous chapter">Tahoe-LAFS Architecture</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="webapi.html"
                        title="next chapter">The Tahoe REST-ful Web API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/frontends/CLI.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="webapi.html" title="The Tahoe REST-ful Web API"
             >next</a> |</li>
        <li class="right" >
          <a href="../architecture.html" title="Tahoe-LAFS Architecture"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Tahoe-LAFS 1.x documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, The Tahoe-LAFS Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>