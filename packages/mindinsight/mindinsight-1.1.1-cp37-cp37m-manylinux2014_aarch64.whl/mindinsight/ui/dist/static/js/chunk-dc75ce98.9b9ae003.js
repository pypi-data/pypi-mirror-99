(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc75ce98"],{"3ca3":function(t,a,e){"use strict";var r=e("6547").charAt,i=e("69f3"),s=e("7dd0"),n="String Iterator",o=i.set,c=i.getterFor(n);s(String,"String",(function(t){o(this,{type:n,string:String(t),index:0})}),(function(){var t,a=c(this),e=a.string,i=a.index;return i>=e.length?{value:void 0,done:!0}:(t=r(e,i),a.index+=t.length,{value:t,done:!1})}))},4255:function(t,a,e){"use strict";e("6401")},4936:function(t,a,e){t.exports=e.p+"static/img/histogram-guid.57843081.svg"},"532e":function(t,a,e){t.exports=e.p+"static/img/data-process-guid.beda9514.svg"},"53ca":function(t,a,e){"use strict";e.d(a,"a",(function(){return r}));e("e01a"),e("d28b"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"56de":function(t,a,e){t.exports=e.p+"static/img/graph-guid.2fe2af69.svg"},6265:function(t,a,e){},6401:function(t,a,e){},"97a7":function(t,a,e){t.exports=e.p+"static/img/scalar-guid.111b3272.svg"},"98c0":function(t,a,e){t.exports=e.p+"static/img/tensor-guid.c9811239.svg"},a623:function(t,a,e){"use strict";var r=e("23e7"),i=e("b727").every,s=e("a640"),n=e("ae40"),o=s("every"),c=n("every");r({target:"Array",proto:!0,forced:!o||!c},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},b0c0:function(t,a,e){var r=e("83ab"),i=e("9bf2").f,s=Function.prototype,n=s.toString,o=/^\s*function ([^ (]*)/,c="name";r&&!(c in s)&&i(s,c,{configurable:!0,get:function(){try{return n.call(this).match(o)[1]}catch(t){return""}}})},baa5:function(t,a,e){var r=e("23e7"),i=e("e58c");r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},cc22:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"cl-dashboard"},[r("div",{staticClass:"cl-dashboard-top"},[r("div",{staticClass:"cl-dashboard-top-title"},[t._v(" "+t._s(t.$t("trainingDashboard.trainingDashboardTitle"))+" ")]),t.trainJobCached?r("div",{staticClass:"loading-icon",class:t.trainJobCached>1?"el-icon-loading":"el-icon-time",attrs:{title:t.trainJobCached>1?t.$t("trainingDashboard.loadingTip"):t.$t("trainingDashboard.waitLoading")}}):t._e(),r("div",{staticClass:"path-message"},[r("span",[t._v(t._s(t.$t("symbols.leftbracket")))]),r("span",[t._v(t._s(t.$t("trainingDashboard.summaryDirPath")))]),r("span",[t._v(t._s(t.summaryPath))]),r("span",[t._v(t._s(t.$t("symbols.rightbracket")))])])]),r("div",{staticClass:"cl-dashboard-center"},[r("div",{staticClass:"cl-dashboard-con-up",class:t.curPageArr.length&&!t.wrongPlugin?"":"no-data-hover",on:{click:t.viewMoreScalars}},[r("div",{staticClass:"cl-dashboard-title"},[t._v(" "+t._s(t.$t("trainingDashboard.trainingScalar")))]),r("div",{staticClass:"cl-module"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.curPageArr.length&&!t.wrongPlugin,expression:"curPageArr.length && !wrongPlugin"}],staticClass:"cl-scalar-tagName"},t._l(t.curPageArr,(function(a,e){return r("div",{key:e,class:["tagNameLeft",1==e?"tagNameRight":""]},[t._v(" "+t._s(a.tagName)+" ")])})),0),r("div",{directives:[{name:"show",rawName:"v-show",value:t.curPageArr.length&&!t.wrongPlugin,expression:"curPageArr.length && !wrongPlugin"}],key:"chart-data",attrs:{id:"module-chart"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.curPageArr.length||t.wrongPlugin,expression:"!curPageArr.length || wrongPlugin"}],key:"no-chart-data",staticClass:"no-data-img"},[r("img",{attrs:{src:e("97a7"),alt:""}}),t.initOverKey.scalar?r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.scalarUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.scalarTipFirst")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipForth"))+" ")]):r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])]),r("div",{staticClass:"cl-dashboard-con-up",class:t.histogramTag&&!t.wrongPlugin?"":"no-data-hover",on:{click:t.viewMoreHistogram}},[r("div",{staticClass:"cl-dashboard-title"},[t._v(t._s(t.$t("histogram.titleText")))]),r("div",{staticClass:"cl-module"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!!t.histogramTag&&!t.wrongPlugin,expression:"!!histogramTag && !wrongPlugin"}],staticClass:"histogram-char-container"},[r("div",{attrs:{id:"distribution-chart"}}),r("div",{staticClass:"tag-text",attrs:{title:t.histogramTag}},[t._v(t._s(t.histogramTag))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.histogramTag||t.wrongPlugin,expression:"!histogramTag || wrongPlugin"}],key:"no-chart-data",staticClass:"no-data-img"},[r("img",{attrs:{src:e("4936"),alt:""}}),t.initOverKey.histogram?r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.histogramUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.histogramGuidTipFirst")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipForth"))+" ")]):r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])]),r("div",{staticClass:"cl-dashboard-con-up",class:t.tensorTag&&!t.wrongPlugin?"":"no-data-hover",on:{mousedown:function(a){return t.viewMoreTensors(a)},mouseup:function(a){return t.viewMoreTensors(a)},click:function(a){return t.viewMoreTensors(a)}}},[r("div",{staticClass:"cl-dashboard-title"},[t._v(t._s(t.$t("tensors.titleText")))]),r("div",{staticClass:"cl-module"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!!t.tensorTag&&!t.wrongPlugin,expression:"!!tensorTag && !wrongPlugin"}],staticClass:"tensor-char-container"},[r("div",{attrs:{id:"tensor-chart-container"}},[r("gridTableComponents",{ref:"tensorChart",attrs:{showOperate:!1,fullData:t.tensorData}})],1),r("div",{staticClass:"tag-text",attrs:{title:t.tensorTag}},[t._v(t._s(t.tensorTag))])]),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.tensorTag||t.wrongPlugin,expression:"!tensorTag || wrongPlugin"}],key:"no-chart-data",staticClass:"no-data-img"},[r("img",{attrs:{src:e("98c0"),alt:""}}),t.initOverKey.tensor?r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.tensorUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.tensorTipFirst")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipForth"))+" ")]):r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])]),r("div",{staticClass:"cl-dashboard-con-up",class:t.firstFloorNodes.length&&!t.wrongPlugin?"":"no-data-hover",on:{click:t.jumpToGraph}},[r("div",{staticClass:"cl-dashboard-title"},[t._v(" "+t._s(t.$t("trainingDashboard.calculationChart"))+" ")]),r("div",{staticClass:"cl-module"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.firstFloorNodes.length&&!t.wrongPlugin,expression:"firstFloorNodes.length && !wrongPlugin"}],staticClass:"graph",attrs:{id:"graph"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.firstFloorNodes.length||t.wrongPlugin,expression:"!firstFloorNodes.length || wrongPlugin"}],staticClass:"no-data-img"},[r("img",{attrs:{src:e("56de"),alt:""}}),t.initOverKey.graph?r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.graphUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.graphTipFirst")))]),t._v(" "+t._s(t.$t("summaryManage.graphTipSecond"))+" ")]):r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])]),r("div",{staticClass:"cl-dashboard-con-up",class:t.showDatasetGraph&&!t.wrongPlugin?"":"no-data-hover",on:{click:t.jumpToDataMap}},[r("div",{staticClass:"cl-dashboard-title"},[t._v(" "+t._s(t.$t("trainingDashboard.dataMap")))]),r("div",{staticClass:"cl-module"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showDatasetGraph&&!t.wrongPlugin,expression:"showDatasetGraph && !wrongPlugin"}],staticClass:"graph",attrs:{id:"dataMapGraph"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDatasetGraph||t.wrongPlugin,expression:"!showDatasetGraph || wrongPlugin"}],key:"no-chart-data",staticClass:"no-data-img"},[r("img",{attrs:{src:e("532e"),alt:""}}),t.initOverKey.dataMap?r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.dataProcessUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.dataProcessTipFirst")))]),t._v(" "+t._s(t.$t("symbols.fullStop"))+" ")]):r("p",{staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])]),r("div",{staticClass:"cl-dashboard-con-up",class:t.originImageDataArr.length&&!t.wrongPlugin?"":"no-data-hover",on:{click:function(a){return t.linkToImage(a)}}},[r("div",{staticClass:"cl-dashboard-title"},[r("div",{staticClass:"cl-dashboard-title-left"},[t._v(" "+t._s(t.$t("trainingDashboard.samplingData")))]),r("div",{staticClass:"cl-dashboard-title-right title-height"},[r("el-button",{attrs:{disabled:t.originImageDataArr.length<=1,type:"text"},on:{click:function(a){return t.changeImage(a)}}},[r("span",{staticClass:"el-icon-refresh"}),t._v(t._s(t.$t("trainingDashboard.imagesampleSwitch"))+" ")])],1)]),r("div",{staticClass:"cl-module"},[r("div",{staticClass:"image-container",class:t.originImageDataArr.length&&!t.wrongPlugin?"":"no-data-img"},[r("img",{directives:[{name:"show",rawName:"v-show",value:t.originImageDataArr.length&&!t.wrongPlugin,expression:"originImageDataArr.length && !wrongPlugin"}],staticClass:"sample-img select-disable",attrs:{src:t.curImageShowSample.curImgUrl}}),r("img",{directives:[{name:"show",rawName:"v-show",value:!t.originImageDataArr.length||t.wrongPlugin,expression:"!originImageDataArr.length || wrongPlugin"}],attrs:{src:e("daff"),alt:""}}),r("p",{directives:[{name:"show",rawName:"v-show",value:(!t.originImageDataArr.length||t.wrongPlugin)&&t.initOverKey.image,expression:"(!originImageDataArr.length || wrongPlugin) && initOverKey.image"}],staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("summaryManage.guidTipFirst"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.guidUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.guidTipSecond")))]),t._v(" "+t._s(t.$t("summaryManage.guidTipThird"))+" "),r("a",{staticClass:"link-text",attrs:{href:t.$t("summaryManage.imageUrl"),target:"_blank"}},[t._v(t._s(t.$t("summaryManage.imageTipFirst")))]),t._v(" "+t._s(t.$t("symbols.fullStop"))+" ")]),r("p",{directives:[{name:"show",rawName:"v-show",value:(!t.originImageDataArr.length||t.wrongPlugin)&&!t.initOverKey.image,expression:"(!originImageDataArr.length || wrongPlugin) && !initOverKey.image"}],staticClass:"no-data-text"},[t._v(" "+t._s(t.$t("public.dataLoading"))+" ")])])])])])])},i=[],s=(e("99af"),e("a623"),e("4de4"),e("4160"),e("caad"),e("c975"),e("e260"),e("a15b"),e("baa5"),e("d81d"),e("fb6a"),e("45fc"),e("a434"),e("b0c0"),e("a9e3"),e("f00c"),e("b680"),e("b64b"),e("d3b7"),e("ac1f"),e("25f0"),e("2532"),e("3ca3"),e("5319"),e("1276"),e("159b"),e("ddb0"),e("53ca")),n=e("3778"),o=e("f756"),c=e("2dd7"),l=e("5698"),h=(e("6d21"),e("313e")),u=e.n(h),g=e("cd2f"),d={select:l["d"],selectAll:l["e"],format:l["b"],precisionRound:l["c"]},m={data:function(){return{trainingJobId:"",summaryPath:"",defColorCount:c["a"].commonColorArr.length,colorNum:0,charObj:null,histogramObj:null,histogramOption:{},histogramData:[],histogramOriData:{},charOption:{},charData:[],originImageDataArr:[],curImageShowSample:{},imageRandomLoopCount:0,imageBasePath:"v1/mindinsight/datavisual/image/single-image?",autoUpdateTimer:null,histogramTag:"",allGraphData:{},graphviz:null,firstFloorNodes:[],curColorIndex:0,totalMemory:33554432,curPageArr:[],allDatasetGraphData:{},showDatasetGraph:!1,datasetGraphviz:{},reloadStopTime:1e3,wrongPlugin:!1,fileTag:"",tensorData:[],tensorTag:"",tensorNewDataFlag:!0,tensorMouseData:{timeStamp:0,pageX:0,pageY:0,isClick:!1},mouseEventKey:{click:"click",mousedown:"mousedown",mouseup:"mouseup"},trainJobCached:0,cacheKey:{notInCache:"NOT_IN_CACHE",caching:"CACHING",cached:"CACHED"},initOverKey:{histogram:!1,image:!1,tensor:!1,scalar:!1,graph:!1,dataMap:!1}}},computed:{isReload:function(){return this.$store.state.isReload},isTimeReload:function(){return this.$store.state.isTimeReload},timeReloadValue:function(){return this.$store.state.timeReloadValue}},components:{gridTableComponents:g["a"]},watch:{isReload:function(t){var a=this;t&&(this.isTimeReload&&this.startAutoUpdate(),this.getDatavisualPlugins(!0),this.queryDatasetGraph(),this.queryTrainJobCacheState(),setTimeout((function(){a.$store.commit("setIsReload",!1)}),this.reloadStopTime))},isTimeReload:function(t){t?this.startAutoUpdate():this.stopAutoUpdate()},timeReloadValue:function(){this.isTimeReload&&this.startAutoUpdate()}},destroyed:function(){this.stopAutoUpdate(),window.removeEventListener("resize",this.resizeCallback,!1)},mounted:function(){var t=this;this.$nextTick((function(){window.addEventListener("resize",t.resizeCallback,!1),t.init()}))},methods:{resizeCallback:function(){var t=this;this.charResizeTimer&&(clearTimeout(this.charResizeTimer),this.charResizeTimer=null),this.charResizeTimer=setTimeout((function(){t.charObj&&t.charObj.resize(),t.histogramObj&&t.histogramObj.resize();var a=t.$refs.tensorChart;a&&a.resizeView()}),500)},init:function(){this.$route.query&&this.$route.query.id?(this.trainingJobId=this.$route.query.id,this.summaryPath=decodeURIComponent(this.trainingJobId),document.title=this.summaryPath+"-"+this.$t("trainingDashboard.trainingDashboardTitle")+"-MindInsight"):(document.title=this.$t("trainingDashboard.trainingDashboardTitle")+"-MindInsight",this.trainingJobId="",this.$message.error(this.$t("trainingDashboard.invalidId"))),this.getDatavisualPlugins(!0),this.isTimeReload&&this.startAutoUpdate(),this.queryDatasetGraph(),this.queryTrainJobCacheState()},getDatavisualPlugins:function(t){var a=this,e={train_id:this.trainingJobId,manual_update:t||!1};n["a"].getDatavisualPlugins(e).then((function(t){if(a.wrongPlugin=!1,t&&t.data&&t.data.plugins){var e=t.data.plugins,r=e.image||[],i=e.scalar||[],s=e.graph||[],n=e.tensor||[];s.length&&(a.fileTag=s[0]);var o=e.histogram||[];a.getHistogramTag(o),a.dealImageData(r),a.getScalarList(i),a.dealTensorData(n),!a.firstFloorNodes.length&&s.length?a.queryGraphData():a.initOverKey.graph=!0}else a.initOverKey={histogram:!0,image:!0,tensor:!0,scalar:!0,graph:!0,dataMap:!0}})).catch((function(t){a.initOverKey={histogram:!0,image:!0,tensor:!0,scalar:!0,graph:!0,dataMap:!0},t.response&&t.response.data&&t.response.data.error_code&&"50545005"===t.response.data.error_code.toString()&&(a.wrongPlugin=!0)}))},viewMoreScalars:function(){this.curPageArr.length&&this.$router.push({path:"/train-manage/scalar",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})},viewMoreHistogram:function(){this.histogramTag&&this.$router.push({path:"/train-manage/histogram",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})},viewMoreTensors:function(t){if(this.tensorTag)if(t.type===this.mouseEventKey.mousedown)this.tensorMouseData.isClick=!1,this.tensorMouseData.pageX=t.pageX,this.tensorMouseData.pageY=t.pageY;else if(t.type===this.mouseEventKey.mouseup){var a=3;Math.abs(t.pageX-this.tensorMouseData.pageX)<=a&&Math.abs(t.pageY-this.tensorMouseData.pageY)<=a&&(this.tensorMouseData.isClick=!0,this.tensorMouseData.timeStamp=t.timeStamp)}else t.type===this.mouseEventKey.click&&this.tensorMouseData.isClick&&t.timeStamp===this.tensorMouseData.timeStamp&&this.$router.push({path:"/train-manage/tensor",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})},jumpToDataMap:function(){Object.keys(this.allDatasetGraphData).length&&this.$router.push({path:"/train-manage/data-map",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})},jumpToGraph:function(){this.firstFloorNodes.length&&this.$router.push({path:"/train-manage/graph",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})},startAutoUpdate:function(){var t=this;this.autoUpdateTimer&&(clearInterval(this.autoUpdateTimer),this.autoUpdateTimer=null),this.autoUpdateTimer=setInterval((function(){t.$store.commit("clearToken"),t.getDatavisualPlugins(),Object.keys(t.allDatasetGraphData).length||t.queryDatasetGraph(),t.queryTrainJobCacheState()}),1e3*this.timeReloadValue)},stopAutoUpdate:function(){this.autoUpdateTimer&&(clearInterval(this.autoUpdateTimer),this.autoUpdateTimer=null)},getScalarList:function(t){var a=this;if(!t.length)return this.colorNum=0,this.charObj=null,this.charOption={},this.charData=[],this.curPageArr=[],void(this.initOverKey.scalar=!0);var e={plugin_name:"scalar",train_id:this.trainingJobId};n["a"].getSingleTrainJob(e,!0).then((function(t){if(t&&t.data&&t.data.train_jobs&&t.data.train_jobs.length)if(t.data&&t.data.error_code)a.$message.error("".concat(t.data.error_code," : ").concat(a.$t("error")[t.data.error_code]));else{var e=[],r=[],i=t.data.train_jobs;i.forEach((function(t,a){r.push({id:t.id,label:t.name}),t.tags.forEach((function(a){var r=-1;if(e.some((function(t,e){if(t.tagName===a)return r=e,!0})),-1===r)e.push({tagName:a,runNames:[t.name],runId:[t.id],colors:[]});else{var i=e[r];i.runNames.push(t.name),i.runId.push(t.id)}}))})),a.runList=r,e.length&&(e=e.slice(0,2),a.curPageArr=e,a.updateTagInPage())}else a.initOverKey.scalar=!0}),this.errorScalar).catch((function(t){a.initOverKey.scalar=!0}))},updateTagInPage:function(){var t=this,a=[];this.curPageArr.forEach((function(e,r){var i=e.runId.length;if(0!==i){var s={train_id:e.runId[0],tag:e.tagName};a.push(t.addAjax(s,r))}})),Promise.all(a).then((function(a){if(a){t.charData=[];for(var e=function(e){if(!a[e]||!a[e].data)return{v:void 0};var r=a[e].data,i={valueData:{stepData:[],absData:[],relativeData:[]},yAxisIndex:a[e].yIndex,color:c["a"].commonColorArr[t.colorNum]?c["a"].commonColorArr[t.colorNum]:c["a"].commonColorArr[t.defColorCount-1],tagName:a[e].params.tag},s=0;r.metadatas.length&&(s=r.metadatas[0].wall_time),r.metadatas.forEach((function(t){i.valueData.stepData.push([t.step,t.value]),i.valueData.absData.push([t.wall_time,t.value]),i.valueData.relativeData.push([t.wall_time-s,t.value])})),t.colorNum++,t.charData.push(i)},r=0;r<a.length;r++){var i=e(r);if("object"===Object(s["a"])(i))return i.v}t.charOption=t.formateCharOption(),t.colorNum=0,t.updateOrCreateChar()}}))},formateSmoothData:function(t){if(!t||t.length<2)return t;for(var a=JSON.parse(JSON.stringify(t)),e=t.length,r=0,i=0,s=0,n=a[0][1],o=a.every((function(t){return t[1]===n})),c=0;c<e;c++){var l=a[c][1];if(!o&&Number.isFinite(l)){r=r*i+(1-i)*l,s++;var h=1;1!==i&&(h=1-Math.pow(i,s)),a[c][1]=r/h}}return a},updateOrCreateChar:function(t){this.charObj?this.charObj.setOption(this.charOption,!0):document.getElementById("module-chart")&&(this.charObj=u.a.init(document.getElementById("module-chart"),null),this.charObj.setOption(this.charOption,!0))},formateCharOption:function(){var t=this,a=[],e=[],r=[];this.curPageArr.forEach((function(t){var a={type:"value",scale:!0,axisLine:{lineStyle:{color:"#E6EBF5",width:2}},axisLabel:{color:"#9EA4B3",formatter:function(t){var a=Math.abs(t);return a.toString().length>6?t.toExponential(0):t>=1e3||t<=-1e3?parseFloat((t/1e3).toFixed(2))+"k":t>0?t:parseFloat(t.toFixed(3))}}};r.push(a)})),this.charData.forEach((function(r,i){var s={name:r.tagName,data:[],type:"line",showSymbol:!1,lineStyle:{color:r.color},color:r.color,yAxisIndex:r.yAxisIndex};s.data=t.formateSmoothData(r.valueData["stepData"]),a.push(s),e.push(s.name)}));var i={legend:{data:e,selectedMode:!1,icon:"circle",bottom:0},grid:{top:20,bottom:66,left:60,right:60},xAxis:[{type:"value",show:!0,scale:!0,nameGap:30,minInterval:1,axisLine:{lineStyle:{color:"#E6EBF5",width:2}},axisLabel:{color:"#9EA4B3",interval:0,rotate:90,formatter:function(t){var a=Math.abs(t);return a.toString().length>6?t.toExponential(0):t>=1e3||t<=-1e3?parseFloat((t/1e3).toFixed(2))+"k":t>0?t:parseFloat(t.toFixed(3))}}}],yAxis:r,animation:!0,series:a};return i},addAjax:function(t,a){return new Promise((function(e,r){n["a"].getScalarsSample(t).then((function(r){r&&(r.params=t,r.yIndex=a,e(r))})).catch((function(t){t&&r(t)}))}))},dealImageData:function(t){var a=this;if(!t.length)return this.curImageShowSample={},this.originImageDataArr=[],void(this.initOverKey.image=!0);if("{}"===JSON.stringify(this.curImageShowSample)||-1===t.indexOf(this.curImageShowSample.tagName)){var e=[];t.forEach((function(t){var r={runId:a.trainingJobId,tagName:t,sampleData:[],curImgUrl:""};e.push(r)})),this.originImageDataArr=e,this.getSampleRandomly()}else this.updateImageSample()},dealTensorData:function(t){var a=this.tensorTag;t.length?this.tensorTag=t[0]:this.tensorTag="",this.tensorTag!==a?this.tensorNewDataFlag=!0:this.tensorNewDataFlag=!1,this.tensorTag?this.getTensorGridData():this.initOverKey.tensor=!0},getTensorGridData:function(){var t=this,a={train_id:this.trainingJobId,tag:this.tensorTag,detail:"stats"};n["a"].getTensorsSample(a).then((function(a){if(t.initOverKey.tensor=!0,a&&a.data&&a.data.tensors.length){var e=JSON.parse(JSON.stringify(a.data.tensors[0]));if(!e.values.length)return t.tensorData=[],void t.$nextTick((function(){var a=t.$refs.tensorChart;a&&a.updateGridData()}));var r=e.values[e.values.length-1],i=t.initFilterStr(r.value.dims);t.freshtMartixData(r.step,i)}}),(function(){t.tensorData=[],t.initOverKey.tensor=!0,t.$nextTick((function(){var a=t.$refs.tensorChart;a&&a.updateGridData()}))}))},initFilterStr:function(t){if(!t)return[];for(var a=t.length-2,e=[],r=1e3,i=0;i<t.length;i++)e.push(i>=a?":":"0");if(e.length){var s=e.length-1,n=e[s];n&&t[s]>r&&(e[s]="0:".concat(r))}return"[".concat(e.toString(),"]")},freshtMartixData:function(t,a){var e=this,r={train_id:this.trainingJobId,tag:this.tensorTag,detail:"data",step:t,dims:encodeURIComponent(a)};n["a"].getTensorsSample(r).then((function(t){if(t&&t.data&&t.data.tensors.length){var a=t.data.tensors[0],r=a.values[0],i={};r?(e.tensorData=r.value.data instanceof Array?r.value.data:[r.value.data],i=r.value.statistics):e.tensorData=[[]],e.$nextTick((function(){var t=e.$refs.tensorChart;t&&t.updateGridData(e.tensorNewDataFlag,r.value.dims,i)}))}}),(function(t){e.tensorData=[];var a=!1,r="";t.response&&t.response.data&&t.response.data.error_code&&("50545013"===t.response.data.error_code.toString()||"50545014"===t.response.data.error_code.toString()||"50545016"===t.response.data.error_code.toString())&&(a=!0,r="50545013"===t.response.data.error_code.toString()?e.$t("tensors.tensorDashboardLimitErrorMsg"):e.$t("error")[t.response.data.error_code]),e.$nextTick((function(){var t=e.$refs.tensorChart;t&&(a?t.showRequestErrorMessage(r):t.updateGridData())}))}))},getHistogramTag:function(t){var a=this;if(t){var e="";if(e=this.histogramTag&&-1!==t.indexOf(this.histogramTag)?this.histogramTag:t[0]||"",!e)return this.histogramTag=e,void(this.initOverKey.histogram=!0);var r={train_id:this.trainingJobId,tag:e};n["a"].getHistogramData(r).then((function(t){if(a.initOverKey.histogram=!0,t&&t.data&&t.data.histograms&&t.data.histograms.length){var r=JSON.parse(JSON.stringify(t.data));a.histogramTag=e,a.histogramData=a.formOriData(r),a.formatDataToChar(),a.updateHistogramSampleData()}}),(function(t){a.initOverKey.histogram=!0,a.histogramTag=""}))}else this.initOverKey.histogram=!0},formOriData:function(t){var a=[];return t.histograms.forEach((function(t,e){var r=t.step.toString(),i={wall_time:t.wall_time,step:r,items:[]},s=[];if(t.buckets.forEach((function(a){var e=a[0]+a[1]/2,i=s.filter((function(t){return t[0]===e}));i.length||s.push([t.wall_time,r,e,Math.floor(a[2])])})),s.sort((function(t,a){return t[0]-a[0]})),s.length){var n=s[0][2],o=s[s.length-1][2],c=[[t.wall_time,r,n,0]].concat(s,[[t.wall_time,r,o,0]]);i.items=c,a.push(i)}})),a},formatDataToChar:function(){var t=this.histogramData,a=[],e=-1/0,r=1/0,i=-1/0,s=1/0,n=[];t&&t.length&&t.forEach((function(t){var o=[];n.push(t.step),t.items.forEach((function(a){o.push(a[2],t.step,a[3]),e=Math.max(e,a[2]),r=Math.min(r,a[2]),s=Math.min(s,a[3]),i=Math.max(i,a[3])})),a.push(o)})),this.histogramOriData={seriesData:a,maxX:e,minX:r,maxZ:i,minZ:s,gridData:n}},formatCharOption:function(){var t=this,a="#346E69",e="#EBFFFD",r=this.histogramOriData,i=this.getGrientColor(a,e,r.seriesData.length),s=[];r.seriesData.forEach((function(t,a){var e={name:t[1],value:t,itemStyle:{color:i[a]}};s.push(e)}));var n={grid:{left:24,top:120,right:40,bottom:43},xAxis:{max:r.maxX,min:r.minX,axisLine:{onZero:!1},axisLabel:{fontSize:"11",formatter:function(t){return t.toString().length>=6?t.toExponential(3):Math.round(1e3*t)/1e3}},splitLine:{show:!1}},yAxis:{type:"category",position:"right",axisLine:{onZero:!1,show:!1},splitLine:{show:!0},inverse:!0,axisTick:{show:!1},boundaryGap:!1,axisLabel:{fontSize:"11"}},series:[{type:"custom",dimensions:["x","y"],renderItem:function(a,e){var r=t.makePolyPoints(a.dataIndex,e.coord,a.coordSys.y-10);return{type:"polyline",z2:a.dataIndex,silent:!0,shape:{points:r},style:e.style({stroke:"#bbb",lineWidth:1})}},data:s}]};return n},formatColor:function(t){if(t){var a=/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,e=t.toLowerCase().slice(1);if(a.test(e)){var r="";if(3===e.length){for(var i=0;i<3;i++)r+=r.slice(i,i+1).concat(r.slice(i,i+1));e=r}for(var s=[],n=0;n<6;n+=2)s.push(parseInt("0x".concat(e.slice(n,n+2))));return s}return e}},formatColorToHex:function(t){var a=/^(rgb|RGB)/g;if(a.test(t)){for(var e=t.replace(/(?:(|)|rgb|RGB)*/g,"").split(","),r="",i=0;i<e.length;i++){var s=Number(e[i]).toString(16);s=s<10?"0".concat(s):s,"0"===s&&(s+=s),r+=s}return 6!==r.length&&(r=t),r}},getGrientColor:function(t,a,e){for(var r=this.formatColor(t),i=this.formatColor(a),s=(i[0]-r[0])/e,n=(i[1]-r[1])/e,o=(i[2]-r[2])/e,c=[],l=0;l<e;l++){var h=parseInt(s*l+r[0]),u=parseInt(n*l+r[1]),g=parseInt(o*l+r[2]),d=this.formatColorToHex("rgb(".concat(h,",").concat(u,",").concat(g,")"));c.push(d)}return c},updateHistogramSampleData:function(){var t=this;this.histogramOption=this.formatCharOption(),setTimeout((function(){t.histogramObj||(t.histogramObj=u.a.init(document.getElementById("distribution-chart"),null)),t.histogramObj.setOption(t.histogramOption,!0)}),100)},getValue:function(t,a,e){return t[a][e]},makePolyPoints:function(t,a,e){for(var r=[],i=this.histogramOriData.seriesData,s=this.histogramOriData.maxZ,n=this.histogramOriData.minZ,o=0;o<i[t].length;){var c=this.getValue(i,t,o++),l=this.getValue(i,t,o++),h=this.getValue(i,t,o++),u=a([c,l]);u[1]-=(h-n)/(s-n)*e,r.push(u)}return r},errorScalar:function(t){t.response&&t.response.data?this.scalarClearAllData():"ECONNABORTED"===t.code&&/^timeout/.test(t.message)||this.scalarClearAllData()},scalarClearAllData:function(){this.colorNum=0,this.charObj=null,this.curPageArr=[],this.charOption={},this.charData=[]},getSampleRandomly:function(){if(this.originImageDataArr.length)if(this.originImageDataArr.length>1){var t=Math.floor(Math.random()*this.originImageDataArr.length),a=this.originImageDataArr[t];if(!(a.tagName!==this.curImageShowSample.tagName||this.imageRandomLoopCount>=15))return this.imageRandomLoopCount++,void this.getSampleRandomly();this.curImageShowSample=a,this.imageRandomLoopCount=0}else this.imageRandomLoopCount=0,this.curImageShowSample=this.originImageDataArr[0];else this.imageRandomLoopCount=0,this.curImageShowSample={};this.updateImageSample()},updateImageSample:function(){var t=this;if("{}"!==JSON.stringify(this.curImageShowSample)){var a=this.curImageShowSample,e={train_id:a.runId,tag:a.tagName};n["a"].getImageMetadatas(e).then((function(e){if(t.initOverKey.image=!0,e&&e.data&&e.data.metadatas&&a.runId===t.curImageShowSample.runId&&a.tagName===t.curImageShowSample.tagName){var r=e.data.metadatas;if(a.sampleData=r,a.sampleData.length){var i=a.sampleData.length-1,s=a.sampleData[i].wall_time;a.curImgUrl="".concat(o["a"]).concat(t.imageBasePath)+"train_id=".concat(a.runId,"&tag=").concat(encodeURIComponent(a.tagName))+"&step=-1&wt=".concat(s)}else t.curImageShowSample={}}}),(function(a){t.initOverKey.image=!0,t.curImageShowSample={}})).catch((function(a){t.$message.error(t.$t("public.dataError"))}))}else this.initOverKey.image=!0},linkToImage:function(t){if(this.originImageDataArr.length){if(1===this.originImageDataArr.length){var a=t.path||t.composedPath&&t.composedPath(),e=a.some((function(t){if(t.className)return-1!==t.className.indexOf("el-button")}));if(e)return}this.$router.push({path:"/train-manage/image",query:{train_id:this.trainingJobId,summaryPath:this.summaryPath}})}},changeImage:function(t){t.stopPropagation(),t.preventDefault(),this.getSampleRandomly()},initGraph:function(t){var a=this;this.graphviz=d.select("#graph").graphviz({useWorker:!1,totalMemory:this.totalMemory}).dot(t).attributer(this.attributer).render((function(){a.initOverKey.graph=!0,d.select("#graph svg")&&d.select("#graph svg").on(".zoom",null),d.selectAll("#graph title").remove(),setTimeout((function(){a.graphviz._data=null,a.graphviz._dictionary=null,a.graphviz=null}),200)}))},queryGraphData:function(){var t=this,a={train_id:this.trainingJobId,type:"name_scope",tag:this.fileTag};n["a"].queryGraphData(a).then((function(a){if(a&&a.data&&a.data.nodes&&a.data.nodes.length){var e=a.data.nodes;t.packageDataToObject(e);var r=t.packageGraphData();t.initGraph(r)}else t.initOverKey.graph=!0}),(function(a){t.initOverKey.graph=!0})).catch((function(a){t.initOverKey.graph=!0}))},packageDataToObject:function(t){var a=this;this.allGraphData={},this.firstFloorNodes=[],t.forEach((function(t){a.allGraphData[t.name]=t,a.firstFloorNodes.push(t.name)}))},getChildNodesByName:function(){var t=this,a=this.firstFloorNodes,e=a.map((function(a){return t.allGraphData[a]}));return e},packageGraphData:function(){var t='node[style="filled";fontsize="10px"];edge[fontsize="6px";];';return"digraph {".concat(t).concat(this.packageNodes()).concat(this.packageEdges(),"}")},packageNodes:function(){var t=this,a=this.getChildNodesByName(),e="";return a.forEach((function(a){var r=a.name.split("/").pop();if("polymeric_scope"===a.type)e+="<".concat(a.name,'>[id="').concat(a.name,'";shape="octagon";')+'label="'.concat(r,'";class="polymeric"];');else if("name_scope"===a.type){var i=c["a"].graphColorArrPhg[t.curColorIndex];t.curColorIndex=t.curColorIndex%4,t.curColorIndex++,e+="<".concat(a.name,'>[id="').concat(a.name,'";fillcolor="').concat(i,'";')+'shape="polygon";label="'.concat(r,'";class="cluster"];')}else"Const"===a.type?e+="<".concat(a.name,'>[id="').concat(a.name,'";label="').concat(r,'\n\n\n";')+'shape="circle";width="0.14";height="0.14";fixedsize=true;];':e+="<".concat(a.name,'>[id="').concat(a.name,'";shape="ellipse";')+'label="'.concat(r,'";];');for(var s=Object.keys(a.polymeric_input||{}),n=a.name,o="",l=!1,h=0;h<Math.min(5,s.length);h++){o=s[h],l=!(!t.allGraphData[s[h]]||"Const"!==t.allGraphData[s[h]].type);var u=l?'shape="circle";width="0.14";height="0.14";fixedsize=true;'+'label="'.concat(o.split("/").pop(),'\n\n\n";'):'shape="Mrecord";label="'.concat(o.split("/").pop(),'";');e+="<".concat(o,"^").concat(n,'>[id="').concat(o,"^").concat(n,'";')+"".concat(u,'class="plain"];')}s.length>5&&(e+="<analogNodesInput^".concat(n,'>[id="analogNodesInput^')+"".concat(n,'";label="').concat(s.length-5,' more...";shape="Mrecord";')+'class="plain";];'),s=Object.keys(a.polymeric_output||{}),o=a.name;for(var g=0;g<Math.min(5,s.length);g++){n=s[g];var d=l?'shape="circle";width="0.14";height="0.14";fixedsize=true;'+'label="'.concat(n.split("/").pop(),'\n\n\n";'):'shape="Mrecord";label="'.concat(n.split("/").pop(),'";');e+="<".concat(n,"^").concat(o,'>[id="').concat(n,"^").concat(o,'";')+"".concat(d,'class="plain";];')}s.length>5&&(e+="<analogNodesOutput^".concat(o,'>[id="analogNodesOutput^')+"".concat(o,'";shape="Mrecord";label="').concat(s.length-5,' more...";')+'class="plain";];')})),e},packageEdges:function(){var t=this,a=this.getChildNodesByName(),e="",r=[];return a.forEach((function(t){var a=t.input||{},e=Object.keys(a);e.forEach((function(e){if(a[e]){var i="polymeric_scope"===a[e].scope?e.substring(0,e.lastIndexOf("/")):e,s=i.split("/")[0],n="polymeric_scope"===t.type||t.polymeric_scope_name?"".concat(t.name.substring(0,t.name.lastIndexOf("/"))):t.name;if(s&&n&&!n.includes(s)&&!s.includes(n)){var o={source:s,target:n,shape:a[e].shape,edge_type:a[e].edge_type,count:1};r.push(o)}}}));for(var i=Object.keys(t.polymeric_input||{}),s=0;s<Math.min(5,i.length);s++){var n=t.name,o=i[s],c={source:"".concat(o,"^").concat(n),target:n,shape:[],edge_type:"polymeric_scope"===t.type||t.polymeric_scope_name?"":"polymeric",count:1};r.push(c)}if(i.length>5){var l={source:"analogNodesInput^".concat(t.name),target:t.name,shape:[],edge_type:"polymeric_scope"===t.type||t.polymeric_scope_name?"":"polymeric",count:1};r.push(l)}i=Object.keys(t.polymeric_output||{});for(var h=0;h<Math.min(5,i.length);h++){var u=t.name,g=i[h],d={source:u,target:"".concat(g,"^").concat(u),shape:[],edge_type:"polymeric_scope"===t.type||t.polymeric_scope_name?"":"polymeric",count:1};r.push(d)}if(i.length>5){var m={source:t.name,target:"analogNodesOutput^".concat(t.name),shape:[],edge_type:"polymeric_scope"===t.type||t.polymeric_scope_name?"":"polymeric",count:1};r.push(m)}})),this.uniqueEdges(r),r.forEach((function(a){e+="<".concat(a.source,">-><").concat(a.target,'>[id="').concat(a.source,"->")+"".concat(a.target,'";label="').concat(t.getEdgeLabel(a),'";')+"".concat("control"===a.edge_type?"style=dashed":"","];")})),e},uniqueEdges:function(t){for(var a=0;a<t.length-1;a++)for(var e=a+1;e<t.length;e++){var r=t[a].source===t[e].source&&t[a].target===t[e].target&&t[a].edge_type===t[e].edge_type;r&&(t[a].count+=t[e].count,t.splice(e--,1))}},getEdgeLabel:function(t){if("control"===t.edge_type)return"";var a="";if(t.count&&1!==t.count)a="".concat(t.count,"tensors");else if(t.shape&&t.shape.length){var e=t.shape.some((function(t){return"number"!==typeof t}));a=e?"tuple(".concat(t.shape.length," items)"):t.shape.join("x")}return a},attributer:function(t,a,e){var r="ellipse"===t.tag||"circle"===t.tag||"polygon"===t.tag&&"transparent"!==t.attributes.stroke;if("svg"===t.tag){var i="100%",s="100%";t.attributes.width=i,t.attributes.height=s}else r&&(t.attributes.stroke="rgb(120, 120, 120)")},queryDatasetGraph:function(){var t=this,a={train_id:this.trainingJobId};n["a"].queryDatasetGraph(a).then((function(a){if(a&&a.data&&a.data.dataset_graph&&Object.keys(a.data.dataset_graph).length){var e=JSON.parse(JSON.stringify(a.data.dataset_graph));if(t.dealDatasetGraph(e),Object.keys(t.allDatasetGraphData).length){var r=t.packageDatasetGraph();t.initDatasetGraph(r)}}else t.initOverKey.dataMap=!0}),(function(a){t.initOverKey.dataMap=!0})).catch((function(a){t.initOverKey.dataMap=!0}))},dealDatasetGraph:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t){var i="".concat(e?e+"/":"").concat(t.op_type||"","_").concat(r),s={key:i,id:""};Object.keys(t).forEach((function(e){"children"!==e?s[e]=JSON.parse(JSON.stringify(t[e])):(s.children=[],t.children&&t.children.length&&t.children.forEach((function(t,e){s.children.push("".concat(s.key,"/").concat(t.op_type,"_").concat(e)),a.dealDatasetGraph(t,s.key,e)})))})),this.allDatasetGraphData[i]=s}},packageDatasetGraph:function(){var t=this,a=["BatchDataset","ShuffleDataset","RepeatDataset","MapDataset"],e="",r="";Object.keys(this.allDatasetGraphData).forEach((function(r){var i=t.allDatasetGraphData[r];"MapDataset"===i.op_type?e+=t.packageSubGraph(r):(i.id=r,e+="<".concat(i.key,'>[id="').concat(i.key,'";label="').concat(i.op_type,'";')+"class=".concat(a.includes(i.op_type)?i.op_type:"CreatDataset",';shape=rect;fillcolor="#9cc3e5";];'))})),Object.keys(this.allDatasetGraphData).forEach((function(a){var e=t.allDatasetGraphData[a];e.children.forEach((function(a){var i=t.allDatasetGraphData[a];r+="<".concat(i.id,">-><").concat(e.id,">[").concat("MapDataset"===i.op_type?"ltail=<cluster_".concat(i.key,">;"):"").concat("MapDataset"===e.op_type?"lhead=<cluster_".concat(e.key,">;"):"","];")}))}));var i='node[style="filled";fontsize="10px"];edge[fontsize="6px";];';return"digraph {compound=true;rankdir=LR;".concat(i).concat(e).concat(r,"}")},packageSubGraph:function(t){var a=this.allDatasetGraphData[t],e="";if(a.operations&&a.operations.length){var r="";a.operations.forEach((function(t,e){var i="".concat(a.key,"/").concat(t.tensor_op_name,"_").concat(e);t.key=i,r+="<".concat(i,'>[id="').concat(i,'";class=Operator;label="').concat(t.tensor_op_name,'";fillcolor="#c5e0b3"];'),a.id||(a.id=i)})),e+="subgraph <cluster_".concat(t,'>{style="filled";id="').concat(t,'";')+'label="'.concat(a.op_type,'";fillcolor="#9cc3e5";').concat(r,"};")}return e},initDatasetGraph:function(t){this.datasetGraphviz=d.select("#dataMapGraph").graphviz({useWorker:!1,totalMemory:this.totalMemory}).dot(t).attributer((function(t,a,e){if("svg"===t.tag){var r="100%",i="100%";t.attributes.width=r,t.attributes.height=i}})).render(this.afterinitDatasetGraph)},afterinitDatasetGraph:function(){var t=this;this.showDatasetGraph=!0,this.initOverKey.dataMap=!0,d.select("#dataMapGraph svg")&&d.select("#dataMapGraph svg").on(".zoom",null),setTimeout((function(){t.datasetGraphviz&&(t.datasetGraphviz._data=null,t.datasetGraphviz._dictionary=null,t.datasetGraphviz=null)}),100),d.select("#dataMapGraph").selectAll("title").remove()},queryTrainJobCacheState:function(){var t=this,a={train_id:this.trainingJobId};n["a"].querySummaryList(a,!0).then((function(a){if(a&&a.data&&a.data.train_jobs&&a.data.train_jobs.length){var e=a.data.train_jobs[0],r=e.graph_files||e.summary_files;r&&e.cache_status===t.cacheKey.notInCache?t.trainJobCached=1:r&&e.cache_status===t.cacheKey.caching?t.trainJobCached=2:t.trainJobCached=0}else t.trainJobCached=0}))}}},p=m,f=(e("4255"),e("2877")),v=Object(f["a"])(p,r,i,!1,null,null,null);a["default"]=v.exports},cd2f:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cl-slickgrid-container"},[e("div",{staticClass:"data-show-container"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.incorrectData,expression:"incorrectData"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.$t("components.gridIncorrectDataError"))+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.incorrectData&&t.requestError,expression:"!incorrectData && requestError"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.errorMsg)+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullData.length&&t.updated&&!t.incorrectData&&!t.requestError,expression:"!fullData.length && updated && !incorrectData && !requestError"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.$t("components.gridTableNoData"))+" ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!!t.fullData.length&&!t.incorrectData,expression:"!!fullData.length && !incorrectData"}],staticClass:"grid-item",attrs:{id:t.itemId}})]),t.showOperate&&(t.fullData.length||t.requestError)?e("div",{staticClass:"operate-container"},[e("div",{staticClass:"filter-container",on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.filterChange(a)}}},[e("div",{staticClass:"filter-input-title"},[t._v(t._s(t.$t("components.dimsFilterInputTitle"))+" "),e("span",{staticClass:"el-icon-info",attrs:{title:t.$t("components.dimsFilterInputTip")}})]),t._l(t.filterArr,(function(a,r){return e("div",{key:r},[e("el-input",{staticClass:"filter-input",class:[a.showError?"error-border":"",t.fullScreen?"long-input":"short-input"],model:{value:a.model,callback:function(e){t.$set(a,"model",e)},expression:"item.model"}}),r===t.filterArr.length-1?e("span",{staticClass:"input-behind"},[t._v(t._s(t.$t("symbols.slashes")))]):e("span",{staticClass:"input-behind"},[t._v(t._s(t.$t("symbols.point")))])],1)})),t.filterArr.length?e("el-button",{staticClass:"filter-check",attrs:{size:"mini"},on:{click:t.filterChange}},[e("i",{staticClass:"el-icon-check"})]):t._e(),t.filterCorrect?t._e():e("span",{staticClass:"filter-incorrect-text"},[t._v(t._s(t.$t("components.inCorrectInput")))])],2),e("div",{staticClass:"accuracy-container"},[t._v(" "+t._s(t.$t("components.category"))),e("el-select",{staticClass:"select-category",on:{change:t.accuracyChange},model:{value:t.category,callback:function(a){t.category=a},expression:"category"}},t._l(t.categoryArr,(function(t){return e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1),t._v(" "+t._s(t.$t("components.gridAccuracy"))+" "),e("span",{staticClass:"el-icon-info",attrs:{title:t.$t("components.accuracyTips")}}),e("el-select",{staticClass:"select-item",on:{change:t.accuracyChange},model:{value:t.accuracy,callback:function(a){t.accuracy=a},expression:"accuracy"}},t._l(t.accuracyArr,(function(t){return e("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticClass:"full-screen-icon",class:t.fullScreen?"active-color":"",attrs:{title:t.$t("scalar.fullScreen")},on:{click:t.toggleFullScreen}},[e("i",{staticClass:"el-icon-full-screen"})])],1)]):t._e()])},i=[],s=(e("99af"),e("4160"),e("c975"),e("fb6a"),e("a9e3"),e("b680"),e("ac1f"),e("1276"),e("498a"),e("159b"),e("326d"),e("f411"),e("dc1b"),e("f06f"),e("ed3a"),e("7d72"),e("70a2"),e("3a3f"),{props:{fullData:{type:Array,default:function(){return[]}},showOperate:{type:Boolean,default:!0},fullScreen:{type:Boolean,default:!1},columnLimitNum:{type:Number,default:-1}},data:function(){return{itemId:"",gridObj:null,columnsData:[],columnsLength:0,filterArr:[],formateData:[],formateArr:[],statistics:{},accuracy:5,incorrectData:!1,updated:!1,scrollTop:!1,filterCorrect:!0,requestError:!1,errorMsg:"",viewResizeFlag:!1,accuracyArr:[{label:0,value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5}],optionObj:{enableColumnReorder:!1,enableCellNavigation:!0,frozenColumn:0,frozenRow:0},tableStartIndex:{rowStartIndex:0,colStartIndex:0},categoryArr:[{label:this.$t("components.value"),value:"value"},{label:this.$t("components.scientificCounting"),value:"science"}],category:"value"}},computed:{},watch:{},mounted:function(){this.init()},methods:{init:function(){this.itemId="".concat((new Date).getTime())+"".concat(this.$store.state.componentsCount),this.$store.commit("componentsNum")},initializeFilterArr:function(t,a){if(this.filterCorrect=!0,a){for(var e=a.slice(1,a.length-1).split(","),r=[],i=[],s=0;s<e.length;s++)if(r.push({model:e[s],max:t[s]-1,showError:!1}),-1!==e[s].indexOf(":")){var n=e[s].split(":");if(n[0]){var o=Number(n[0]);o=o<0?t[s]+o:o,i.push(o)}else i.push(0)}this.filterArr=r,i.length?i.length>=2?this.tableStartIndex={rowStartIndex:i[0],colStartIndex:i[1]}:this.tableStartIndex={rowStartIndex:0,colStartIndex:i[0]}:this.tableStartIndex={rowStartIndex:0,colStartIndex:0}}else this.filterArr=[]},formateColumnsData:function(){var t=this;this.columnsData=[{id:-1,name:" ",field:-1,width:120,headerCssClass:"headerStyle"}];var a=this.formateData[0];a?a.forEach((function(a,e){var r=e+t.tableStartIndex.colStartIndex;t.columnsData.push({id:r,name:r,field:r,width:120,headerCssClass:"headerStyle",formatter:t.formateValueColor})})):this.columnsData=[]},formateValueColor:function(t,a,e,r,i){return a&&e&&!isNaN(e)&&e!==1/0&&e!==-1/0?e<0?'<span class="table-item-span" style="background:rgba(227, 125, 41, '.concat(e/this.statistics.overall_min,')">').concat(e,"</span>"):'<span class="table-item-span" style="background:rgba(0, 165, 167, '.concat(e/this.statistics.overall_max,')">').concat(e,"</span>"):e},formateGridArray:function(){var t=this;this.fullData instanceof Array?this.fullData.length?this.fullData[0]instanceof Array?this.formateData=this.fullData:this.formateData=[this.fullData]:(this.formateData=[[]],this.columnsData=[]):this.formateData=[[this.fullData]];var a=[];this.formateData.forEach((function(e,r){var i={"-1":r+t.tableStartIndex.rowStartIndex};e.forEach((function(a,e){var r=e+t.tableStartIndex.colStartIndex;isNaN(a)?i[r]=a:t.category===t.categoryArr[0].value?i[r]=a.toFixed(t.accuracy):i[r]=a.toExponential(t.accuracy)})),a.push(i)})),this.formateArr=a},updateGrid:function(){var t=this;this.$nextTick((function(){t.gridObj||(t.gridObj=new Slick.Grid("#".concat(t.itemId),t.formateArr,t.columnsData,t.optionObj),t.columnsLength=t.columnsData.length),t.gridObj.setData(t.formateArr,t.scrollTop),t.scrollTop=!1;var a=t.columnsData.length;(t.columnsLength!==a||t.viewResizeFlag)&&(t.gridObj.setColumns(t.columnsData),t.columnsLength=a,t.viewResizeFlag=!1),t.gridObj.render()}))},accuracyChange:function(){this.formateGridArray(),this.requestError||this.incorrectData||this.updateGrid()},filterChange:function(){var t=this,a=!0,e=!1,r=2,i=[],s=[];if(this.filterArr.forEach((function(n,o){var c=n.model.trim();if(isNaN(c))if(-1!==c.indexOf(":")){i.push(o);var l=t.checkCombinatorialInput(n);l?(n.showError=!1,r?r--:e=!0):(n.showError=!0,a=!1)}else n.showError=!0,a=!1;else c<-(n.max+1)||c>n.max||""===c||c%1?(n.showError=!0,a=!1):(n.showError=!1,c=Number(c));s.push(c)})),i.length){var n=i.pop(),o=this.filterArr[n];if(this.columnLimitNum>0&&o&&!o.showError&&o.max>=this.columnLimitNum){var c=this.checkFilterLimitOver(o);c&&(o.showError=!0,a=!1)}}this.filterCorrect=a,e&&a?this.incorrectData=!0:(this.incorrectData=!1,a&&(this.viewResizeFlag=!0,this.$emit("martixFilterChange",s)))},checkFilterLimitOver:function(t){var a=!1,e=t.model.trim(),r=e.split(":"),i=r[0]?r[0]:0,s=r[1]?r[1]:t.max+1;return i=i<0?t.max+Number(i)+1:Number(i),s=s<0?t.max+Number(s)+1:Number(s),s-i>this.columnLimitNum&&(a=!0),a},checkCombinatorialInput:function(t){var a=t.model.trim(),e=a.split(":"),r=e[0],i=e[1],s=2;if(r&&(isNaN(r)||r<-(t+1)||r>t.max))return!1;if(i&&(isNaN(i)||i<=-(t.max+1)||i>t.max+1||!Number(i)))return!1;if(e.length>s)return!1;if(r||i){if(r&&i){var n=r<0?t.max+Number(r)+1:Number(r),o=i<0?t.max+Number(i)+1:Number(i);return!(o<=n)}return!0}return!0},updateGridData:function(t,a,e,r){var i=this;this.updated=!0,this.requestError=!1,this.$nextTick((function(){i.fullData&&i.fullData.length&&(t&&(i.initializeFilterArr(a,r),i.scrollTop=!0),(t||void 0===i.statistics.overall_max)&&(i.statistics=e),i.formateGridArray(),i.formateColumnsData(),i.incorrectData||i.updateGrid())}))},resizeView:function(){var t=this;this.gridObj&&(this.incorrectData||this.requestError?this.viewResizeFlag=!0:this.$nextTick((function(){t.gridObj.resizeCanvas(),t.gridObj.render()})))},toggleFullScreen:function(){this.$emit("toggleFullScreen")},showRequestErrorMessage:function(t,a,e){this.errorMsg=t,!this.filterArr.length&&a&&e&&this.initializeFilterArr(a,e),this.requestError=!0}},destroyed:function(){}}),n=s,o=(e("f11c"),e("2877")),c=Object(o["a"])(n,r,i,!1,null,null,null);a["a"]=c.exports},d28b:function(t,a,e){var r=e("746f");r("iterator")},daff:function(t,a,e){t.exports=e.p+"static/img/image-guid.33f41c3e.svg"},e01a:function(t,a,e){"use strict";var r=e("23e7"),i=e("83ab"),s=e("da84"),n=e("5135"),o=e("861d"),c=e("9bf2").f,l=e("e893"),h=s.Symbol;if(i&&"function"==typeof h&&(!("description"in h.prototype)||void 0!==h().description)){var u={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),a=this instanceof g?new h(t):void 0===t?h():h(t);return""===t&&(u[a]=!0),a};l(g,h);var d=g.prototype=h.prototype;d.constructor=g;var m=d.toString,p="Symbol(test)"==String(h("test")),f=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,a=m.call(t);if(n(u,t))return"";var e=p?a.slice(7,-1):a.replace(f,"$1");return""===e?void 0:e}}),r({global:!0,forced:!0},{Symbol:g})}},e285:function(t,a,e){var r=e("da84"),i=r.isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},e58c:function(t,a,e){"use strict";var r=e("fc6a"),i=e("a691"),s=e("50c4"),n=e("a640"),o=e("ae40"),c=Math.min,l=[].lastIndexOf,h=!!l&&1/[1].lastIndexOf(1,-0)<0,u=n("lastIndexOf"),g=o("indexOf",{ACCESSORS:!0,1:0}),d=h||!u||!g;t.exports=d?function(t){if(h)return l.apply(this,arguments)||0;var a=r(this),e=s(a.length),n=e-1;for(arguments.length>1&&(n=c(n,i(arguments[1]))),n<0&&(n=e+n);n>=0;n--)if(n in a&&a[n]===t)return n||0;return-1}:l},f00c:function(t,a,e){var r=e("23e7"),i=e("e285");r({target:"Number",stat:!0},{isFinite:i})},f11c:function(t,a,e){"use strict";e("6265")}}]);