(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03b86b6f"],{"237e":function(e,t,a){},"38cf":function(e,t,a){var i=a("23e7"),s=a("1148");i({target:"String",proto:!0},{repeat:s})},"53ca":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}},"5bb7":function(e,t,a){"use strict";a("237e")},9927:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cl-data-traceback"},[i("div",{staticClass:"traceback-tab"},[i("div",{staticClass:"traceback-tab-item",on:{click:function(t){return e.jumpToModelTraceback()}}},[e._v(e._s(e.$t("summaryManage.modelTraceback")))]),i("div",{staticClass:"traceback-tab-item item-active"},[e._v(e._s(e.$t("summaryManage.dataTraceback")))])]),i("div",{attrs:{id:"data-traceback-con"}},[e.loading?i("div",{staticClass:"no-data-page"},[i("div",{staticClass:"no-data-img"},[i("img",{attrs:{src:a("9485"),alt:""}}),i("p",{staticClass:"no-data-text"},[e._v(e._s(e.$t("public.dataLoading")))])])]):e._e(),e.loading?e._e():i("div",{staticClass:"cl-data-right"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEchartPic&&!e.echartNoData,expression:"showEchartPic && !echartNoData"}],staticClass:"data-checkbox-area"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSeries&&e.totalSeries.length&&(!e.summaryDirList||e.summaryDirList&&e.summaryDirList.length),expression:"totalSeries && totalSeries.length &&\n            (!summaryDirList || (summaryDirList && summaryDirList.length))"}],staticClass:"select-container"},[i("div",{staticClass:"display-column"},[e._v(" "+e._s(e.$t("modelTraceback.displayColumn"))+" ")]),i("div",{staticClass:"inline-block-set"},[i("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:e.$t("public.select")},on:{change:e.selectValueChange,focus:e.selectinputFocus},model:{value:e.selectArrayValue,callback:function(t){e.selectArrayValue=t},expression:"selectArrayValue"}},[i("div",{staticClass:"select-input-button"},[i("div",{staticClass:"select-inner-input"},[i("el-input",{ref:"keyInput",attrs:{placeholder:e.$t("public.search")},on:{input:e.myfilter},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),i("button",{staticClass:"select-all-button",class:[e.selectCheckAll?"checked-color":"button-text",e.basearr.length>e.checkOptions.length?"btn-disabled":""],attrs:{type:"text",disabled:e.basearr.length>e.checkOptions.length},on:{click:e.allSelect}},[e._v(" "+e._s(e.$t("public.selectAll"))+" ")]),i("button",{staticClass:"deselect-all-button",class:[e.selectCheckAll?"button-text":"checked-color",e.basearr.length>e.checkOptions.length?"btn-disabled":""],attrs:{type:"text",disabled:e.basearr.length>e.checkOptions.length},on:{click:e.deselectAll}},[e._v(" "+e._s(e.$t("public.deselectAll"))+" ")])]),e._l(e.checkOptions,(function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled,title:t.disabled?e.$t("modelTraceback.mustExist"):""}})})),i("div",{attrs:{slot:"empty"},slot:"empty"},[i("div",{staticClass:"select-input-button empty-container"},[i("div",{staticClass:"select-inner-input"},[i("el-input",{ref:"keyEmptyInput",attrs:{placeholder:e.$t("public.search")},on:{input:e.myfilter},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),i("button",{staticClass:"select-all-button",attrs:{type:"text",disabled:""}},[e._v(" "+e._s(e.$t("public.selectAll"))+" ")]),i("button",{staticClass:"deselect-all-button",attrs:{type:"text",disabled:""}},[e._v(" "+e._s(e.$t("public.deselectAll"))+" ")]),i("div",{staticClass:"search-no-data"},[e._v(e._s(e.$t("public.emptyData")))])])])],2)],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showEchartPic&&!e.echartNoData,expression:"showEchartPic && !echartNoData"}],attrs:{id:"data-echart"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.echartNoData&&e.showTable,expression:"!echartNoData && showTable"}],staticClass:"btns-container"},[i("el-button",{staticClass:"disabled-btn-color",class:[e.disabledFilterBtn?"":"abled-btn-color"],attrs:{type:"primary",size:"mini",disabled:e.disabledFilterBtn,plain:""},on:{click:e.showSelectedTableData}},[e._v(" "+e._s(e.$t("modelTraceback.showSelected"))+" ")]),i("el-button",{staticClass:"disabled-btn-color",class:[e.disabledHideBtn?"":"abled-btn-color"],attrs:{type:"primary",size:"mini",disabled:e.disabledHideBtn,plain:""},on:{click:e.hideSelectedRows}},[e._v(" "+e._s(e.$t("modelTraceback.hideSelected"))+" ")]),i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:e.showAllDataBtn}},[e._v(" "+e._s(e.$t("modelTraceback.showAllData"))+" ")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.echartNoData&&e.showTable,expression:"!echartNoData && showTable"}],staticClass:"table-container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.table.data.length,expression:"!table.data.length"}],staticClass:"disabled-checked"}),i("el-table",{ref:"table",attrs:{data:e.table.data,"tooltip-effect":"light",height:"calc(100% - 39px)","row-key":"summary_dir"},on:{"selection-change":e.handleSelectionChange,"sort-change":e.tableSortChange}},[i("el-table-column",{directives:[{name:"show",rawName:"v-show",value:!e.echartNoData&&e.showTable,expression:"!echartNoData && showTable"}],attrs:{type:"selection",width:"55","reserve-selection":!0}}),e._l(e.table.column,(function(t){return i("el-table-column",{key:t,attrs:{prop:t,label:e.table.columnOptions[t].label,sortable:!!e.sortArray.includes(e.table.columnOptions[t].label)&&"custom",fixed:e.table.columnOptions[t].label===e.text,"min-width":e.table.columnOptions[t].label===e.text?250:200,"show-overflow-tooltip":e.table.columnOptions[t].label!==e.text},scopedSlots:e._u([{key:"header",fn:function(t){return[i("div",{staticClass:"custom-label",attrs:{title:t.column.label}},[e._v(" "+e._s(t.column.label)+" ")])]}},{key:"default",fn:function(a){return[i("span",{directives:[{name:"show",rawName:"v-show",value:e.table.columnOptions[t].label===e.text,expression:"table.columnOptions[key].label === text"}],staticClass:"icon-container"},[i("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:a.row.children,expression:"scope.row.children"}],attrs:{effect:"light",content:e.$t("dataTraceback.dataTraceTips"),placement:"top"}},[i("i",{staticClass:"el-icon-warning"})])],1),e.table.columnOptions[t].label===e.text?i("span",{staticClass:"href-color",on:{click:function(i){return e.jumpToTrainDashboard(a.row[t])}}},[e._v(" "+e._s(a.row[t])+" ")]):i("span",{staticClass:"click-span",on:{click:function(i){return e.showDialogData(a.row[t],a)}}},[e._v(" "+e._s(e.formatNumber(t,a.row[t]))+" ")])]}}],null,!0)})})),i("el-table-column",{attrs:{fixed:"right",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{directives:[{name:"show",rawName:"v-show",value:t.row.editShow,expression:"scope.row.editShow"}],staticClass:"edit-text-container",attrs:{title:t.row.remark}},[e._v(e._s(t.row.remark))]),i("div",{staticClass:"inline-block-set"},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.row.editShow,expression:"scope.row.editShow"}],staticClass:"el-icon-edit",on:{click:function(a){return e.editRemarks(t.row)}}}),i("el-input",{directives:[{name:"show",rawName:"v-show",value:!t.row.editShow,expression:"!scope.row.editShow"}],staticClass:"remark-input-style",attrs:{type:"text",placeholder:e.$t("public.enter")},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.editShow,expression:"!scope.row.editShow"}],staticClass:"el-icon-check",on:{click:function(a){return e.saveRemarksValue(t.row)}}}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.row.editShow,expression:"!scope.row.editShow"}],staticClass:"el-icon-close",on:{click:function(a){return e.cancelRemarksValue(t.row)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.row.isError,expression:"scope.row.isError"}],staticClass:"validation-error"},[e._v(" "+e._s(e.$t("modelTraceback.remarkValidation"))+" ")])],1)]}}],null,!1,3284428487)},[i("template",{slot:"header"},[i("div",[i("div",{staticClass:"label-text"},[e._v(e._s(e.$t("public.remark")))]),i("div",{staticClass:"remark-tip"},[e._v(e._s(e.$t("modelTraceback.remarkTips")))])])])],2),i("el-table-column",{attrs:{label:"tag",fixed:"right",prop:"tag",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"tag-icon-container",on:{click:function(a){return e.showAllIcon(t.row,t,a)}}},[t.row.tag?i("img",{class:"img"+t.$index,attrs:{src:a("c4fa")("./icon"+t.row.tag+".svg")}}):i("img",{class:"img"+t.$index,attrs:{src:a("96c0")}})])]}}],null,!1,1749578481)})],2),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,"page-sizes":e.pagination.pageSizes,layout:e.pagination.layout,total:e.pagination.total},on:{"current-change":e.handleCurrentChange,"size-change":e.currentPagesizeChange}})],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.nodata,expression:"nodata"}],staticClass:"no-data-page"},[i("div",{staticClass:"no-data-img",class:{"set-height-class":e.summaryDirList&&!e.summaryDirList.length}},[i("img",{attrs:{src:a("9485"),alt:""}}),i("p",{directives:[{name:"show",rawName:"v-show",value:(!e.summaryDirList||e.summaryDirList&&e.summaryDirList.length)&&(!e.hideTableIdList||e.hideTableIdList&&!e.hideTableIdList.length),expression:"(!summaryDirList || (summaryDirList && summaryDirList.length)) &&\n             (!hideTableIdList||(hideTableIdList&&!hideTableIdList.length))"}],staticClass:"no-data-text"},[e._v(" "+e._s(e.$t("public.noData"))+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.echartNoData&&e.lineagedata.serData&&!!e.lineagedata.serData.length&&e.summaryDirList&&e.summaryDirList.length,expression:"echartNoData && (lineagedata.serData && !!lineagedata.serData.length) &&\n          summaryDirList && summaryDirList.length"}]},[i("p",{staticClass:"no-data-text"},[e._v(e._s(e.$t("dataTraceback.noDataFound")))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hideTableIdList&&e.hideTableIdList.length&&(!e.summaryDirList||e.summaryDirList&&e.summaryDirList.length),expression:"(hideTableIdList && hideTableIdList.length) &&\n          (!summaryDirList || (summaryDirList && summaryDirList.length))"}]},[i("p",{staticClass:"no-data-text"},[e._v(e._s(e.$t("modelTraceback.allHide")))]),i("p",{staticClass:"no-data-text"},[i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:e.showAllDataBtn}},[e._v(" "+e._s(e.$t("modelTraceback.showAllData"))+" ")])],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.summaryDirList&&!e.summaryDirList.length,expression:"summaryDirList && !summaryDirList.length"}]},[i("p",{staticClass:"no-data-text"},[e._v(e._s(e.$t("dataTraceback.noDataFound")))]),i("p",{staticClass:"no-data-text"},[i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:e.showAllDataBtn}},[e._v(" "+e._s(e.$t("modelTraceback.showAllData"))+" ")])],1)])])])]),e.detailsDialogVisible?i("div",[i("el-dialog",{staticClass:"details-data-list",attrs:{title:e.rowName,visible:e.detailsDialogVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.detailsDialogVisible=t}}},[i("div",{staticClass:"details-data-title"},[e._v(e._s(e.detailsDataTitle))]),i("el-table",{attrs:{data:e.detailsDataList,"row-key":"id",lazy:"","tooltip-effect":"light",load:e.loadDataListChildren,"tree-props":{children:"children",hasChildren:"hasChildren"}}},[i("el-table-column",{attrs:{width:"50"}}),i("el-table-column",{attrs:{prop:"key",width:"180",label:"Key"}}),i("el-table-column",{attrs:{prop:"value","show-overflow-tooltip":"",label:"Value"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value)+" ")]}}],null,!1,4272015574)})],1)],1)],1):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.tagDialogShow,expression:"tagDialogShow"}],staticClass:"icon-dialog",attrs:{id:"tag-dialog"}},[i("div",[i("div",{staticClass:"icon-image-container"},e._l(e.imageList,(function(t){return i("div",{key:t.number,staticClass:"icon-image",class:[e.tagScope.row&&t.number===e.tagScope.row.tag?"icon-border":""],on:{click:function(a){return e.iconValueChange(e.tagScope.row,t.number,a)}}},[i("img",{attrs:{src:t.iconAdd}})])})),0),i("div",{staticClass:"btn-container-margin"},[i("div",{staticClass:"tag-button-container"},[i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.iconChangeSave(e.tagScope)}}},[e._v(" "+e._s(e.$t("public.sure"))+" ")])],1),i("div",{staticClass:"tag-button-container"},[i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.clearIcon(e.tagScope,t)}}},[e._v(" "+e._s(e.$t("public.clear"))+" ")])],1),i("div",{staticClass:"tag-button-container"},[i("el-button",{staticClass:"custom-btn",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){return e.cancelChangeIcon(e.tagScope.row)}}},[e._v(" "+e._s(e.$t("public.cancel"))+" ")])],1)])])])])])},s=[],r=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("caad"),a("c975"),a("d81d"),a("fb6a"),a("45fc"),a("a434"),a("b0c0"),a("b680"),a("cca6"),a("b64b"),a("4d63"),a("ac1f"),a("25f0"),a("2532"),a("38cf"),a("5319"),a("1276"),a("2ca0"),a("159b"),a("53ca")),n=a("3835"),l=a("3778"),o=a("2dd7"),c=a("313e"),h=a.n(c),d={data:function(){return{disabledFilterBtn:!0,disabledHideBtn:!0,hideTableIdList:void 0,selectRowIdList:[],tableSortTimer:null,showAllTimer:null,loading:!0,errorData:!0,tagDialogShow:!1,nodata:!1,tagScope:{},iconValue:0,imageList:[],selectCheckAll:!0,initOver:!1,selectedBarList:[],showTable:!1,showEchartPic:!0,checkOptions:[],basearr:[],sortInfo:{},keyWord:"",delayTime:500,selectArrayValue:[],customizedColumnOptions:[],customizedTypeObject:[],modelObjectArray:[],summaryDirList:void 0,tableFilter:{},echartNoData:!0,lineagedata:{},createType:{StorageDataset:!0,ImageFolderDataset:!0,ImageFolderDatasetV2:!0,MnistDataset:!0,MindDataset:!0,GeneratorDataset:!0,TFRecordDataset:!0,ManifestDataset:!0,Cifar10Dataset:!0,Cifar100Dataset:!0,Schema:!0,VOCDataset:!0},parallelEchart:null,deviceNum:"device_num",shuffleTitle:"Shuffle",repeatTitle:"Repeat",categoryType:"category",objectType:"object",type:{batch:"BatchDataset",shuffle:"ShuffleDataset",repeat:"RepeatDataset",mapData:"MapDataset"},batchNode:"Batch",echart:{brushData:[],showData:[]},text:this.$t("modelTraceback.summaryPath"),checkedSeries:[],fixedSeries:[],noFixedSeries:[],totalSeries:[],pagination:{currentPage:1,pageSize:10,pageSizes:[10,20,50],total:0,layout:"total, sizes, prev, pager, next, jumper"},dirPathList:["summary_dir"],sortArray:[this.$t("modelTraceback.summaryPath"),"loss",this.$t("modelTraceback.network"),this.$t("modelTraceback.optimizer"),this.$t("modelTraceback.trainingSampleNum"),this.$t("modelTraceback.testSampleNum"),this.$t("modelTraceback.learningRate"),"epoch","batch_size",this.$t("modelTraceback.deviceNum"),this.$t("modelTraceback.modelSize"),this.$t("modelTraceback.lossFunc")],numberTypeIdList:["train_dataset_count","test_dataset_count","epoch","batch_size","model_size","loss","learning_rate","device_num"],valueType:{float:"float",int:"int",string:"string",model_size:"model_size",learning_rate:"learning_rate",dataset_mark:"dataset_mark"},table:{columnOptions:{summary_dir:{label:this.$t("modelTraceback.summaryPath"),required:!0},dataset_mark:{label:this.$t("modelTraceback.dataProcess")},model_size:{label:this.$t("modelTraceback.modelSize")},network:{label:this.$t("modelTraceback.network")},loss:{label:"loss"},optimizer:{label:this.$t("modelTraceback.optimizer")},train_dataset_count:{label:this.$t("modelTraceback.trainingSampleNum")},test_dataset_count:{label:this.$t("modelTraceback.testSampleNum")},learning_rate:{label:this.$t("modelTraceback.learningRate")},epoch:{label:"epoch"},batch_size:{label:"batch_size"},device_num:{label:this.$t("modelTraceback.deviceNum")},loss_function:{label:this.$t("modelTraceback.lossFunc")}},column:[],data:[]},tempFormateData:{},detailsDialogVisible:!1,detailsDataTitle:"",detailsDataList:[],rowName:this.$t("dataTraceback.details"),replaceStr:{metric:"metric/",userDefined:"user_defined/"}}},computed:{},mounted:function(){var e=this;this.setTagImage(),document.title="".concat(this.$t("summaryManage.dataTraceback"),"-MindInsight"),document.addEventListener("click",this.blurFloat,!0),this.$nextTick((function(){e.init()}))},methods:{setTagImage:function(){this.imageList=[];for(var e=1;e<=10;e++){var t={};t.number=e,t.iconAdd=a("c4fa")("./icon"+t.number+".svg"),this.imageList.push(t)}},init:function(){this.customizedColumnOptions=this.$store.state.customizedColumnOptions||[],this.table.columnOptions=Object.assign(this.table.columnOptions,this.customizedColumnOptions),this.summaryDirList=this.$store.state.summaryDirList,this.selectedBarList=this.$store.state.selectedBarList,this.selectedBarList&&this.selectedBarList.length?this.tableFilter={}:this.tableFilter.lineage_type={in:["dataset"]};var e={};this.hideTableIdList=this.$store.state.hideTableIdList,this.summaryDirList||this.hideTableIdList?this.tableFilter.summary_dir={in:this.summaryDirList,not_in:this.hideTableIdList}:this.tableFilter.summary_dir=void 0,e.body=Object.assign({},this.tableFilter),this.queryLineagesData(e)},queryLineagesData:function(e){var t=this;l["a"].queryLineagesData(e).then((function(e){if(t.initOver=!0,t.loading=!1,t.echartNoData=!1,e&&e.data){t.nodata=!1,t.errorData=!1,t.customizedTypeObject=e.data.customized;var a=Object.keys(t.customizedTypeObject);if(a.length&&(a=a.map((function(e){return e.startsWith(t.replaceStr.userDefined)?e.replace(t.replaceStr.userDefined,"[U]"):e.startsWith(t.replaceStr.metric)?e.replace(t.replaceStr.metric,"[M]"):void 0})),t.sortArray=t.sortArray.concat(a)),t.selectedBarList=t.$store.state.selectedBarList,t.selectedBarList&&t.selectedBarList.length){var i=JSON.parse(JSON.stringify(e.data.object)),s=[],r={};i.forEach((function(e){if(e.model_lineage){var a=JSON.parse(JSON.stringify(e.model_lineage));a.model_size=parseFloat(((a.model_size||0)/1024/1024).toFixed(2));var i=Object.keys(a.metric||{});i.length&&(i.forEach((function(e){if(a.metric[e]||0===a.metric[e]){var i=t.replaceStr.metric+e;r[i]=e,a[i]=a.metric[e]}})),delete a.metric);var n=Object.keys(a.user_defined||{});n.length&&(n.forEach((function(e){if(a.user_defined[e]||0===a.user_defined[e]){var i=t.replaceStr.userDefined+e;a[i]=a.user_defined[e]}})),delete a.user_defined),s.push(a)}})),t.modelObjectArray=[];for(var n=0;n<s.length;n++){for(var l={},o=0;o<t.selectedBarList.length;o++){var c=s[n],h=t.selectedBarList[o];l[h]=c[h]}t.modelObjectArray.push(l)}}t.fixedSeries=[],t.noFixedSeries=[],t.checkedSeries=[],t.lineagedata=t.formateOriginData(e.data),t.totalSeries=t.lineagedata.fullNodeList,t.totalSeries.length?t.nodata=!1:(t.echartNoData=!0,t.nodata=!0),t.totalSeries.forEach((function(e){t.createType[e.name]?(e.checked=!0,t.fixedSeries.push(e)):(e.checked=!1,t.noFixedSeries.push(e))})),t.noFixedSeries.forEach((function(e){e.checked=!0})),t.getCheckedSerList(),t.fixedSeries.length&&t.setObjectValue(t.fixedSeries,!0),t.noFixedSeries.length&&t.setObjectValue(t.noFixedSeries,!1);var d=t.fixedSeries.concat(t.noFixedSeries);d.forEach((function(e,a){t.checkOptions[a]={},t.basearr[a]={},t.checkOptions[a].label=e.name,t.checkOptions[a].value=e.id,t.createType[e.name]&&(t.checkOptions[a].disabled=!0,t.basearr[a].disabled=!0),t.basearr[a].label=e.name,t.basearr[a].value=e.id})),t.checkOptions.forEach((function(e){t.selectArrayValue.push(e.value)})),t.echart.brushData=t.lineagedata.serData,t.echart.showData=t.echart.brushData,t.showEchartPic=!0,t.resizeChart(),t.setEchartValue(),t.$nextTick((function(){t.initChart()})),t.pagination.total=e.data.count;var u=t.setTableData();if(t.table.data=u,t.showTable=!0,t.selectedBarList){var m=t.hideDataMarkTableData();t.table.column=t.dirPathList.concat(m,t.checkedSeries.map((function(e){return e.id})))}else t.table.column=t.dirPathList.concat(t.checkedSeries.map((function(e){return e.id})))}else t.nodata=!0}),(function(e){t.loading=!1,t.initOver=!0,t.showEchartPic=!1,t.errorData=!0,t.nodata=!0})).catch((function(){t.loading=!1,t.initOver=!0,t.showEchartPic=!1,t.errorData=!0,t.nodata=!0}))},getCheckedSerList:function(){var e=this;this.checkedSeries=[],this.totalSeries.forEach((function(t){t.checked&&e.checkedSeries.push(t)}))},formateOriginData:function(e){var t=this;if(!e||!e.object)return{};var a=[];e.object.forEach((function(e){t.tempFormateData={nodeList:[],children:!1,summary_dir:e.summary_dir,remark:e.added_info.remark?e.added_info.remark:"",tag:e.added_info.tag},"{}"!==JSON.stringify(e.dataset_graph)&&t.getSingleRunData(e.dataset_graph),a.push(JSON.parse(JSON.stringify(t.tempFormateData)))}));var i=[],s={};a.forEach((function(e){if(i.length){var a=0,r=i.map((function(e){return e.name}));e.nodeList.forEach((function(e){var n=r.indexOf(e.name,a);if(-1===n){s[e.name]||(s[e.name]=0),s[e.name]++;var l="",o=Object.keys(t.createType);l=o.includes(e.name)?e.name:"".concat(e.name).concat(s[e.name]),i.splice(a,0,{name:e.name,id:l}),e.id=l,a++,r=i.map((function(e){return e.name}))}else e.id=i[n].id,a=n+1}))}else e.nodeList.forEach((function(e){s[e.name]||(s[e.name]=0),s[e.name]++;var a=Object.keys(t.createType);a.includes(e.name)?(i.push({name:e.name,id:e.name}),e.id=e.name):(i.push({name:e.name,id:"".concat(e.name).concat(s[e.name])}),e.id="".concat(e.name).concat(s[e.name]))}))}));var r=[];a.forEach((function(e){var t={};e.nodeList.forEach((function(e){t[e.id]=e.value})),t.children=e.children,t.summary_dir=e.summary_dir,t.remark=e.remark,t.tag=e.tag,t.editShow=!0,t.isError=!1,r.push(t)}));var n={fullNodeList:i,serData:r};return n},setEchartValue:function(){if(this.modelObjectArray.length)for(var e=this.echart.showData,t=0;t<e.length;t++){var a=this.modelObjectArray[t];this.echart.showData[t]=Object.assign(this.echart.showData[t],a)}},initChart:function(){var e=this,t=[],a=this.$store.state.selectedBarList,i=[],s=[];a&&a.length&&a.forEach((function(t){var a=e.customizedTypeObject[t],i={name:e.table.columnOptions[t].label,id:t,checked:!0};a&&a.type===e.valueType.float?i.type=e.valueType.float:a&&a.type===e.valueType.int&&(i.type=e.valueType.int),s.push(i)}));var r=[];this.basearr.forEach((function(t){e.selectArrayValue.forEach((function(e){if(e===t.value){var a={};a.id=t.value,a.name=t.label,r.push(a)}}))}));var n=s.concat(r);this.echart.showData.forEach((function(e,t){var a={};a={lineStyle:{normal:{color:o["a"].commonColorArr[t%10]}},value:[]},n.forEach((function(t){a.value.push(e[t.id])})),i.push(a)})),n.forEach((function(i,s){var r={dim:s,name:i.name,id:i.id};if(i.name===e.repeatTitle||i.name===e.shuffleTitle||i.id===e.deviceNum||i.type&&i.type===e.valueType.int)r.scale=!0,r.minInterval=1,e.setColorOfSelectedBar(a,r);else if(e.numberTypeIdList.includes(i.id)||i.type&&i.type===e.valueType.float)r.scale=!0,e.setColorOfSelectedBar(a,r);else{r.type=e.categoryType,r.axisLabel={show:!1},e.setColorOfSelectedBar(a,r),i.id===e.valueType.dataset_mark&&(r.axisLabel={show:!1});var n={};e.echart.showData.forEach((function(e){(e[i.id]||0===e[i.id])&&(n[e[i.id]]="")})),r.data=Object.keys(n)}t.push(r)}));var l={backgroundColor:"white",parallelAxis:t,tooltip:{trigger:"axis"},parallel:{top:30,left:90,right:100,bottom:12,parallelAxisDefault:{areaSelectStyle:{width:40},tooltip:{show:!0},realtime:!1}},series:{type:"parallel",lineStyle:{width:1,opacity:1},data:i}};this.parallelEchart?(this.parallelEchart.off("axisareaselected",null),window.removeEventListener("resize",this.resizeChart,!1)):this.parallelEchart=h.a.init(document.querySelector("#data-echart")),this.parallelEchart.setOption(l,!0),window.addEventListener("resize",this.resizeChart,!1),this.chartEventsListen(t)},chartEventsListen:function(e){var t=this;this.parallelEchart.on("axisareaselected",(function(a){var i=a.parallelAxisId,s=a.intervals[0]||[],r=e.filter((function(e){return e.id===i})),l=Object(n["a"])(r,1),o=l[0];if(o&&2===s.length){if(o.type===t.categoryType){var c=o.data.slice(s[0],s[1]+1);t.echart.brushData=t.echart.showData.filter((function(e){return c.includes(e[i])}))}else t.echart.brushData=t.echart.showData.filter((function(e){return e[i]>=s[0]&&e[i]<=s[1]}));var h=t.echart.brushData,d=[];h.forEach((function(e){d.push(e.summary_dir)})),t.$store.commit("setSummaryDirList",d),t.hideTableIdList=t.$store.state.hideTableIdList,t.$refs.table.clearSelection(),d||t.hideTableIdList?t.tableFilter.summary_dir={in:d,not_in:t.hideTableIdList}:t.tableFilter.summary_dir=void 0,h.length?(t.echart.showData=t.echart.brushData,t.$nextTick((function(){t.initChart()})),t.pagination.currentPage=1,t.pagination.total=t.echart.brushData.length,t.table.data=t.echart.brushData.slice((t.pagination.currentPage-1)*t.pagination.pageSize,t.pagination.currentPage*t.pagination.pageSize),t.showTable=!0):(t.summaryDirList=[],t.lineagedata.serData=void 0,t.showTable=!1,t.nodata=!0,t.echartNoData=!0)}}))},resizeChart:function(){document.getElementById("data-echart")&&"none"!==document.getElementById("data-echart").style.display&&this.parallelEchart&&this.parallelEchart.resize()},setTableData:function(){var e=[],t=JSON.parse(JSON.stringify(this.echart.brushData));return e=t.slice((this.pagination.currentPage-1)*this.pagination.pageSize,this.pagination.currentPage*this.pagination.pageSize),e},hideDataMarkTableData:function(){var e=this,t=[];return this.selectedBarList.forEach((function(a){a!==e.valueType.dataset_mark&&t.push(a)})),t},setColorOfSelectedBar:function(e,t){e&&t.dim<e.length?(t.nameTextStyle={color:"#00a5a7"},t.axisLabel={show:!0,textStyle:{color:"#00a5a7"},formatter:function(e){if("string"!==typeof e)return e;var t=e.split(""),a="",i=100,s=12;if(e.length>i)return e.substring(0,s)+"...";for(var r=0,n="";n=t[r++];)a+=n,r%s||(a+="\n");return a}},t.axisLine={show:!0,lineStyle:{color:"#00a5a7"}}):t.nameTextStyle={color:"black"}},editRemarks:function(e){e.editShow=!1,e.isError=!1,this.beforeEditValue=e.remark},saveRemarksValue:function(e){var t=new RegExp("^[a-zA-Z0-9一-龥_.-]{1,128}$"),a=!e.remark.length||t.test(e.remark);if(a){e.isError=!1,e.editShow=!0;var i={train_id:e.summary_dir,body:{remark:e.remark}};this.putChangeToLineagesData(i)}else e.isError=!0},cancelRemarksValue:function(e){e.editShow=!0,e.remark=this.beforeEditValue,e.isError=!1},putChangeToLineagesData:function(e){var t=this;l["a"].putLineagesData(e).then((function(e){e&&t.$message.success(t.$t("modelTraceback.changeSuccess"))}),(function(e){})).catch((function(){}))},blurFloat:function(e){var t=document.querySelectorAll(".icon-dialog"),a=e.path||e.composedPath&&e.composedPath(),i=a.some((function(e){return"icon-dialog"===e.className}));i||(this.removeIconBorder(),t.forEach((function(e){e.style.display="none"})),this.tagDialogShow=!1)},showAllIcon:function(e,t,a){if(this.tagScope=t,this.iconValue=e.tag>=0?e.tag:0,this.tagDialogShow)return this.tagDialogShow=!1,void this.removeIconBorder();this.addIconBorder(e),this.tagDialogShow=!0;var i=window.event||a;document.getElementById("tag-dialog").style.top=i.clientY-130+"px"},addIconBorder:function(e){var t=document.querySelectorAll(".icon-image");t.forEach((function(t,a){a+1===e.tag&&t.classList.add("icon-border")}))},removeIconBorder:function(){var e=document.querySelectorAll(".icon-border");e.length&&e.forEach((function(e){e.classList.remove("icon-border")}))},iconValueChange:function(e,t,a){var i=a.path||a.composedPath&&a.composedPath(),s=i.find((function(e){return"icon-dialog"===e.className})),r=s.querySelectorAll(".icon-border");r.forEach((function(e){e.classList.remove("icon-border")}));var n=i.find((function(e){return"DIV"===e.nodeName}));n.classList.add("icon-border"),this.iconValue=t},iconChangeSave:function(e){var t=this;if(this.tagDialogShow=!1,e.row.tag!==this.iconValue&&0!==this.iconValue){this.tagScope.row.tag=this.iconValue;var i=document.querySelectorAll(".img"+e.$index);i.forEach((function(e){e.src=a("c4fa")("./icon"+t.iconValue+".svg")})),this.$forceUpdate();var s={train_id:e.row.summary_dir,body:{tag:this.tagScope.row.tag}};this.putChangeToLineagesData(s)}},clearIcon:function(e,t){var i=t.path||t.composedPath&&t.composedPath(),s=i.find((function(e){return"icon-dialog"===e.className})),r=s.querySelectorAll(".icon-border");r.forEach((function(e){e.classList.remove("icon-border")})),this.tagDialogShow=!1,this.iconValue=0,this.tagScope.row.tag=0;var n=document.querySelectorAll(".img"+e.$index);n.forEach((function(e){e.src=a("96c0")}));var l={train_id:e.row.summary_dir,body:{tag:0}};this.putChangeToLineagesData(l),this.tagDialogShow=!1},cancelChangeIcon:function(e){this.removeIconBorder(),this.addIconBorder(e),this.tagDialogShow=!1},allSelect:function(){var e=this;if(!this.selectCheckAll){this.selectArrayValue=[],this.checkOptions.forEach((function(t){e.selectArrayValue.push(t.value)})),this.selectCheckAll=!this.selectCheckAll,this.$nextTick((function(){e.initChart()}));var t=[];if(this.checkOptions.forEach((function(a){e.selectArrayValue.forEach((function(e){e===a.value&&t.push(e)}))})),this.selectedBarList){var a=this.hideDataMarkTableData();this.table.column=this.dirPathList.concat(a,t)}else this.table.column=this.dirPathList.concat(t)}},deselectAll:function(){var e=this;this.selectArrayValue=[],this.checkOptions.forEach((function(t){t.disabled&&e.selectArrayValue.push(t.value)})),this.selectCheckAll=!1,this.$nextTick((function(){e.initChart()}));var t=[];if(this.checkOptions.forEach((function(a){e.selectArrayValue.forEach((function(e){e===a.value&&t.push(e)}))})),this.selectedBarList){var a=this.hideDataMarkTableData();this.table.column=this.dirPathList.concat(a,t)}else this.table.column=this.dirPathList.concat(t)},myfilter:function(){var e=this,t=this.keyWord,a=this.basearr,i=t?this.createFilter(t,a):a;this.checkOptions=i,this.checkOptions.length?this.$nextTick((function(){e.$refs.keyInput&&e.$refs.keyInput.focus()})):this.$nextTick((function(){e.$refs.keyEmptyInput&&e.$refs.keyEmptyInput.focus()}))},createFilter:function(e,t){var a=[];return t.forEach((function(t){var i={};t&&t.label.toLowerCase().indexOf(e.toLowerCase())>=0&&(i.label=t.label,i.value=t.value,i.disabled=t.disabled,a.push(i))})),a},selectinputFocus:function(){this.keyWord="",this.checkOptions=this.basearr},selectValueChange:function(){var e=this,t=[];this.basearr.forEach((function(e){t.push(e.label)})),t.length>this.selectArrayValue.length?this.selectCheckAll=!1:this.selectCheckAll=!0,this.$nextTick((function(){e.initChart()}));var a=[];if(this.basearr.forEach((function(t){e.selectArrayValue.forEach((function(e){e===t.value&&a.push(e)}))})),this.selectedBarList){var i=this.hideDataMarkTableData();this.table.column=this.dirPathList.concat(i,a)}else this.table.column=this.dirPathList.concat(a)},jumpToTrainDashboard:function(e){var t=encodeURIComponent(e),a=this.$router.resolve({path:"/train-manage/training-dashboard",query:{id:t}});window.open(a.href,"_blank")},jumpToModelTraceback:function(){this.$router.push({path:"/model-traceback"})},formatNumber:function(e,t){if(isNaN(t)||!t)return t;var a=4;if(e===this.valueType.learning_rate){var i=t.toPrecision(a),s=0;while(i<1)i*=10,s+=1;return i=this.toFixedFun(i,a),"".concat(i).concat(s?"e-".concat(s):"")}if(e===this.valueType.model_size)return t+"MB";var r=1e3;if(t<r)return Math.round(t*Math.pow(10,a))/Math.pow(10,a);var n=/(?=(\B)(\d{3})+$)/g;return(t+"").replace(n,",")},toFixedFun:function(e,t){return isNaN(e)||isNaN(t)||!e||!t?e:Math.round(e*Math.pow(10,t))/Math.pow(10,t)},showDialogData:function(e,t){var a="{}";if(Object(r["a"])(e)===this.valueType.string&&e!==a){var i=this.isJSON(e);i&&(this.rowName="".concat(t.column.label).concat(this.$t("dataTraceback.details")),this.detailsDialogVisible=!0,this.detailsDataTitle=t.row.summary_dir,this.detailsDataList=this.formateJsonString(e))}},isJSON:function(e){try{return JSON.parse(e),!0}catch(t){return!1}},setObjectValue:function(e,t){var a=this;e.forEach((function(e){var i={};i.label=e.name,i.required=t,a.table.columnOptions[e.id]=i}))},queryTableLineagesData:function(e){var t=this;l["a"].queryLineagesData(e).then((function(e){if(e&&e.data){t.nodata=!1,t.errorData=!1,t.lineagedata=t.formateOriginData(e.data);var a=t.lineagedata.serData;if(t.selectedBarList&&t.selectedBarList.length){var i=JSON.parse(JSON.stringify(e.data.object)),s=[],r={};i.forEach((function(e){if(e.model_lineage){var a=JSON.parse(JSON.stringify(e.model_lineage));a.model_size=parseFloat(((a.model_size||0)/1024/1024).toFixed(2));var i=Object.keys(a.metric||{});i.length&&(i.forEach((function(e){if(a.metric[e]||0===a.metric[e]){var i=t.replaceStr.metric+e;r[i]=e,a[i]=a.metric[e]}})),delete a.metric);var n=Object.keys(a.user_defined||{});n.length&&(n.forEach((function(e){if(a.user_defined[e]||0===a.user_defined[e]){var i=t.replaceStr.userDefined+e;a[i]=a.user_defined[e]}})),delete a.user_defined),s.push(a)}})),t.modelObjectArray=[];for(var n=0;n<s.length;n++){for(var l={},o=0;o<t.selectedBarList.length;o++){var c=s[n],h=t.selectedBarList[o];l[h]=c[h]}t.modelObjectArray.push(l)}if(t.modelObjectArray.length){for(var d=JSON.parse(JSON.stringify(a)),u=0;u<d.length;u++){var m=t.modelObjectArray[u];d[u]=Object.assign(d[u],m)}t.table.data=d}else t.table.data=JSON.parse(JSON.stringify(a))}else t.table.data=JSON.parse(JSON.stringify(a))}else t.nodata=!0}),(function(e){t.errorData=!0,t.nodata=!0})).catch((function(){t.errorData=!0,t.nodata=!0}))},handleSelectionChange:function(e){var t=e,a=[];t.forEach((function(e){a.push(e.summary_dir)})),this.selectRowIdList=a,this.selectRowIdList.length?(this.disabledFilterBtn=!1,this.disabledHideBtn=!1):(this.disabledFilterBtn=!0,this.disabledHideBtn=!0)},showSelectedTableData:function(){this.tableFilter.summary_dir={in:this.selectRowIdList},this.summaryDirList=this.selectRowIdList,this.$store.commit("setSummaryDirList",this.summaryDirList),this.checkOptions=[],this.selectArrayValue=[],this.basearr=[],this.$refs.table.clearSelection(),this.pagination.currentPage=1,this.init()},hideSelectedRows:function(){this.summaryDirList=this.$store.state.summaryDirList,this.hideTableIdList?this.hideTableIdList=this.hideTableIdList.concat(this.selectRowIdList):this.hideTableIdList=this.selectRowIdList,this.tableFilter.summary_dir={in:this.summaryDirList,not_in:this.hideTableIdList},this.$store.commit("setHideTableIdList",this.hideTableIdList),this.$refs.table.clearSelection(),this.checkOptions=[],this.selectArrayValue=[],this.basearr=[],this.pagination.currentPage=1,this.init()},showAllDataBtn:function(){var e=this;this.nodata=!1,this.showAllTimer&&(clearTimeout(this.showAllTimer),this.showAllTimer=null),this.showAllTimer=setTimeout((function(){e.initOver=!1,e.echartNoData=!1,e.showEchartPic=!0,e.selectCheckAll=!0,e.checkOptions=[],e.selectArrayValue=[],e.basearr=[],e.pagination.currentPage=1,e.$store.commit("setHideTableIdList",void 0),e.hideTableIdList=void 0,e.$store.commit("setSummaryDirList",void 0),e.$store.commit("setSelectedBarList",[]),e.parallelEchart&&e.parallelEchart.clear(),e.$refs.table.clearSelection(),e.init()}),this.delayTime)},tableSortChange:function(e){var t=this;this.tableSortTimer&&(clearTimeout(this.tableSortTimer),this.tableSortTimer=null),this.tableSortTimer=setTimeout((function(){t.sortInfo.sorted_name=e.prop,t.sortInfo.sorted_type=e.order;var a={},i={sorted_name:e.prop,sorted_type:e.order};t.checkOptions=[],t.selectArrayValue=[],t.basearr=[],t.pagination.currentPage=1,t.summaryDirList=t.$store.state.summaryDirList,t.hideTableIdList=t.$store.state.hideTableIdList,t.summaryDirList||t.hideTableIdList?t.tableFilter.summary_dir={in:t.summaryDirList,not_in:t.hideTableIdList}:t.tableFilter.summary_dir=void 0,a.body=Object.assign({},i,t.tableFilter),t.queryLineagesData(a)}),this.delayTime)},currentPagesizeChange:function(e){this.pagination.pageSize=e,this.handleCurrentChange(this.pagination.currentPage)},handleCurrentChange:function(e){this.pagination.currentPage=e;var t=this.setTableData(),a=[];t.forEach((function(e){a.push(e.summary_dir)}));var i={body:{}},s={sorted_name:this.sortInfo.sorted_name,sorted_type:this.sortInfo.sorted_type};this.hideTableIdList=this.$store.state.hideTableIdList,this.tableFilter.summary_dir={in:a,not_in:this.hideTableIdList},i.body=Object.assign(i.body,this.chartFilter,s,this.tableFilter),this.queryTableLineagesData(i)},getSingleRunData:function(e){var t=this;e.children&&e.children.length&&(e.children.length>1&&(this.tempFormateData.children=!0),this.getSingleRunData(e.children[0]));var a=e.op_type,i="",s="";if(a===this.type.batch)i=this.batchNode,s="batch_size:".concat(e.batch_size,",drop_remainder:").concat(e.drop_remainder);else if(a===this.type.shuffle)i=this.shuffleTitle,s=e.buffer_size;else if(a===this.type.repeat)s=e.count,i=this.repeatTitle;else if(a===this.type.mapData){var r=e.operations;a=r.forEach((function(e){i="Map_".concat(e.tensor_op_name),delete e.tensor_op_module,delete e.tensor_op_name,s=JSON.stringify(e),t.tempFormateData.nodeList.push({name:i,id:"",value:s})}))}else s=JSON.stringify(e),i=a;e.op_type!==this.type.mapData&&this.tempFormateData.nodeList.push({name:i,id:"",value:s})},formateJsonString:function(e){var t=this;if(!e)return[];var a=[],i=JSON.parse(e),s=Object.keys(i);return s.forEach((function(e,s){var n={id:s+1,hasChildren:!1,key:e,value:""};null===i[e]?n.value="None":Object(r["a"])(i[e])===t.objectType&&null!==i[e]?(i[e]instanceof Array||(n.hasChildren=!0,n.children=[],Object.keys(i[e]).forEach((function(a,s){var r={};r.key=a,null===i[e][a]?r.value="None":r.value=i[e][a],r.id="".concat((new Date).getTime())+"".concat(t.$store.state.tableId),t.$store.commit("increaseTableId"),n.children.push(r)}))),n.value=JSON.stringify(i[e])):n.value=i[e],a.push(n)})),a},loadDataListChildren:function(e,t,a){setTimeout((function(){a(e.children)}))}},destroyed:function(){this.tableSortTimer=null,this.showAllTimer=null,this.parallelEchart&&(window.removeEventListener("resize",this.resizeChart,!1),this.parallelEchart.clear(),this.parallelEchart=null)},components:{}},u=d,m=(a("5bb7"),a("2877")),p=Object(m["a"])(u,i,s,!1,null,null,null);t["default"]=p.exports}}]);