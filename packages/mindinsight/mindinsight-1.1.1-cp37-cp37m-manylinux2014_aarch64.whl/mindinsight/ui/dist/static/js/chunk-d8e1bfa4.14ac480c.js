(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8e1bfa4"],{"345f":function(t,e,a){"use strict";a("d4b7")},"498a":function(t,e,a){"use strict";var i=a("23e7"),r=a("58a8").trim,s=a("c8d2");i({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},"4a0b":function(t,e,a){},"4d06":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAptJREFUOBGllEFoE0EUhudtbRUvRuhFcognz4V6sSCSg7Ee2kNpoyhYAt1GULEr3YhWsL0oZrWJoOBmK7GCoov2oAWpRSJ4UZDi2ZM9BC8FgweRtmZ8f9wZpprSgAObee+f/32Z2Zkdyhf9IZLithDidWes43Qmk/nJccutXC7vWKmt3uOClCRx3hKSbCnFHn6GV2prc2EYdrRKgxc1qAUDLItnN0PEv9yklEeXq9+e+b7fvhUUHnhRAy8YYFnuhdFQCjqnAPxPfd9/iCeVSmWb0v7uMQYPvGoMDLBICV4hGJOyXlA5/2OYiMdOpNPpX0pDz8tsW67WHvPM0konshzXsYvILSU2BBIXVY6CL9XaLPfagzjSNExwjYJtACLJOdk8kbiioPxST94qBvcZRHgQQ1Pj8KJG5ej1kk3RK/iT/H6uao3ETCOWYkRpDJtyneykylXfFIhBr1C6xrO6pIxmz+/3uuuMXjY1FW8KhIGhHkPHlRk9w24yzDU1M9Yv3BT/J27brDhast51w9eT6u3fvrjw8o2h6bApMD9dmuLvRu82CQr4WeKq7qjy4OEj/RZD32pSFPwD5B2e4DEG/mkW0YNxx7Z7DnTPv/+wlOBvtCsaOpTq7VtfXJh/p7zoN2xKvuDnhBQ3tIHokTtmn+KNqEPjDbK8YvDQPIs42OZZ1JuCT8+E4dPbG48NKxiAiCMtRN5oPIFGbZQ2ZpgvBGeErN+JNC4Uc/u79h1LJpPrSjN7XA4fP31+yod/QOtknc059l3ypktpnjbfHHw9ohG92LVTDmaz2TVtbhLg+uIb57m6cXj2kld43GLMiIKx+IqXNLQVDHx4EvHdg6hBDgZYliAZ8BK/8jPbGWsf4OtqFYZWGryoQS0YYP0GSgsoUPv9lyUAAAAASUVORK5CYII="},6265:function(t,e,a){},"7e02":function(t,e,a){"use strict";var i,r,s={data:function(){return{autoUpdateTimer:null,isReloading:!1}},computed:{isReload:function(){return this.$store.state.isReload},isTimeReload:function(){return this.$store.state.isTimeReload},timeReloadValue:function(){return this.$store.state.timeReloadValue}},watch:{isReload:function(t,e){t&&(this.isReloading=!0,this.isTimeReload&&this.autoUpdateSamples(),this.updateAllData(!1))},isTimeReload:function(t,e){t?this.autoUpdateSamples():this.stopUpdateSamples()},timeReloadValue:function(){this.autoUpdateSamples()}},methods:{autoUpdateSamples:function(){var t=this;this.autoUpdateTimer&&(clearInterval(this.autoUpdateTimer),this.autoUpdateTimer=null),this.autoUpdateTimer=setInterval((function(){t.$store.commit("clearToken"),t.updateAllData(!0)}),1e3*this.timeReloadValue)},stopUpdateSamples:function(){this.autoUpdateTimer&&(clearInterval(this.autoUpdateTimer),this.autoUpdateTimer=null)}},destroyed:function(){this.autoUpdateTimer&&(clearInterval(this.autoUpdateTimer),this.autoUpdateTimer=null),this.isReloading&&(this.$store.commit("setIsReload",!1),this.isReloading=!1)}},n=s,l=a("2877"),o=Object(l["a"])(n,i,r,!1,null,null,null);e["a"]=o.exports},"82b9":function(t,e,a){"use strict";a("4a0b")},9485:function(t,e,a){t.exports=a.p+"static/img/nodata.8290bed9.png"},"9f77":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cl-tensor-manage"},[i("div",{staticClass:"tensor-bk"},[i("div",{staticClass:"cl-title cl-tensor-title"},[i("div",{staticClass:"cl-title-left"},[t._v(t._s(t.$t("tensors.titleText"))+" "),i("div",{staticClass:"path-message"},[i("span",[t._v(t._s(t.$t("symbols.leftbracket")))]),i("span",[t._v(t._s(t.$t("trainingDashboard.summaryDirPath")))]),i("span",[t._v(t._s(t.summaryPath))]),i("span",[t._v(t._s(t.$t("symbols.rightbracket")))])])]),i("div",{staticClass:"cl-title-right"},[i("div",{staticClass:"cl-close-btn",on:{click:t.jumpToTrainDashboard}},[i("img",{attrs:{src:a("4d06")}})])])]),i("div",{staticClass:"cl-tensor-operate-content"},[i("multiselectGroupComponents",{ref:"multiselectGroupComponents",attrs:{checkListArr:t.tagList},on:{selectedChange:t.tagSelectedChanged}})],1),i("div",{staticClass:"cl-tensor-view-type-select-content"},[i("div",{staticClass:"view-title"},[t._v(t._s(t.$t("tensors.viewTypeTitle")))]),i("el-radio-group",{attrs:{fill:"#00A5A7","text-color":"#FFFFFF",size:"small"},on:{change:t.dataTypeChange},model:{value:t.curDataType,callback:function(e){t.curDataType=e},expression:"curDataType"}},[i("el-radio-button",{attrs:{label:0}},[t._v(t._s(t.$t("tensors.chartViewType")))]),i("el-radio-button",{attrs:{label:1}},[t._v(t._s(t.$t("tensors.histogramViewType")))])],1),t.curDataType?i("div",{staticClass:"view-title"},[t._v(t._s(t.$t("histogram.viewType"))+" ")]):t._e(),t.curDataType?i("el-radio-group",{attrs:{fill:"#00A5A7","text-color":"#FFFFFF",size:"small"},on:{change:t.viewTypeChange},model:{value:t.curViewName,callback:function(e){t.curViewName=e},expression:"curViewName"}},[i("el-radio-button",{attrs:{label:0}},[t._v(t._s(t.$t("histogram.overlay")))]),i("el-radio-button",{attrs:{label:1}},[t._v(t._s(t.$t("histogram.offset")))])],1):t._e(),t.curViewName&&t.curDataType?i("div",{staticClass:"view-title"},[t._v(" "+t._s(t.$t("histogram.xAxisTitle"))+" ")]):t._e(),t.curDataType&&t.curViewName?i("el-radio-group",{attrs:{fill:"#00A5A7","text-color":"#FFFFFF",size:"small",disabled:0===t.curViewName},on:{change:t.timeTypeChange},model:{value:t.curAxisName,callback:function(e){t.curAxisName=e},expression:"curAxisName"}},[i("el-radio-button",{attrs:{label:0}},[t._v(t._s(t.$t("histogram.step")))]),i("el-radio-button",{attrs:{label:1}},[t._v(t._s(t.$t("histogram.relativeTime")))]),i("el-radio-button",{attrs:{label:2}},[t._v(t._s(t.$t("histogram.absoluteTime")))])],1):t._e()],1),i("div",{staticClass:"cl-show-data-content"},[t.originDataArr.length?t._e():i("div",{staticClass:"image-noData"},[i("div",[i("img",{attrs:{src:a("9485")}})]),t.initOver?i("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.noData")))]):i("div",{staticClass:"noData-text"},[t._v(t._s(t.$t("public.dataLoading")))])]),t.originDataArr.length?i("div",{staticClass:"data-content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.chartTipFlag,expression:"chartTipFlag"}],attrs:{id:"echartTip"}},[i("table",{staticClass:"char-tip-table borderspacing3"},[i("tr",[i("td",[t._v(t._s(t.$t("histogram.centerValue")))]),i("td",[t._v(t._s(t.$t("histogram.step")))]),i("td",[t._v(t._s(t.$t("histogram.relativeTime")))]),i("td",[t._v(t._s(t.$t("histogram.absoluteTime")))])]),i("tr",{attrs:{id:"tipTr"}})])]),t._l(t.originDataArr,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"sampleItem.show"}],key:e.ref,staticClass:"sample-content",class:e.fullScreen?"char-full-screen":""},[i("div",{staticClass:"chars-container"},[t.curDataType?i("histogramUntil",{ref:e.ref,refInFor:!0,attrs:{fullScreen:e.fullScreen,viewName:t.curViewName,axisName:t.curAxisName,fullData:e.curData},on:{chartTipFlagChange:t.chartTipFlagChange,toggleFullScreen:function(a){return t.toggleFullScreen(e)}}}):i("gridTableComponents",{ref:e.ref,refInFor:!0,attrs:{fullScreen:e.fullScreen,columnLimitNum:t.columnLimitNum,fullData:e.curData},on:{martixFilterChange:function(a){return t.filterChange(a,e)},toggleFullScreen:function(a){return t.toggleFullScreen(e)}}}),e.showLoading?i("div",{staticClass:"loading-cover"},[i("i",{staticClass:"el-icon-loading"})]):t._e()],1),t.curDataType?t._e():i("div",{staticClass:"sample-data-show"},[i("div",{staticClass:"tensor-demension",attrs:{title:e.curDims}},[t._v(" "+t._s(t.$t("tensors.dimension"))+" "),i("span",[t._v(t._s(e.curDims))])]),i("div",{staticClass:"tensor-type",attrs:{title:e.curDataType}},[t._v(" "+t._s(t.$t("tensors.tensorType"))+" "+t._s(e.curDataType)+" ")]),i("div",{staticClass:"sample-operate-info select-disable"},[i("span",{staticClass:"step-info",attrs:{title:e.curStep}},[t._v(t._s(t.$t("images.step"))+t._s(e.curStep))]),i("span",{staticClass:"time-info",attrs:{title:e.curTime}},[t._v(t._s(e.curTime))])]),i("el-slider",{staticClass:"step-slider",attrs:{step:1,max:e.totalStepNum,"show-tooltip":!1,disabled:0===e.totalStepNum},on:{input:function(a){return t.sliderChange(e.sliderValue,e)}},model:{value:e.sliderValue,callback:function(a){t.$set(e,"sliderValue",a)},expression:"sampleItem.sliderValue"}})],1),i("div",{staticClass:"tag-title",attrs:{title:e.tagName}},[t._v(t._s(e.tagName)+" ")])])}))],2):t._e()]),t.originDataArr.length?i("div",{staticClass:"pagination-content"},[i("el-pagination",{attrs:{"current-page":t.pageIndex+1,"page-sizes":t.pageSizes,"page-size":t.pageNum,layout:"total, prev, pager, next, jumper",total:t.curFilterSamples.length},on:{"current-change":t.currentPageChange}})],1):t._e()])])},r=[],s=(a("99af"),a("4de4"),a("4160"),a("e260"),a("a434"),a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("159b"),a("ddb0"),a("a95e")),n=a("cd2f"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cl-histogram-container"},[a("div",{staticClass:"data-show-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.requestError,expression:"requestError"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.errorMsg)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!!t.fullData.length&&!t.requestError,expression:"!!fullData.length && !requestError"}],staticClass:"data-item",attrs:{id:t.itemId}})])])},o=[],c=(a("fb6a"),a("a9e3"),a("b680"),a("5319"),a("313e")),u=a.n(c),h=a("2dd7"),m=a("5698"),d={format:m["b"],precisionRound:m["c"]},f={props:{fullData:{type:Array,default:function(){return[]}},viewName:{type:Number,default:1},axisName:{type:Number,default:0},fullScreen:{type:Boolean,default:!1}},data:function(){return{itemId:"",oriData:{},charOption:{},charObj:null,updated:!1,zrDrawElement:{hoverDots:[]},zr:null,chartTipFlag:!1,requestError:!1,errorMsg:"",viewResizeFlag:!1}},computed:{},watch:{},mounted:function(){this.init()},methods:{init:function(){this.itemId="".concat((new Date).getTime())+"".concat(this.$store.state.componentsCount),this.$store.commit("componentsNum")},resizeView:function(){this.charObj&&(this.requestError?this.viewResizeFlag=!0:this.charObj.resize())},formatDataToChar:function(){var t=this,e=this.fullData,a=[],i=-1/0,r=1/0,s=-1/0,n=1/0,l=[];e&&e.length&&e.forEach((function(e){var o=[];l.push(e.step),e.items.forEach((function(a){0===t.viewName?o.push([a[2],a[3]]):1===t.viewName&&o.push(a[2],e.step,a[3]),i=Math.max(i,a[2]),r=Math.min(r,a[2]),n=Math.min(n,a[3]),s=Math.max(s,a[3])})),a.push(o)})),this.oriData={seriesData:a,maxX:i,minX:r,maxZ:s,minZ:n,gridData:l}},updateSampleData:function(){if(this.charOption=this.formatCharOption(),!this.charObj){var t=document.getElementById(this.itemId);if(!t)return;this.charObj=u.a.init(t,null)}this.removeTooltip(),this.charObj.setOption(this.charOption,!0),this.viewResizeFlag&&(this.charObj.resize(),this.viewResizeFlag=!1)},sampleEventBind:function(){var t=this;this.zr||(this.zr=this.charObj.getZr(),this.zr.off("mouseout","mousemove"),this.zr.on("mouseout",(function(e){t.removeTooltip(),t.chartTipFlag=!1,t.$emit("chartTipFlagChange",t.chartTipFlag)})),this.zr.on("mousemove",(function(e){t.removeTooltip(),t.mousemoveEvent(e)})))},formatCharOption:function(){var t=this,e="#346E69",a="#EBFFFD",i=this.oriData,r=this.getGrientColor(e,a,i.seriesData.length),s=this.toggleFullScreen,n=this.axisName,l=this,o={grid:{left:40,top:60,right:80,bottom:60},xAxis:{max:i.maxX,min:i.minX,axisLine:{onZero:!1},axisLabel:{fontSize:"11",formatter:function(t){return l.formateNUmber(t)}},splitLine:{show:!1}},yAxis:{position:"right",axisLine:{onZero:!1,show:!1},splitLine:{show:!0},axisTick:{show:!1},boundaryGap:!1,axisLabel:{fontSize:"11",formatter:function(t){return l.formateNUmber(t)}}},toolbox:{top:20,right:20,emphasis:{iconStyle:{textPosition:"top",borderColor:"#00A5A7"}},feature:{myToolFullScreen:{show:!0,title:this.$t("histogram.fullScreen"),iconStyle:{borderColor:this.fullScreen?"#00A5A7":"#6D7278"},icon:h["a"].fullScreenIcon,onclick:function(){s()}}}}};if(1===this.viewName){var c=[];i.seriesData.forEach((function(t,e){var a={name:t[1],value:t,itemStyle:{color:r[e]}};c.push(a)})),o.series=[{type:"custom",dimensions:["x","y"],renderItem:function(e,a){var i=t.makePolyPoints(e.dataIndex,a.coord,e.coordSys.y-10);return{type:"polyline",z2:e.dataIndex,silent:!0,shape:{points:i},style:a.style({stroke:"#bbb",lineWidth:1})}},data:c}],o.yAxis.data=i.gridData,o.yAxis.type="category",o.grid.top=126,2===n&&this.fullScreen&&(o.grid.right=140),o.yAxis.inverse=!0,o.yAxis.axisLabel.formatter=function(t){return l.yAxisFormatter(t)}}else 0===this.viewName&&(o.color=r,o.series=[],i.seriesData.forEach((function(t){o.series.push({type:"line",symbol:"none",lineStyle:{width:1},data:t.slice(1,-1)})})));return o},toggleFullScreen:function(){this.removeTooltip(),this.fullScreen?(this.charOption.grid.right=80,this.charOption.toolbox.feature.myToolFullScreen.iconStyle.borderColor="#6D7278"):(2===this.axisName&&(this.charOption.grid.right=140),this.charOption.toolbox.feature.myToolFullScreen.iconStyle.borderColor="#00A5A7"),this.charObj.setOption(this.charOption),this.$emit("toggleFullScreen")},removeTooltip:function(){var t=this;this.zr&&(this.zrDrawElement.hoverDots&&this.zrDrawElement.hoverDots.forEach((function(e){return t.zr.remove(e)})),this.zrDrawElement.hoverLine&&this.zr.remove(this.zrDrawElement.hoverLine),this.zrDrawElement.tooltip&&this.zr.remove(this.zrDrawElement.tooltip),this.zrDrawElement.tooltipY&&this.zr.remove(this.zrDrawElement.tooltipY),this.zrDrawElement.tooltipX&&this.zr.remove(this.zrDrawElement.tooltipX))},makePolyPoints:function(t,e,a){for(var i=[],r=this.oriData.seriesData,s=this.oriData.maxZ,n=this.oriData.minZ,l=0;l<r[t].length;){var o=this.getValue(r,t,l++),c=this.getValue(r,t,l++),u=this.getValue(r,t,l++),h=e([o,c]);s!==n&&(h[1]-=(u-n)/(s-n)*a),i.push(h)}return i},getCoord:function(t){return this.charObj.convertToPixel("grid",t)},yAxisFormatter:function(t){var e="",a=this.fullData.filter((function(e){return e.step===t}));return a.length&&(e=2===this.axisName?this.fullScreen?this.dealrelativeTime(new Date(1e3*a[0].wall_time).toString()):[]:1===this.axisName?"".concat(this.formateNUmber(a[0].relative_time.toFixed(0)),"s"):this.formateNUmber(a[0].step)),e},formateNUmber:function(t){return t=Number(t),t.toString().length>6?t.toExponential(3):Math.round(1e3*t)/1e3},dealrelativeTime:function(t){var e=t.split(" "),a=e[0]+" "+e[1]+" "+e[2]+", "+e[4];return a},mousemoveEvent:function(t){var e=this,a="s",i=this.findNearestValue([t.offsetX,t.offsetY]);if(i&&null!==i.yIndex&&null!==i.binIndex){var r,s=i.binIndex,n=i.yIndex,l=this.fullData,o=l[n],c=Math.max(0,d.precisionRound(.01,1.01)-1),h=d.format(".".concat(c,"e")),m=this.charObj.getModel().getComponent("grid",0).coordinateSystem.getRect(),f=m.y-10,p=[];if(!o||!o.items[s])return;this.chartTipFlag||(this.chartTipFlag=!0,this.$emit("chartTipFlagChange",this.chartTipFlag)),1===this.viewName&&null!==n?p=this.makePolyPoints(n,this.getCoord,f):0===this.viewName&&o.items&&o.items.forEach((function(t){p.push(e.getCoord([t[2],t[3]]))})),this.zrDrawElement.hoverLine=new u.a.graphic.Polyline({silent:!0,shape:{points:p.slice(1,-1)},z:999}),this.zr.add(this.zrDrawElement.hoverLine),this.zrDrawElement.tooltip=new u.a.graphic.Text({});var g=o.items[s][2],v=0;l.forEach((function(t,a){var i=t.step,l=e.getCoord([g,i]);if(a===n)v=o.items[s][3];else for(var c=t.items,h=1;h<c.length-1;h++){var m=c[h+1][2],d=c[h+1][3];if(c[h][2]===g){v=c[h][3];break}if(c[h][2]<g&&m>g){var p=(g-c[h][2])/(m-c[h][2]);v=(d-c[h][3])*p+c[h][3];break}}r=l[0];var b={z:1e3};1===e.viewName?(l[1]-=(v-e.oriData.minZ)/(e.oriData.maxZ-e.oriData.minZ)*f,b.shape={cx:r,cy:l[1],r:1.5}):(b.shape={cx:0,cy:0,r:1.5},b.position=e.charObj.convertToPixel("grid",[g,v]));var D=new u.a.graphic.Circle(b);e.zr.add(D),e.zrDrawElement.hoverDots.push(D)})),this.zrDrawElement.tooltip=new u.a.graphic.Text({});var b="",D=o.items[s][3];b="<td>".concat(D.toString().length>=6?h(D):D,'</td><td style="text-align:center;">').concat(this.formateNUmber(o.step),"</td><td>").concat(this.formateNUmber(o.relative_time.toFixed(0))).concat(a,"</td><td>").concat(this.dealrelativeTime(new Date(1e3*o.wall_time).toString()),"</td>");var w=document.querySelector("#tipTr");w.innerHTML=b;var C=document.getElementById(this.itemId);if(C)if(this.fullScreen){var T=document.querySelector("#echartTip").clientWidth,N=document.querySelector("#echartTip").clientHeight,S=document.body.scrollWidth,x=document.body.scrollHeight,y=document.querySelector(".cl-show-data-content").scrollTop,k=document.querySelector(".cl-show-data-content").offsetTop;N+t.event.y+20>x&&x>N?document.querySelector("#echartTip").style.top="".concat(t.event.y+y-N-20-k,"px"):document.querySelector("#echartTip").style.top="".concat(t.event.y+y+20-k,"px"),T+t.event.x+80>S&&S>T?document.querySelector("#echartTip").style.left="".concat(t.event.x-T-20,"px"):document.querySelector("#echartTip").style.left="".concat(t.event.x+20,"px")}else{var A=C.parentNode.parentNode.parentNode.parentNode.clientWidth,_=C.parentNode.parentNode.parentNode.parentNode.clientHeight,I=C.parentNode.parentNode.parentNode.parentNode.offsetLeft,F=C.parentNode.parentNode.parentNode.parentNode.offsetTop,E=document.querySelector("#echartTip");E.style.top="".concat(F+_-60,"px"),I>E.clientWidth?E.style.left="".concat(I-E.clientWidth,"px"):E.style.left="".concat(I+A,"px")}if(this.zrDrawElement.tooltipX=new u.a.graphic.Text({position:[r,m.y+m.height],style:{text:g.toString().length>=6?g.toExponential(3):Math.round(1e3*g)/1e3,textFill:"#fff",textAlign:"center",fontSize:12,textBackgroundColor:"#333",textBorderWidth:2,textPadding:[5,7],rich:{}},z:2e3}),this.zr.add(this.zrDrawElement.tooltipX),1===this.viewName&&p&&p.length){var $="";null!==n&&($=this.yAxisFormatter(o.step)),this.zrDrawElement.tooltipY=new u.a.graphic.Text({position:[m.x+m.width,p[p.length-1][1]],style:{text:$,textFill:"#fff",textVerticalAlign:"middle",fontSize:12,textBackgroundColor:"#333",textBorderWidth:2,textPadding:[5,7],rich:{}},z:2e3}),this.zr.add(this.zrDrawElement.tooltipY)}}},findNearestValue:function(t){var e=this;if(t&&t.length&&this.charObj&&this.oriData){var a=this.charObj.convertFromPixel("grid",t);if(a&&a.length){var i=null,r=null,s=1/0,n=-1/0,l=1/0,o=this.charObj.getModel().getComponent("grid",0).coordinateSystem.getRect(),c=o.y-10,u=a[0];if(this.fullData.forEach((function(i,s){for(var o,h,m=0;m<i.items.length-1;m++){var d=i.items[m],f=i.items[m+1],p=f[2],g=f[3];if(d.length>=4&&d[2]<u&&p>=u){var v=(u-d[2])/(p-d[2]);h=(g-d[3])*v+d[3],o=Math.abs(a[1]-h);break}}if(0===e.viewName&&o<l)l=o,r=s;else if(1===e.viewName){var b=e.getCoord([u,i.step]),D=b[1];b[1]-=(h-e.oriData.minZ)/(e.oriData.maxZ-e.oriData.minZ)*c,t[1]>b[1]&&t[1]<D&&D>n&&(n=D,r=s)}})),null===r&&1===this.viewName&&this.fullData.forEach((function(t,e){e>=a[1]&&(r=null===r?e:Math.min(r,e))})),null!==r){var h=this.fullData[r].items;h.forEach((function(t,e){var r=Math.abs(t[2]-a[0]);r<s&&(s=r,i=e)})),i=0===i?1:i===h.length-1?h.length-2:i}return{binIndex:i,yIndex:r}}}},getGrientColor:function(t,e,a){for(var i=this.formatColor(t),r=this.formatColor(e),s=(r[0]-i[0])/a,n=(r[1]-i[1])/a,l=(r[2]-i[2])/a,o=[],c=0;c<a;c++){var u=parseInt(s*c+i[0]),h=parseInt(n*c+i[1]),m=parseInt(l*c+i[2]),d=this.formatColorToHex("rgb(".concat(u,",").concat(h,",").concat(m,")"));o.push(d)}return o},formatColor:function(t){if(t){var e=/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,a=t.toLowerCase().slice(1);if(e.test(a)){var i="";if(3===a.length){for(var r=0;r<3;r++)i+=i.slice(r,r+1).concat(i.slice(r,r+1));a=i}for(var s=[],n=0;n<6;n+=2)s.push(parseInt("0x".concat(a.slice(n,n+2))));return s}return a}},formatColorToHex:function(t){var e=/^(rgb|RGB)/g;if(e.test(t)){for(var a=t.replace(/(?:(|)|rgb|RGB)*/g,"").split(","),i="",r=0;r<a.length;r++){var s=Number(a[r]).toString(16);s=s<10?"0".concat(s):s,"0"===s&&(s+=s),i+=s}return 6!==i.length&&(i=t),i}},getValue:function(t,e,a){return t[e][a]},clearZrData:function(){this.zr&&(this.removeTooltip(),this.zr.off("mouseout","mousemove"),this.zr=null)},updateHistogramData:function(){var t=this;this.$nextTick((function(){t.requestError&&(t.requestError=!1,t.viewResizeFlag=!0),t.formatDataToChar(),t.updateSampleData(),t.sampleEventBind()}))},showRequestErrorMessage:function(t){this.errorMsg=t,this.requestError=!0}},destroyed:function(){this.clearZrData()}},p=f,g=(a("345f"),a("2877")),v=Object(g["a"])(p,l,o,!1,null,null,null),b=v.exports,D=a("3778"),w=a("7e02"),C={mixins:[w["a"]],data:function(){return{tagList:[],trainingJobId:this.$route.query.train_id,summaryPath:this.$route.query.summaryPath,originDataArr:[],initOver:!1,curFullTagDic:{},multiSelectedTagNames:{},curFilterSamples:[],curPageArr:[],pageIndex:0,pageSizes:[6],pageNum:6,dataTypeChangeTimer:null,viewNameChangeTimer:null,axisNameChangeTimer:null,curDataType:0,curViewName:1,curAxisName:0,chartTipFlag:!1,columnLimitNum:1e3}},computed:{},components:{multiselectGroupComponents:s["a"],gridTableComponents:n["a"],histogramUntil:b},watch:{},destroyed:function(){window.removeEventListener("resize",this.resizeCallback),this.originDataArr.forEach((function(t){t.sliderChangeTimer&&(clearTimeout(t.sliderChangeTimer),t.sliderChangeTimer=null)})),this.charResizeTimer&&(clearTimeout(this.charResizeTimer),this.charResizeTimer=null),this.dataTypeChangeTimer&&(clearTimeout(this.dataTypeChangeTimer),this.dataTypeChangeTimer=null),this.viewNameChangeTimer&&(clearTimeout(this.viewNameChangeTimer),this.viewNameChangeTimer=null),this.axisNameChangeTimer&&(clearTimeout(this.axisNameChangeTimer),this.axisNameChangeTimer=null)},mounted:function(){this.init(),window.addEventListener("resize",this.resizeCallback,!1)},methods:{resizeCallback:function(){var t=this;this.charResizeTimer&&(clearTimeout(this.charResizeTimer),this.charResizeTimer=null),this.charResizeTimer=setTimeout((function(){t.curPageArr.forEach((function(e){var a=t.$refs[e.ref];a&&a[0].resizeView()}))}),500)},init:function(){this.getOriginData(),this.isTimeReload&&this.autoUpdateSamples()},jumpToTrainDashboard:function(){this.$router.push({path:"/train-manage/training-dashboard",query:{id:this.trainingJobId}})},getOriginData:function(){var t=this,e={plugin_name:"tensor",train_id:this.trainingJobId};D["a"].getSingleTrainJob(e).then((function(e){if(e&&e.data&&e.data.train_jobs&&e.data.train_jobs.length){var a=e.data.train_jobs[0];if(a.tags){var i=[],r=[];a.tags.forEach((function(e,a){t.curFullTagDic[e]||(t.curFullTagDic[e]=!0,i.push({label:e,checked:!0,show:!0}),r.push({tagName:e,summaryName:t.trainingJobId,show:!1,showLoading:!1,sliderValue:0,newDataFlag:!0,totalStepNum:0,curStep:"",curTime:"",curDims:"",curDataType:"",fullScreen:!1,ref:e,sliderChangeTimer:null,curData:[],formateData:[],fullData:[],filterStr:"",curMartixShowSliderValue:0}))})),1===r.length&&(r[0].fullScreen=!0),t.tagList=i,t.originDataArr=r,t.$nextTick((function(){t.multiSelectedTagNames=t.$refs.multiselectGroupComponents.updateSelectedDic(),t.initOver=!0,t.updateTagInPage()}))}}else t.initOver=!0}),this.requestErrorCallback).catch((function(e){t.initOver=!0,t.$message.error(t.$t("public.dataError"))}))},filterChange:function(t,e){e.showLoading=!0,e.filterStr="[".concat(t.toString(),"]"),e.newDataFlag=!0,this.freshtMartixData(e)},tagSelectedChanged:function(t){t&&(this.multiSelectedTagNames=t,this.pageIndex=0,this.updateTagInPage())},currentPageChange:function(t){this.pageIndex=t-1,this.getCurPageDataArr()},getCurPageDataArr:function(t){var e=this;t||this.curPageArr.forEach((function(t){if(t.show=!1,1===e.curDataType&&1===e.curViewName){var a=e.$refs[t.ref];a&&a[0].clearZrData()}}));for(var a=this.pageIndex*this.pageNum,i=a+this.pageNum,r=[],s=a;s<i;s++){var n=this.curFilterSamples[s];n&&(n.show=!0,r.push(n))}this.curPageArr=r,this.freshCurPageData()},freshCurPageData:function(t){var e=this;this.curPageArr.forEach((function(a,i){if(a&&a.tagName){var r=e.curDataType;r?e.getHistogramData(a):(a.newDataFlag=!!t||a.newDataFlag,e.getMartixData(a))}}))},initFilterStr:function(t){if(!t)return[];for(var e=t.length-2,a=[],i=0;i<t.length;i++)a.push(i>=e?":":"0");if(a.length){var r=a.length-1,s=a[r];s&&t[r]>this.columnLimitNum&&(a[r]="0:".concat(this.columnLimitNum))}return"[".concat(a.toString(),"]")},getHistogramData:function(t){var e=this,a={train_id:this.trainingJobId,tag:t.tagName,detail:"histogram"};D["a"].getTensorsSample(a).then((function(a){if(t.showLoading=!1,a&&a.data&&e.curDataType&&a.data.tensors&&a.data.tensors.length){var i=JSON.parse(JSON.stringify(a.data.tensors[0]));t.summaryName=i.train_id,t.curData=e.formHistogramOriData(i),e.$nextTick((function(){var a=e.$refs[t.ref];a&&a[0].updateHistogramData()}))}}),(function(a){e.freshDataErrorCallback(a,t,!1)}))},getMartixData:function(t){var e=this,a={train_id:this.trainingJobId,tag:t.tagName,detail:"stats"};D["a"].getTensorsSample(a).then((function(a){if(a&&a.data&&!e.curDataType)if(a.data.tensors.length){var i=JSON.parse(JSON.stringify(a.data.tensors[0]));if(t.summaryName=i.train_id,!i.values.length)return t.fullData=[],t.formateData=[],t.curData=[],t.curTime="",t.curDims="",t.curDataType="",t.curStep="",t.sliderValue=0,t.totalStepNum=0,e.clearMartixData(t),void(t.showLoading=!1);var r=t.totalStepNum;t.totalStepNum=i.values.length-1,t.sliderValue===r&&(t.sliderValue=t.totalStepNum),t.sliderValue>t.totalStepNum&&(t.sliderValue=t.totalStepNum),t.fullData=i.values,t.formateData=t.fullData[t.sliderValue];var s=t.curStep;t.curStep=t.formateData.step,t.filterStr||(t.filterStr=e.initFilterStr(t.formateData.value.dims),t.newDataFlag=!0),t.curStep!==s&&(t.newDataFlag=!0),t.curTime=e.dealrelativeTime(new Date(1e3*t.formateData.wall_time).toString()),t.curDataType=t.formateData.value.data_type,t.curDims=JSON.stringify(t.formateData.value.dims),e.freshtMartixData(t)}else t.showLoading=!1;else t.showLoading=!1}),(function(){t.fullData=[],t.formateData=[],t.curData=[],t.curTime="",t.curDims="",t.curDataType="",t.curStep="",t.sliderValue=0,t.totalStepNum=0,e.clearMartixData(t),t.showLoading=!1}))},freshtMartixData:function(t){var e=this,a={train_id:this.trainingJobId,tag:t.tagName,detail:"data",step:t.curStep,dims:encodeURIComponent(t.filterStr)};t.curMartixShowSliderValue=t.sliderValue,D["a"].getTensorsSample(a).then((function(a){if(t.showLoading=!1,a&&a.data&&!e.curDataType&&a.data.tensors.length){var i=a.data.tensors[0],r=i.values[0],s={};r?(t.curData=r.value.data instanceof Array?r.value.data:[r.value.data],s=r.value.statistics):t.curData=[[]];var n=null;e.$nextTick((function(){n=e.$refs[t.ref],n&&n[0].updateGridData(t.newDataFlag,r.value.dims,s,t.filterStr),t.newDataFlag=!1}))}}),(function(a){e.freshDataErrorCallback(a,t,!0)}))},freshDataErrorCallback:function(t,e,a){var i=this,r=!1,s="";t.response&&t.response.data&&t.response.data.error_code&&("50545013"===t.response.data.error_code.toString()||"50545014"===t.response.data.error_code.toString()||"50545016"===t.response.data.error_code.toString())&&(r=!0,s=this.$t("error")[t.response.data.error_code]),a?this.clearMartixData(e,r,s):this.$nextTick((function(){var t=i.$refs[e.ref];t&&t[0].showRequestErrorMessage(s)})),e.showLoading=!1},clearMartixData:function(t,e,a){var i=this;t.curData=[],t.newDataFlag=!0;var r=null;this.$nextTick((function(){r=i.$refs[t.ref],r&&(e?r[0].showRequestErrorMessage(a,t.formateData.value.dims,t.filterStr):r[0].updateGridData())}))},dataTypeChange:function(){var t=this;this.dataTypeChangeTimer&&(clearTimeout(this.dataTypeChangeTimer),this.dataTypeChangeTimer=null),this.dataTypeChangeTimer=setTimeout((function(){t.freshCurPageData(!0)}),500)},timeTypeChange:function(t){var e=this;this.axisNameChangeTimer&&(clearTimeout(this.axisNameChangeTimer),this.axisNameChangeTimer=null),this.axisNameChangeTimer=setTimeout((function(){e.curPageArr.forEach((function(t){var a=e.$refs[t.ref];a&&a[0].updateHistogramData()}))}),500)},viewTypeChange:function(t){var e=this;this.viewNameChangeTimer&&(clearTimeout(this.viewNameChangeTimer),this.viewNameChangeTimer=null),this.viewNameChangeTimer=setTimeout((function(){e.curPageArr.forEach((function(t){var a=e.$refs[t.ref];a&&a[0].updateHistogramData()}))}),200)},dealrelativeTime:function(t){var e=t.split(" "),a="".concat(e[0]," ").concat(e[1]," ").concat(e[2],", ").concat(e[4]);return a},updateTagInPage:function(t){var e=this,a=[];this.originDataArr.forEach((function(t){e.multiSelectedTagNames[t.tagName]&&a.push(t)})),this.curFilterSamples=a,this.getCurPageDataArr(t)},clearAllData:function(){var t=this;1===this.curDataType&&1===this.curViewName&&this.originDataArr.forEach((function(e){var a=t.$refs[e.ref];a&&a[0].clearZrData()})),this.tagList=[],this.originDataArr=[],this.curFullTagDic={},this.multiSelectedTagNames={},this.curFilterSamples=[],this.pageIndex=0,this.curPageArr=[],this.$nextTick((function(){t.$refs.multiselectGroupComponents.updateSelectedDic()}))},requestErrorCallback:function(t){this.initOver||(this.initOver=!0),this.isReloading&&(this.$store.commit("setIsReload",!1),this.isReloading=!1),t.response&&t.response.data?this.clearAllData():"ECONNABORTED"===t.code&&/^timeout/.test(t.message)||this.clearAllData()},updateAllData:function(t){var e=this,a={plugin_name:"tensor",train_id:this.trainingJobId};D["a"].getSingleTrainJob(a,t).then((function(t){if(e.isReloading&&(e.$store.commit("setIsReload",!1),e.isReloading=!1),t&&t.data&&t.data.train_jobs&&t.data.train_jobs.length&&t.data.train_jobs[0].tags){var a=t.data.train_jobs[0],i=e.removeNoneExistentData(a),r=e.checkNewDataAndComplete(a);e.$nextTick((function(){e.multiSelectedTagNames=e.$refs.multiselectGroupComponents.updateSelectedDic(),e.updateTagInPage(!r&&!i)}))}else e.clearAllData()}),this.requestErrorCallback).catch((function(t){e.$message.error(e.$t("public.dataError"))}))},removeNoneExistentData:function(t){if(!t||!t.tags)return!1;var e={},a=!1;t.tags.forEach((function(t){e[t]=!0}));for(var i=this.tagList.length,r=i-1;r>=0;r--)e[this.tagList[r].label]||(a=!0,delete this.curFullTagDic[this.tagList[r].label],this.tagList.splice(r,1));for(var s=this.originDataArr.length,n=s-1;n>=0;n--)e[this.originDataArr[n].tagName]||(a=!0,this.originDataArr.splice(n,1));return a},checkNewDataAndComplete:function(t){var e=this;if(!t||!t.tags)return!1;var a=!1;return t.tags.forEach((function(t){e.curFullTagDic[t]||(e.tagList.push({label:t,checked:!0,show:!1}),e.originDataArr.push({tagName:t,summaryName:e.trainingJobId,show:!1,showLoading:!1,sliderValue:0,newDataFlag:!0,totalStepNum:0,curStep:"",curTime:"",curDims:"",curDataType:"",fullScreen:!1,ref:t,sliderChangeTimer:null,curData:[],formateData:[],fullData:[],filterStr:"",curMartixShowSliderValue:0}),e.curFullTagDic[t]=!0,a=!0)})),a},toggleFullScreen:function(t){var e=this;t&&(t.fullScreen=!t.fullScreen,this.$nextTick((function(){var a=e.$refs[t.ref];a&&(a[0].resizeView(),a[0].$el.scrollIntoView())})))},sliderChange:function(t,e){var a=this;e.sliderChangeTimer&&(clearTimeout(e.sliderChangeTimer),e.sliderChangeTimer=null),e.fullData&&e.fullData[t]&&(e.newDataFlag=!0,e.formateData=e.fullData[t],e.curStep=e.formateData.step,e.curTime=this.dealrelativeTime(new Date(1e3*e.formateData.wall_time).toString()),e.curDataType=e.formateData.value.data_type,e.curDims=JSON.stringify(e.formateData.value.dims),e.curMartixShowSliderValue!==t&&(e.sliderChangeTimer=setTimeout((function(){e.showLoading=!0,a.freshtMartixData(e)}),500)))},formHistogramOriData:function(t){var e=[],a=t.values||[],i=a.length?a[0].wall_time:0;return a.forEach((function(t,a){var r=t.step.toString(),s={wall_time:t.wall_time,relative_time:t.wall_time-i,step:r,items:[]},n=[];if(t.value.histogram_buckets.forEach((function(e){var a=e[0]+e[1]/2,i=n.filter((function(t){return t[0]===a}));i.length||n.push([t.wall_time,r,a,Math.floor(e[2])])})),n.sort((function(t,e){return t[0]-e[0]})),n.length){var l=n[0][2],o=n[n.length-1][2],c=[[t.wall_time,r,l,0]].concat(n,[[t.wall_time,r,o,0]]);s.items=c,e.push(s)}})),e},chartTipFlagChange:function(t){this.chartTipFlag=t}}},T=C,N=(a("caf5"),Object(g["a"])(T,i,r,!1,null,null,null));e["default"]=N.exports},a95e:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cl-checklist-container"},[a("div",{staticClass:"select-content"},[a("div",{staticClass:"title mr24"},[t._v(t._s(t.componentsLabel.title||t.$t("components.tagSelectTitle")))]),a("div",{staticClass:"select-all mr24",on:{click:t.listSelectAll}},[a("span",{staticClass:"multiCheckBox-border multi-check-border",class:t.operateSelectAll?"checkbox-checked":"checkbox-unchecked"}),a("span",{staticClass:"label-item select-disable"},[t._v(t._s(t.$t("components.selectAll")))])]),t.listFullScreen?a("el-input",{staticClass:"search-input-item",attrs:{placeholder:t.componentsLabel.placeholder||t.$t("components.tagFilterPlaceHolder")},on:{input:t.listFilter},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}}):t._e(),t.listFullScreen?t._e():a("div",{ref:t.itemId,staticClass:"select-item-content"},t._l(t.checkListArr,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],key:i,staticClass:"select-item",class:t.isLimit&&t.selectedNumber>=t.limitNum&&!e.checked?"item-disable":"item-able",on:{click:function(a){return t.listItemClick(e)}}},[a("span",{staticClass:"multiCheckBox-border multi-check-border",class:e.checked?"checkbox-checked":"checkbox-unchecked"}),a("span",{staticClass:"label-item"},[a("el-tooltip",{attrs:{effect:"dark","popper-class":"tooltip-show-content",content:e.label,placement:"top"}},[a("span",{staticClass:"select-disable"},[e.checked&&"NOT_IN_CACHE"===e.loading?a("i",{staticClass:"el-icon-time",attrs:{title:t.$t("trainingDashboard.waitLoading")}}):t._e(),e.checked&&"CACHING"===e.loading?a("i",{staticClass:"el-icon-loading",attrs:{title:t.$t("trainingDashboard.loadingTip")}}):t._e(),t._v(" "+t._s(e.label))])])],1)])})),0),t.overRowFlag||t.searchInput?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listFullScreen,expression:"!listFullScreen"}],staticClass:"select-content-open select-disable",on:{click:t.toggleListFullScreen}},[t._v(t._s(t.$t("components.open")))]):t._e(),t.overRowFlag||t.listFullScreen?a("div",{directives:[{name:"show",rawName:"v-show",value:t.listFullScreen,expression:"listFullScreen"}],staticClass:"select-content-open select-disable",on:{click:t.toggleListFullScreen}},[t._v(t._s(t.$t("components.close")))]):t._e()],1),t.listFullScreen?a("div",{staticClass:"select-content-all"},t._l(t.checkListArr,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],key:i,staticClass:"select-item",class:t.isLimit&&t.selectedNumber>=t.limitNum&&!e.checked?"item-disable":"item-able",on:{click:function(a){return t.listItemClick(e)}}},[a("span",{staticClass:"multiCheckBox-border multi-check-border",class:e.checked?"checkbox-checked":"checkbox-unchecked"}),a("span",{staticClass:"label-item"},[a("el-tooltip",{attrs:{effect:"dark","popper-class":"tooltip-show-content",content:e.label,placement:"top"}},[a("span",{staticClass:"select-disable"},[e.checked&&"NOT_IN_CACHE"===e.loading?a("i",{staticClass:"el-icon-time",attrs:{title:t.$t("trainingDashboard.waitLoading")}}):t._e(),e.checked&&"CACHING"===e.loading?a("i",{staticClass:"el-icon-loading",attrs:{title:t.$t("trainingDashboard.loadingTip")}}):t._e(),t._v(" "+t._s(e.label))])])],1)])})),0):t._e()])},r=[],s=(a("4160"),a("45fc"),a("a9e3"),a("4d63"),a("ac1f"),a("25f0"),a("159b"),{props:{checkListArr:Array,isLimit:{type:Boolean,default:!1},limitNum:{type:Number,default:0},componentsLabel:{type:Object,default:function(){return{title:"",placeholder:""}}}},data:function(){return{listFullScreen:!1,overRowFlag:!1,searchInputTimer:null,searchInput:"",valiableSearchInput:"",multiSelectedItemNames:{},operateSelectAll:!0,perSelectItemMarginBottom:1,selectedNumber:0,itemId:"",searching:!1}},computed:{},watch:{},mounted:function(){this.init()},methods:{init:function(){var t=this;this.itemId="".concat((new Date).getTime())+"".concat(this.$store.state.multiSelectedGroupCount),this.$store.commit("multiSelectedGroupComponentNum"),this.$nextTick((function(){t.resizeCallback()})),window.addEventListener("resize",this.resizeCallback,!1)},resizeCallback:function(){var t=this.$refs[this.itemId];t&&(this.overRowFlag=t.clientHeight<t.scrollHeight-this.perSelectItemMarginBottom)},listSelectAll:function(){var t=this;if(this.operateSelectAll=!this.operateSelectAll,this.multiSelectedItemNames={},this.operateSelectAll)if(this.isLimit)for(var e=this.checkListArr.length,a=0;a<e;a++){var i=this.checkListArr[a];this.selectedNumber>=this.limitNum?i.checked&&i.show&&(this.multiSelectedItemNames[i.label]=!0):i.checked?i.show&&(this.multiSelectedItemNames[i.label]=!0):i.show&&(i.checked=!0,this.multiSelectedItemNames[i.label]=!0,this.selectedNumber++)}else this.checkListArr.forEach((function(e){e.show&&(e.checked=!0,t.multiSelectedItemNames[e.label]=!0)}));else this.checkListArr.forEach((function(e){e.show&&e.checked&&(t.selectedNumber--,e.checked=!1)}));this.$emit("selectedChange",this.multiSelectedItemNames)},listFilter:function(){var t=this;this.searching=!0,this.searchInputTimer&&(clearTimeout(this.searchInputTimer),this.searchInputTimer=null),this.searchInputTimer=setTimeout((function(){var e;t.searching=!1;try{e=new RegExp(t.searchInput)}catch(i){return void t.$message.warning(t.$t("public.regIllegal"))}t.valiableSearchInput=t.searchInput,t.multiSelectedItemNames={},t.selectedNumber=0;var a=!0;t.checkListArr.forEach((function(i){i.checked&&t.selectedNumber++,e.test(i.label)?(i.show=!0,i.checked?t.multiSelectedItemNames[i.label]=!0:a=!1):i.show=!1})),t.isLimit&&!a&&(a=t.selectedNumber>=t.limitNum||t.selectedNumber>=t.checkListArr.length),t.operateSelectAll=a,t.$emit("selectedChange",t.multiSelectedItemNames)}),200)},listItemClick:function(t){if(!(!t||this.isLimit&&this.selectedNumber>=this.limitNum&&!t.checked)){t.checked=!t.checked,t.checked?(this.multiSelectedItemNames[t.label]=!0,this.selectedNumber++):this.multiSelectedItemNames[t.label]&&(delete this.multiSelectedItemNames[t.label],this.selectedNumber--);var e=!0;this.checkListArr.some((function(t){if(t.show&&!t.checked)return e=!1,!0})),this.isLimit&&!e&&(e=this.selectedNumber>=this.limitNum||this.selectedNumber>=this.checkListArr.length),this.operateSelectAll=e,this.$emit("selectedChange",this.multiSelectedItemNames)}},toggleListFullScreen:function(){var t=this;this.listFullScreen=!this.listFullScreen,this.listFullScreen||this.$nextTick((function(){t.resizeCallback()}))},updateSelectedDic:function(){var t,e=this;if(this.searching)return this.multiSelectedItemNames;try{t=new RegExp(this.searchInput)}catch(n){t=new RegExp(this.valiableSearchInput)}this.multiSelectedItemNames={},this.selectedNumber=0;var a=!0;if(this.isLimit){for(var i=this.checkListArr.length,r=0;r<i;r++){var s=this.checkListArr[r];s.checked&&(this.selectedNumber>=this.limitNum?s.checked=!1:this.selectedNumber++),t.test(s.label)?(s.show=!0,s.checked&&(this.multiSelectedItemNames[s.label]=!0)):s.show=!1}a=this.selectedNumber>=this.limitNum||this.selectedNumber>=this.checkListArr.length}else this.checkListArr.forEach((function(i){t.test(i.label)?(i.show=!0,i.checked?e.multiSelectedItemNames[i.label]=!0:a=!1):i.show=!1}));return this.operateSelectAll=a,this.resizeCallback(),this.multiSelectedItemNames}},destroyed:function(){window.removeEventListener("resize",this.resizeCallback),this.searchInputTimer&&(clearTimeout(this.searchInputTimer),this.searchInputTimer=null)}}),n=s,l=(a("82b9"),a("2877")),o=Object(l["a"])(n,i,r,!1,null,null,null);e["a"]=o.exports},aaf7:function(t,e,a){},c8d2:function(t,e,a){var i=a("d039"),r=a("5899"),s="​᠎";t.exports=function(t){return i((function(){return!!r[t]()||s[t]()!=s||r[t].name!==t}))}},c975:function(t,e,a){"use strict";var i=a("23e7"),r=a("4d64").indexOf,s=a("a640"),n=a("ae40"),l=[].indexOf,o=!!l&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:o||!c||!u},{indexOf:function(t){return o?l.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},caf5:function(t,e,a){"use strict";a("aaf7")},cd2f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cl-slickgrid-container"},[a("div",{staticClass:"data-show-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.incorrectData,expression:"incorrectData"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.$t("components.gridIncorrectDataError"))+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.incorrectData&&t.requestError,expression:"!incorrectData && requestError"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.errorMsg)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.fullData.length&&t.updated&&!t.incorrectData&&!t.requestError,expression:"!fullData.length && updated && !incorrectData && !requestError"}],staticClass:"error-msg-container"},[t._v(" "+t._s(t.$t("components.gridTableNoData"))+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:!!t.fullData.length&&!t.incorrectData,expression:"!!fullData.length && !incorrectData"}],staticClass:"grid-item",attrs:{id:t.itemId}})]),t.showOperate&&(t.fullData.length||t.requestError)?a("div",{staticClass:"operate-container"},[a("div",{staticClass:"filter-container",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.filterChange(e)}}},[a("div",{staticClass:"filter-input-title"},[t._v(t._s(t.$t("components.dimsFilterInputTitle"))+" "),a("span",{staticClass:"el-icon-info",attrs:{title:t.$t("components.dimsFilterInputTip")}})]),t._l(t.filterArr,(function(e,i){return a("div",{key:i},[a("el-input",{staticClass:"filter-input",class:[e.showError?"error-border":"",t.fullScreen?"long-input":"short-input"],model:{value:e.model,callback:function(a){t.$set(e,"model",a)},expression:"item.model"}}),i===t.filterArr.length-1?a("span",{staticClass:"input-behind"},[t._v(t._s(t.$t("symbols.slashes")))]):a("span",{staticClass:"input-behind"},[t._v(t._s(t.$t("symbols.point")))])],1)})),t.filterArr.length?a("el-button",{staticClass:"filter-check",attrs:{size:"mini"},on:{click:t.filterChange}},[a("i",{staticClass:"el-icon-check"})]):t._e(),t.filterCorrect?t._e():a("span",{staticClass:"filter-incorrect-text"},[t._v(t._s(t.$t("components.inCorrectInput")))])],2),a("div",{staticClass:"accuracy-container"},[t._v(" "+t._s(t.$t("components.category"))),a("el-select",{staticClass:"select-category",on:{change:t.accuracyChange},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.categoryArr,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1),t._v(" "+t._s(t.$t("components.gridAccuracy"))+" "),a("span",{staticClass:"el-icon-info",attrs:{title:t.$t("components.accuracyTips")}}),a("el-select",{staticClass:"select-item",on:{change:t.accuracyChange},model:{value:t.accuracy,callback:function(e){t.accuracy=e},expression:"accuracy"}},t._l(t.accuracyArr,(function(t){return a("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})})),1),a("div",{staticClass:"full-screen-icon",class:t.fullScreen?"active-color":"",attrs:{title:t.$t("scalar.fullScreen")},on:{click:t.toggleFullScreen}},[a("i",{staticClass:"el-icon-full-screen"})])],1)]):t._e()])},r=[],s=(a("99af"),a("4160"),a("c975"),a("fb6a"),a("a9e3"),a("b680"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("326d"),a("f411"),a("dc1b"),a("f06f"),a("ed3a"),a("7d72"),a("70a2"),a("3a3f"),{props:{fullData:{type:Array,default:function(){return[]}},showOperate:{type:Boolean,default:!0},fullScreen:{type:Boolean,default:!1},columnLimitNum:{type:Number,default:-1}},data:function(){return{itemId:"",gridObj:null,columnsData:[],columnsLength:0,filterArr:[],formateData:[],formateArr:[],statistics:{},accuracy:5,incorrectData:!1,updated:!1,scrollTop:!1,filterCorrect:!0,requestError:!1,errorMsg:"",viewResizeFlag:!1,accuracyArr:[{label:0,value:0},{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5}],optionObj:{enableColumnReorder:!1,enableCellNavigation:!0,frozenColumn:0,frozenRow:0},tableStartIndex:{rowStartIndex:0,colStartIndex:0},categoryArr:[{label:this.$t("components.value"),value:"value"},{label:this.$t("components.scientificCounting"),value:"science"}],category:"value"}},computed:{},watch:{},mounted:function(){this.init()},methods:{init:function(){this.itemId="".concat((new Date).getTime())+"".concat(this.$store.state.componentsCount),this.$store.commit("componentsNum")},initializeFilterArr:function(t,e){if(this.filterCorrect=!0,e){for(var a=e.slice(1,e.length-1).split(","),i=[],r=[],s=0;s<a.length;s++)if(i.push({model:a[s],max:t[s]-1,showError:!1}),-1!==a[s].indexOf(":")){var n=a[s].split(":");if(n[0]){var l=Number(n[0]);l=l<0?t[s]+l:l,r.push(l)}else r.push(0)}this.filterArr=i,r.length?r.length>=2?this.tableStartIndex={rowStartIndex:r[0],colStartIndex:r[1]}:this.tableStartIndex={rowStartIndex:0,colStartIndex:r[0]}:this.tableStartIndex={rowStartIndex:0,colStartIndex:0}}else this.filterArr=[]},formateColumnsData:function(){var t=this;this.columnsData=[{id:-1,name:" ",field:-1,width:120,headerCssClass:"headerStyle"}];var e=this.formateData[0];e?e.forEach((function(e,a){var i=a+t.tableStartIndex.colStartIndex;t.columnsData.push({id:i,name:i,field:i,width:120,headerCssClass:"headerStyle",formatter:t.formateValueColor})})):this.columnsData=[]},formateValueColor:function(t,e,a,i,r){return e&&a&&!isNaN(a)&&a!==1/0&&a!==-1/0?a<0?'<span class="table-item-span" style="background:rgba(227, 125, 41, '.concat(a/this.statistics.overall_min,')">').concat(a,"</span>"):'<span class="table-item-span" style="background:rgba(0, 165, 167, '.concat(a/this.statistics.overall_max,')">').concat(a,"</span>"):a},formateGridArray:function(){var t=this;this.fullData instanceof Array?this.fullData.length?this.fullData[0]instanceof Array?this.formateData=this.fullData:this.formateData=[this.fullData]:(this.formateData=[[]],this.columnsData=[]):this.formateData=[[this.fullData]];var e=[];this.formateData.forEach((function(a,i){var r={"-1":i+t.tableStartIndex.rowStartIndex};a.forEach((function(e,a){var i=a+t.tableStartIndex.colStartIndex;isNaN(e)?r[i]=e:t.category===t.categoryArr[0].value?r[i]=e.toFixed(t.accuracy):r[i]=e.toExponential(t.accuracy)})),e.push(r)})),this.formateArr=e},updateGrid:function(){var t=this;this.$nextTick((function(){t.gridObj||(t.gridObj=new Slick.Grid("#".concat(t.itemId),t.formateArr,t.columnsData,t.optionObj),t.columnsLength=t.columnsData.length),t.gridObj.setData(t.formateArr,t.scrollTop),t.scrollTop=!1;var e=t.columnsData.length;(t.columnsLength!==e||t.viewResizeFlag)&&(t.gridObj.setColumns(t.columnsData),t.columnsLength=e,t.viewResizeFlag=!1),t.gridObj.render()}))},accuracyChange:function(){this.formateGridArray(),this.requestError||this.incorrectData||this.updateGrid()},filterChange:function(){var t=this,e=!0,a=!1,i=2,r=[],s=[];if(this.filterArr.forEach((function(n,l){var o=n.model.trim();if(isNaN(o))if(-1!==o.indexOf(":")){r.push(l);var c=t.checkCombinatorialInput(n);c?(n.showError=!1,i?i--:a=!0):(n.showError=!0,e=!1)}else n.showError=!0,e=!1;else o<-(n.max+1)||o>n.max||""===o||o%1?(n.showError=!0,e=!1):(n.showError=!1,o=Number(o));s.push(o)})),r.length){var n=r.pop(),l=this.filterArr[n];if(this.columnLimitNum>0&&l&&!l.showError&&l.max>=this.columnLimitNum){var o=this.checkFilterLimitOver(l);o&&(l.showError=!0,e=!1)}}this.filterCorrect=e,a&&e?this.incorrectData=!0:(this.incorrectData=!1,e&&(this.viewResizeFlag=!0,this.$emit("martixFilterChange",s)))},checkFilterLimitOver:function(t){var e=!1,a=t.model.trim(),i=a.split(":"),r=i[0]?i[0]:0,s=i[1]?i[1]:t.max+1;return r=r<0?t.max+Number(r)+1:Number(r),s=s<0?t.max+Number(s)+1:Number(s),s-r>this.columnLimitNum&&(e=!0),e},checkCombinatorialInput:function(t){var e=t.model.trim(),a=e.split(":"),i=a[0],r=a[1],s=2;if(i&&(isNaN(i)||i<-(t+1)||i>t.max))return!1;if(r&&(isNaN(r)||r<=-(t.max+1)||r>t.max+1||!Number(r)))return!1;if(a.length>s)return!1;if(i||r){if(i&&r){var n=i<0?t.max+Number(i)+1:Number(i),l=r<0?t.max+Number(r)+1:Number(r);return!(l<=n)}return!0}return!0},updateGridData:function(t,e,a,i){var r=this;this.updated=!0,this.requestError=!1,this.$nextTick((function(){r.fullData&&r.fullData.length&&(t&&(r.initializeFilterArr(e,i),r.scrollTop=!0),(t||void 0===r.statistics.overall_max)&&(r.statistics=a),r.formateGridArray(),r.formateColumnsData(),r.incorrectData||r.updateGrid())}))},resizeView:function(){var t=this;this.gridObj&&(this.incorrectData||this.requestError?this.viewResizeFlag=!0:this.$nextTick((function(){t.gridObj.resizeCanvas(),t.gridObj.render()})))},toggleFullScreen:function(){this.$emit("toggleFullScreen")},showRequestErrorMessage:function(t,e,a){this.errorMsg=t,!this.filterArr.length&&e&&a&&this.initializeFilterArr(e,a),this.requestError=!0}},destroyed:function(){}}),n=s,l=(a("f11c"),a("2877")),o=Object(l["a"])(n,i,r,!1,null,null,null);e["a"]=o.exports},d4b7:function(t,e,a){},f11c:function(t,e,a){"use strict";a("6265")}}]);