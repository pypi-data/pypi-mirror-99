<!DOCTYPE html>
<html>
{% load static %}
{% load i18n %}
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{{ page_title }}{% endblock title %}</title>
    <meta name="description" content="Printbox 2.0 Dashboard">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" type="text/css" href="{% static 'pbx_admin/vendor/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'pbx_admin/vendor/jquery.dataTables.css' %}">

    <link rel="preload" as="style" href="{% static 'pbx_admin/css/main.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'pbx_admin/css/main.min.css' %}" />

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu+Condensed">
    {% block extra_css %}{% endblock extra_css %}

    <script src="{% static 'pbx_admin/vendor/jquery.js' %}" type="text/javascript"></script>
    <script src="{% static 'pbx_admin/vendor/bootstrap.min.js' %}" type="text/javascript"></script>
    {% block extra_js %}{% endblock extra_js %}
    {% block extra_head %}{% endblock extra_head %}
</head>

<body>
<div>
    {% block instance_messages %}
        <div id="instance-messages">
            {% for msg in instance_messages %}
                <div class="instance-message instance-message-{{ msg.level }}">
                    {{ msg.message|safe }}
                </div>
            {% endfor %}
        </div>
    {% endblock %}

    <div id="content" class="bootstrap">
        {% block bar_messages %}
            {% for message in bar_messages %}
            <div class="alert{% for tag in message.tags_set %} alert-{{ tag }}{% endfor %}">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                {{ message }}
                {% if 'reload' in message.tags %}<a href=".">{% trans 'refresh' %}</a>{% endif %}
            </div>
            {% endfor %}

            <div id="async-tasks">
                {% for task in user.async_tasks.pending %}
                    <div class="alert alert-info" data-id="{{ task.uuid }}">
                        <p class="loading-dots">
                            {{ task.get_actual.bar_message }}
                        </p>
                    </div>
                {% endfor %}
            </div>

            <div id="async-task-modal" class="modal fade" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                      <div class="modal-content">
                          <div class="modal-header">
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                              <h4 class="modal-title" data-target="header">{% trans "Operation successful" %}</h4>
                          </div>
                          <div class="modal-body">
                              <div class="modal-body-text">
                                  <p data-target="body">{% trans "Operation finished successfully." %}</p>
                              </div>
                          </div>
                          <div class="modal-footer">
                              <a class="btn btn-primary" data-target="button">{% trans "OK" %}</a>
                          </div>
                    </div>
                </div>
            </div>

        {% endblock %}

        <ol id="breadcrumbs" class="breadcrumb">
            <li><a href="{% url 'pbx_admin:index' %}" style="font-weight: bold">
                {% trans "Main" as main_name %}{{ main_name|upper }}</a>
            </li>
            {% for name, url in breadcrumbs %}
                <li><a href="{{ url }}" style="font-weight: {% cycle 'normal' 'bold' %}">{{ name | upper }}</a></li>
            {% endfor %}
        </ol>

        {% if menu_items %}
            <div class="col-lg-2 col-md-3">
                <div class="tabs-menu list-group">
                    {% for url, name in menu_items %}
                        <a href="{{ url }}" class="list-group-item {% if request.path == url %}active{% endif %} {% if not url %}disabled{% endif %}">{{ name|capfirst }}</a>
                    {% endfor %}
                </div>
            </div>
            <div class="col-lg-10 col-md-9">
        {% endif %}
            {% block main %}

            <div class="panel col-lg-12">
                <div class="panel-heading">
                    {% block panel_heading %}
                    {% endblock panel_heading %}
                </div>
                <div id="content-main">
                    {% block bar_alerts %}
                        {% if bar_alerts %}
                        {% for tags, alert in bar_alerts %}
                        <div class="alert{% if tags %} alert-{{ tags }}{% endif %}" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            {{ alert }}
                        </div>
                        {% endfor %}
                        {% endif %}
                    {% endblock %}
                    {% block content %}
                    {% endblock content %}
                </div>
            </div>
            {% endblock main %}
        {% if menu_items %}
            </div>
        {% endif %}
    </div>
</div>

{% block outer %}{% endblock outer%}

{% include 'pbx_admin/forms/global_modals.html' %}

<script src="{% static 'pbx_admin/vendor/tinymce/js/tinymce/tinymce.min.js' %}"></script>
<script src="{% static 'pbx_admin/js/additional.js' %}"></script>
<script src="{% static 'pbx_admin/js/inlines.js' %}"></script>

{% block extra_bottom_js %}
<script>
    {% for name, value in js_vars.items %}
        var {{ name }} = {{ value }};
    {% endfor %}
</script>
{% endblock extra_bottom_js %}
</body>
</html>
