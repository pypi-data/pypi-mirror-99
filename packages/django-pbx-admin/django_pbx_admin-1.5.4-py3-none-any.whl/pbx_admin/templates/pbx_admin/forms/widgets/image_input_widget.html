{% load i18n %}
{% load static %}

<div id="{{ widget.attrs.id }}-image" class="image-input{% if widget.is_hidden %} hidden{% endif %}">
    <div>
        <img data-target="thumbnail" data-default="{% static 'pbx_admin/img/no-thumbnail.gif' %}"
             onerror='this.onerror = null; this.src="{% if widget.image.url %}{{ widget.image.url }}{% else %}{% static 'pbx_admin/img/no-thumbnail.gif' %}{% endif %}"'
             src="{% if widget.image.thumb_url %}{{ widget.image.thumb_url }}{% else %}{% static 'pbx_admin/img/no-thumbnail.gif' %}{% endif %}"
             alt="{% trans "thumbnail" %}" data-width="{{ widget.image.width }}" data-height="{{ widget.image.height }}" />
    </div>

    {% if widget.image.download_url %}
        <a class="btn btn-default btn-download" href="{{ widget.image.download_url }}">
            <i class="icon-download"></i> {% trans "Download" %}
        </a>
    {% endif %}
    <a class="btn btn-default" href="#{{ widget.attrs.id }}" data-action="upload-image">
        {% trans 'File' %}: <span data-content="label" data-default="{% trans "upload" %}...">
                                {% if widget.image.filename %}{{ widget.image.filename }}{% else %}{% trans "upload" %}...{% endif %}
                            </span>
    </a>
    <span class="image-size">{% if widget.image.width and widget.image.height %} {{ widget.image.width }} x {{ widget.image.height }} px{% endif %}</span>

    {% include "django/forms/widgets/input.html" %}

    {% if widget.remove_input %}
        <div class="checkbox">
            <label for="{{ widget.remove_input.widget.attrs.id }}"
                   title="{% trans "Tick this option and save the form to remove the image" %}">
                {% with widget=widget.remove_input.widget %}
                    {% include "django/forms/widgets/input.html" %}
                {% endwith %}
                {% trans "Remove image" %}
            </label>
        </div>
    {% endif %}
</div>
