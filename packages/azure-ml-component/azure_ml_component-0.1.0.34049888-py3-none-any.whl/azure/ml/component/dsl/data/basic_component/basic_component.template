import sys
from pathlib import Path

from azure.ml.component.dsl._component import ComponentExecutor, InputPath, OutputPath
from azure.ml.component import dsl


@dsl._component(
    'DSL_PARAM_DICT'
)
def COMPONENT_NAME(
        output_dir: OutputPath(),
        input_dir: InputPath() = '.',
        str_param='some_string',
):
    print(f'input_dir: {Path(input_dir).resolve()}')
    print(f'str_param: {str_param}')
    output_dir = Path(output_dir)
    with open(output_dir / f"output.txt", 'w') as fout:
        fout.write(str_param)


if __name__ == '__main__':
    ComponentExecutor(COMPONENT_NAME).execute(sys.argv)
