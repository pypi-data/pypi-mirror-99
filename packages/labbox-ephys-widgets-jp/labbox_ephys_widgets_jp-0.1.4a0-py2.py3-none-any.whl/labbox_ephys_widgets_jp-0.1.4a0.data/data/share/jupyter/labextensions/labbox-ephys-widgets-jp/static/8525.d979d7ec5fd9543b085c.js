(self.webpackChunklabbox_ephys_widgets_jp=self.webpackChunklabbox_ephys_widgets_jp||[]).push([[8525],{31222:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(56271),a=n.n(i);const r=e=>a().createElement("span",{style:{color:"gray",cursor:"pointer",textDecoration:"underline"},onClick:e.onClick},e.children)},88493:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(56271),a=n.n(i),r=n(13090),o=n.n(r);const s=e=>{var t,n,r;const{width:s,height:l,initialPosition:c,onChange:m,adjustable:u=!0,positionFromRight:h=!1}=e,[g,d]=(0,i.useState)(c);if(!e.children)throw Error("Unexpected: no props.children");let p,f;if(Array.isArray(e.children)){const t=e.children.filter((e=>void 0!==e));p=t[0],f=t[1]||null}else p=e.children,f=null;if(!f)return a().createElement(p.type,Object.assign({},p.props,{width:s,height:l}));const b=h?s-g:g,y=u?null!==(t=e.gripThickness)&&void 0!==t?t:10:0,w=u?null!==(n=e.gripInnerThickness)&&void 0!==n?n:4:0,T=u?null!==(r=e.gripMargin)&&void 0!==r?r:2:0,v=b-y/2-T,x=s-v-y-2*T;let C={top:0,left:0,width:s,height:l},S={left:0,top:0,width:v,height:l,zIndex:0,overflowY:"auto",overflowX:"hidden"},k={left:v+y+2*T,top:0,width:x,height:l,zIndex:0,overflowY:"auto",overflowX:"hidden"},R={left:0,top:0,width:y+2*T,height:l,backgroundColor:"transparent",cursor:"col-resize",zIndex:9998},E={left:T,top:0,width:y,height:l,background:"rgb(230, 230, 230)",cursor:"col-resize"},j={top:0,left:(y-w)/2,width:w,height:l,background:"gray",cursor:"col-resize"};return a().createElement("div",{className:"splitter",style:Object.assign(Object.assign({},C),{position:"relative"})},a().createElement("div",{key:"child1",style:Object.assign(Object.assign({},S),{position:"absolute"}),className:"SplitterChild"},a().createElement(p.type,Object.assign({},p.props,{width:v,height:l}))),u&&a().createElement(o(),{key:"drag",position:{x:b-y/2-T,y:0},axis:"x",onDrag:(e,t)=>{},onStop:(e,t)=>((e,t)=>{const n=t.x;if(n===b)return;const i=h?s-n:n;d(i),m&&m(i)})(0,t)},a().createElement("div",{style:Object.assign(Object.assign({},R),{position:"absolute"})},a().createElement("div",{style:Object.assign(Object.assign({},E),{position:"absolute"})},a().createElement("div",{style:Object.assign(Object.assign({},j),{position:"absolute"})})))),a().createElement("div",{key:"child2",style:Object.assign(Object.assign({},k),{position:"absolute"}),className:"SplitterChild"},a().createElement(f.type,Object.assign({},f.props,{width:x,height:l}))))}},58226:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(56271);const a=(e,t,n,a)=>{const[r,o]=(0,i.useState)(0);r<0&&console.info(r);const s=(0,i.useRef)({internalState:t,internalStateDispatched:!0,internalStateHistory:[],lastInternalDispatchTimestamp:Number(new Date),dispatchScheduled:!1}),l=(0,i.useCallback)((()=>{if(!s.current.internalStateDispatched){const e=Number(new Date)-s.current.lastInternalDispatchTimestamp;e>a?(n(s.current.internalState),s.current.internalStateDispatched=!0):s.current.dispatchScheduled||(s.current.dispatchScheduled=!0,setTimeout((()=>{s.current.dispatchScheduled=!1,l()}),a-e+1))}}),[a,n]);return(0,i.useEffect)((()=>{if(t!==s.current.internalState){if(s.current.internalStateHistory.filter((e=>e.state===t)).length>0)return;s.current.internalState=t,s.current.internalStateHistory.push({state:t,timestamp:Number(new Date)});const e=Number(new Date);s.current.internalStateHistory=s.current.internalStateHistory.filter((t=>e-t.timestamp<1e4)),o((e=>e+1))}}),[t,l]),[s.current.internalState,(0,i.useMemo)((()=>t=>{const n=e(s.current.internalState,t);if(n!==s.current.internalState){s.current.internalState=n,s.current.internalStateHistory.push({timestamp:Number(new Date),state:n});const e=Number(new Date);s.current.internalStateHistory=s.current.internalStateHistory.filter((t=>e-t.timestamp<1e4)),s.current.lastInternalDispatchTimestamp=Number(new Date),s.current.internalStateDispatched=!1,l(),o((e=>e+1))}}),[e,l])]}},76827:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(81410),a=n.n(i),r=n(56271);const o={data:{},activeFetches:{}},s=(e,t)=>{switch(t.type){case"clear":return o;case"startFetch":return Object.assign(Object.assign({},e),{activeFetches:Object.assign(Object.assign({},e.activeFetches),{[t.queryHash]:!0})});case"setData":return Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{[t.queryHash]:t.data}),activeFetches:Object.assign(Object.assign({},e.activeFetches),{[t.queryHash]:!1})});default:throw Error("Unexpected action in fetchCacheReducer")}},l=e=>a()(e),c=e=>{const[t,n]=(0,r.useState)(0);t<0&&console.info(t);const i=(0,r.useRef)(e),[a,c]=(0,r.useReducer)(s,o),m=(0,r.useRef)({});(0,r.useEffect)((()=>{e!==i.current&&(i.current=e,c({type:"clear"}))}),[e]);const u=(0,r.useMemo)((()=>e=>{const t=l(e),i=a.data[t];return void 0===i&&(m.current[t]=e,n((e=>e+1))),i}),[a.data]),h=(0,r.useMemo)((()=>t=>{const n=l(t);void 0===a.data[n]&&(a.activeFetches[n]||(c({type:"startFetch",queryHash:n}),e(t).then((e=>{c({type:"setData",queryHash:n,data:e})})).catch((e=>{console.warn(e),console.warn("Problem fetching data",t)}))))}),[a.data,a.activeFetches,e]);return(0,r.useEffect)((()=>{const e=Object.keys(m.current);if(0!==e.length){for(let t of e)h(m.current[t]);m.current={}}})),(0,r.useMemo)((()=>({get:u})),[u])}},48709:(e,t,n)=>{"use strict";n.d(t,{Z:()=>V});var i=n(56271),a=n.n(i),r=n(12105),o=n(16213),s=n(45157);const l={},c=(e,t,n)=>{const{currentTime:i,timeRange:a,width:r,height:o,margins:l}=t;if(!a)return;if(e.wipe(),null===i)return;if(i<a.min)return;if(i>a.max)return;const c=(0,s.As)((e=>{const t=(e[0]-a.min)/(a.max-a.min),n=e[1];return[l.left+t*(r-l.left-l.right),o-l.bottom-n*(o-l.bottom-l.top)]}));e.transform(c).drawLine(i,0,i,1,{color:"blue",width:2})},m=(e,t)=>{e.repaintImmediate()},u=()=>new o.Fw(c,m,l);var h=n(17872);const g=e=>new Promise((t=>setTimeout(t,e)));const d={timeRange:null,transformations:[],inverseTransformations:[],yAxisTransformations:[],yAxisWidths:[],yAxisHeights:[],anchorTimepoint:null,dragging:!1,captureWheel:!1,paintStatus:{paintCode:0,completenessFactor:.2}},p=(e,t,n)=>{return i=void 0,a=void 0,o=function*(){const{panels:i,timeRange:a}=t;if(!a)return;if(0===i.length)return;n.paintStatus.paintCode++;const r=n.paintStatus.paintCode;for(let o=1;o<=2;o++){let s=n.paintStatus.completenessFactor;e.useOffscreenCanvas(t.width,t.height),1===o?e.wipe():2===o&&(s=1);const l=Number(new Date);for(let t=0;t<i.length;t++){const l=i[t],c=e.transform(n.transformations[t]),m=e.transform(n.yAxisTransformations[t]);if(l.setTimeRange(a),l.paint(c,s),l.paintYAxis&&l.paintYAxis(m,n.yAxisWidths[t],n.yAxisHeights[t]),2===o&&(yield g(0),r!==n.paintStatus.paintCode))return}const c=Number(new Date)-l;if(1===o&&c){t.onRepaintTimeEstimate(c);const e=40;n.paintStatus.completenessFactor=n.paintStatus.completenessFactor*e/c,n.paintStatus.completenessFactor=Math.min(1,Math.max(.15,n.paintStatus.completenessFactor))}if(e.transferOffscreenToPrimary(),1===s)break}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,s)}l((o=o.apply(i,a||[])).next())}));var i,a,r,o},f=(e,t)=>{const{panels:n}=t,{timeRange:i,width:a,height:r,margins:o}=t;if(!i)return;const l=n.map(((e,t)=>(0,s.As)((e=>{const s=(e[0]-i.min)/(i.max-i.min),l=t/n.length+e[1]*(1/n.length);return[o.left+s*(a-o.left-o.right),r-o.bottom-l*(r-o.bottom-o.top)]})))),c=l.map((e=>(0,h.bt)(e))),m=n.map(((e,t)=>(0,s.As)((e=>[e[0],e[1]+o.top])))),u=n.map(((e,t)=>o.left)),g=n.map(((e,t)=>r-o.bottom-o.top));e.setState(Object.assign(Object.assign({},e.getState()),{timeRange:i,transformations:l,yAxisTransformations:m,yAxisWidths:u,yAxisHeights:g,inverseTransformations:c}))},b=(e,t)=>{if(e.type===o.II.Move)return;const n=t.getProps(),i=t.getState();if(!n)return;if(!i)return;const{inverseTransformations:a,dragging:r}=i;for(let s=0;s<a.length;s++){const l=(0,h.DC)(a[s],e.point);if(0<=l[1]&&l[1]<=1)return void(e.type===o.II.Press?t.setState(Object.assign(Object.assign({},i),{captureWheel:!0,anchorTimepoint:l[0],dragging:!1})):e.type===o.II.Release&&(r||n.onClick&&n.onClick({timepoint:l[0],panelIndex:s,y:l[1]})))}},y=(e,t)=>{e.type===o.vT.Leave&&t.setState(Object.assign(Object.assign({},t.getState()),{captureWheel:!1}))},w=(e,t)=>{const n=e.getProps();if(!n)return;const i=e.getState(),{anchorTimepoint:a,inverseTransformations:r,timeRange:o}=i;if(null===o)return;const s=t.position;if(!s)return;if(0===r.length)return;e.setState(Object.assign(Object.assign({},i),{dragging:!0}));const l=(0,h.DC)(r[0],s)[0];if(null!==a){const e=((e,t)=>({min:Math.floor(e.min+t),max:Math.floor(e.max+t)}))(o,a-l);n.onDrag&&n.onDrag({newTimeRange:e})}else e.setState(Object.assign(Object.assign({},i),{anchorTimepoint:l}))},T=(e,t)=>{const n=t.getProps();n&&t.getState().captureWheel&&(e.deltaY>0?n.onTimeZoom&&n.onTimeZoom({direction:"out"}):e.deltaY<0&&n.onTimeZoom&&n.onTimeZoom({direction:"in"}))},v=(e,t)=>{const n=t.getProps();if(!n)return!0;for(let t of n.customActions||[])if("button"===t.type&&t.keyCode===e.keyCode)return t.callback(),!1;switch(e.keyCode){case 37:return n.onTimeShiftFrac&&n.onTimeShiftFrac(-.2),!1;case 39:return n.onTimeShiftFrac&&n.onTimeShiftFrac(.2),!1;case 187:return n.onTimeZoom&&n.onTimeZoom({direction:"out"}),!1;case 189:return n.onTimeZoom&&n.onTimeZoom({direction:"in"}),!1;case 35:return n.onGotoEnd&&n.onGotoEnd(),!1;case 36:return n.onGotoHome&&n.onGotoHome(),!1;default:return!0}},x=()=>new o.Fw(p,f,d,{discreteMouseEventHandlers:[b],dragHandlers:[w],keyboardEventHandlers:[v],mousePresenceEventHandlers:[y],wheelEventHandlers:[T]}),C={},S=(e,t,n)=>{const{panels:i,height:a,margins:r}=t;if(0!==i.length){e.wipe();for(let t=0;t<i.length;t++){const n=(0,s.As)((e=>{const n=e[0],o=t/i.length+e[1]*(1/i.length);return[0+n*r.left,a-r.bottom-o*(a-r.bottom-r.top)]})),o=e.transform(n),l=i[t].label();let c={xmin:.2,ymin:.2,xmax:.6,ymax:.6},m={Horizontal:"AlignRight",Vertical:"AlignCenter"};const u={pixelSize:12,family:"Arial"};o.drawText({rect:c,alignment:m,font:u,pen:{color:"black"},brush:{color:"black"},text:l})}}},k=(e,t)=>{},R=()=>new o.Fw(S,k,C),E={transformation:[[1,0,0],[0,1,0],[0,0,1]],inverseTransformation:[[1,0,0],[0,1,0],[0,0,1]]},j=(e,t,n)=>{const{timeRange:i,samplerate:a}=t;if(!i)return;e.wipe();const r={color:"rgb(22, 22, 22)"},o={pixelSize:12,family:"Arial"},s={color:"rgb(22, 22, 22)"},{transformation:l}=n,c=e.transform(l);c.drawLine(i.min,1,i.max,1,r);const m=A(i.min,i.max,t.width,a);for(let e of m.ticks)c.drawLine(e.t,1,e.t,1-e.height,r);const u=m.scale_info;if(u.label){c.drawLine(u.t1,.45,u.t2,.45,r),c.drawLine(u.t1,.45,u.t1,.5,r),c.drawLine(u.t2,.45,u.t2,.5,r);let e={xmin:u.t1,ymin:0,xmax:u.t2-u.t1,ymax:.35},t={Horizontal:"AlignCenter",Vertical:"AlignTop"};c.drawText({rect:e,alignment:t,font:o,pen:r,brush:s,text:u.label})}},O=(e,t)=>{const{timeRange:n,width:i,height:a,margins:r}=t;if(!n)return;const o=(0,s.As)((e=>{const t=(e[0]-n.min)/(n.max-n.min),o=e[1];return[r.left+t*(i-r.left-r.right),a-r.bottom+50-50*o]})),l=(0,h.bt)(o);e.setState(Object.assign(Object.assign({},e.getState()),{transformation:o,inverseTransformation:l})),e.repaintImmediate()},A=(e,t,n,i)=>{const a={ticks:[],scale_info:{t1:0,t2:0,label:""}};let r=n;const o=[{name:"1 ms",interval:.001*i},{name:"10 ms",interval:.01*i},{name:"100 ms",interval:.1*i},{name:"1 s",interval:1*i},{name:"10 s",interval:10*i},{name:"1 m",interval:60*i},{name:"10 m",interval:600*i},{name:"1 h",interval:3600*i},{name:"1 day",interval:86400*i}];let s=!0,l=.2;for(let n of o){let i=!1;if(i=r/(t-e)*n.interval>=15,i){let i=Math.floor(e/n.interval),r=Math.ceil(t/n.interval),o=!0;for(let c=i;c<=r;c++){let i=c*n.interval;if(e<=i&&i<=t){let t={t:i,height:l};s&&(o&&(a.scale_info={t1:e,t2:e+n.interval,label:n.name},o=!1),s=!1),a.ticks.push(t)}}l+=.1,l=Math.min(l,.45)}}return a.ticks=a.ticks.filter(((e,t)=>!(t>0&&Math.abs(a.ticks[t-1].t-e.t)<1))),a},H=()=>new o.Fw(j,O,E),D={},F=()=>new o.Fw(((e,t,n)=>{const{numTimepoints:i,timeRange:a,currentTime:r}=t.info,{dragTimeRange:o}=n||{};a&&i&&(e.wipe(),e.fillRect({xmin:0,ymin:.4,xmax:i,ymax:.6},{color:"lightgray"}),e.fillRect({xmin:a.min,ymin:.3,xmax:a.max,ymax:.7},{color:"lightgray"}),e.drawRect({xmin:a.min,ymin:.3,xmax:a.max,ymax:.7},{color:"gray",width:2}),r&&e.drawLine(r,.3,r,.7,{color:"blue",width:2}),o&&e.drawRect({xmin:o.min,ymin:.3,xmax:o.max,ymax:.7},{color:"darkgreen",width:2}))}),((e,t)=>{const n=(0,s.As)((e=>{const n=t.info.numTimepoints;if(!n)return[0,0];const i=e[0]/n,a=e[1];return[50+i*(t.width-50-50),a*t.height]}));e.setTransformMatrix(n),e.scheduleRepaint()}),D,{discreteMouseEventHandlers:[(e,t)=>{const n=t.getProps(),i=t.getState();if(n&&i)if(e.type===o.II.Press)t.setState(Object.assign(Object.assign({},t.getState()),{dragging:!1}));else if(e.type===o.II.Release&&!i.dragging){const t=n.info.timeRange;if(!t)return;const i=e.point[0];n.onCurrentTimeChanged(i);const a=t.max-t.min;n.onTimeRangeChanged({min:Math.floor(i-a/2),max:Math.floor(i+a/2)})}}],dragHandlers:[(e,t)=>{const n=e.getProps();if(!n)return;const i=n.info.numTimepoints;if(!i)return;const{anchorCurrentTime:a,anchorTimeRange:r,dragging:o}=e.getState();if(!o){const t=n.info.timeRange;if(!t)return;e.setState(Object.assign(Object.assign({},e.getState()),{dragging:!0,anchorCurrentTime:n.info.currentTime||null,anchorTimeRange:t}))}const{position:s,anchor:l}=t;if(!s)return;if(!l)return;let c=s[0]-l[0];r&&(r.max+c>i&&(c=i-r.max),r.min+c<0&&(c=0-r.min),null!=a&&n.onCurrentTimeChanged(a+c),void 0!==r&&n.onTimeRangeChanged({min:r.min+c,max:r.max+c}))}]}),I=e=>{const t={width:e.width,height:e.height,info:e.info,onCurrentTimeChanged:e.onCurrentTimeChanged,onTimeRangeChanged:e.onTimeRangeChanged},n=(0,o.sJ)(F,t),i=(0,o.jU)([n]);return a().createElement(r.Z,Object.assign({layers:i},{width:e.width,height:e.height}))};var Z=n(47033),M=n(31222);const N=e=>{const{currentTime:t,samplerate:n,width:i,onChange:r}=e;let o={width:i,padding:5,border:"solid 1px lightgray"};return a().createElement("div",{style:o},"Time: ",a().createElement(Y,{width:i-50,title:"Click to edit current time",text:z(t,n),onChange:e=>{let t=L(e,n);void 0!==t?r(t):console.warn(`Invalid human time string: ${e}`)}}))},P=e=>{const{timeRange:t,samplerate:n}=e;let i={width:e.width,padding:5,border:"solid 1px lightgray"};return a().createElement("div",{style:i},"Range: ",a().createElement(Y,{width:e.width-50,title:"Click to edit time range",text:_(t,n),onChange:t=>{let n=function(e,t){if("none"===e)return null;let n=e.split("-");if(2!==n.length)return;let i=L(n[0],t,{nounits:!0}),a=L(n[1],t);return void 0===i||void 0===a?void 0:{min:i,max:a}}(t,e.samplerate);null==n?console.warn(`Invalid human time range string: ${t}`):e.onChange(n)}}))},_=(e,t)=>e?`${z(e.min,t,{nounits:!0,num_digits:3})} - ${z(e.max,t,{num_digits:3})}`:"none",z=(e,t,n={})=>{if(null===e)return"none";let i=W(e/t,n.num_digits||6);return n.nounits?i+"":`${i} s`},L=(e,t,n={})=>{if("none"===e)return;const i=e.split(/(\s+)/).filter((e=>e.trim().length>0));if(1===i.length)return n.nounits?L(e+" s",t,{nounits:!1}):e.endsWith("s")?L(e.slice(0,e.length-1)+" s",t):void 0;if(2===i.length){let e=Number(i[0]);if(isNaN(e))return;return"s"===i[1]?e*t:void 0}},W=(e,t)=>Math.round(e*Math.pow(10,t))/Math.pow(10,t),Y=e=>{const[t,n]=(0,i.useState)(!1),[r,o]=(0,i.useState)(""),s=()=>{t||(n(!0),o(e.text))},l=()=>{n(!1),e.onChange(r)};let c={width:e.width},m=a().createElement("span",null);if(t)m=a().createElement("input",{type:"text",value:r,readOnly:!1,onFocus:e=>e.target.select(),onBlur:()=>{l()},autoFocus:!0,style:c,onChange:e=>{o(e.target.value)},onKeyDown:e=>{(e=>{"Enter"===e.key&&l()})(e)}});else{let t=e.text;m=a().createElement("span",{title:e.title},a().createElement(M.Z,{onClick:s},a().createElement("span",null,t)))}return m},G=e=>{const{info:t,height:n,onCurrentTimeChanged:i}=e;return a().createElement(Z.Toolbar,{style:{minHeight:n}},a().createElement(N,{width:180,currentTime:t.currentTime||null,samplerate:t.samplerate,onChange:i})," ",a().createElement(P,{width:250,timeRange:t.timeRange||null,samplerate:t.samplerate,onChange:e.onTimeRangeChanged}),a().createElement("span",null,t.statusText))};var q=n(91871);const J={paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4},$=e=>{const t={width:e.width,height:e.height,top:e.top,overflow:"hidden"};let n=[];n.push({type:"button",title:"Time zoom in (+)",onClick:e.onZoomIn,icon:a().createElement(q.LT3,null)}),n.push({type:"button",title:"Time zoom out (-)",onClick:e.onZoomOut,icon:a().createElement(q.oN5,null)}),n.push({type:"button",title:"Shift time left [left arrow]",onClick:e.onShiftTimeLeft,icon:a().createElement(q.x_l,null)}),n.push({type:"button",title:"Shift time right [right arrow]",onClick:e.onShiftTimeRight,icon:a().createElement(q.Z1Y,null)}),n.push({type:"divider"});for(let t of e.customActions||[])n.push({type:t.type||"button",title:t.title,onClick:t.callback,icon:t.icon,selected:t.selected});return a().createElement("div",{className:"TimeWidgetToolBar",style:Object.assign({position:"absolute"},t)},n.map(((e,t)=>{if("button"===e.type){let n="inherit";return e.selected&&(n="primary"),a().createElement(Z.IconButton,{title:e.title,onClick:e.onClick,key:t,color:n,style:J},e.icon)}return"divider"===e.type?a().createElement("hr",{key:t}):a().createElement("span",{key:t})})))},B=36,U={left:40,top:20,right:40,bottom:30},V=e=>{const{panels:t,width:n,height:s,customActions:l,numTimepoints:c,maxTimeSpan:m,startTimeSpan:h,samplerate:g,selection:d,selectionDispatch:p}=e,[f,b]=(0,i.useState)({numTimepoints:c}),y=(0,o.sJ)(x),w=(0,o.sJ)(H),T=(0,o.sJ)(R),v=(0,o.sJ)(u),C=(0,o.jU)([y,w,T,v]);(0,i.useEffect)((()=>{y&&y.scheduleRepaint()}),[t,y]),(0,i.useEffect)((()=>{b({currentTime:d.currentTimepoint,timeRange:d.timeRange,numTimepoints:c})}),[d.currentTimepoint,d.timeRange,b,c]),(0,i.useEffect)((()=>{C.forEach((e=>{e&&e.scheduleRepaint()}))}),[t,C]);const S=(0,i.useCallback)((e=>{p({type:"SetCurrentTimepoint",currentTimepoint:e.timepoint})}),[p]),k=(0,i.useCallback)((e=>{p({type:"SetTimeRange",timeRange:e.newTimeRange})}),[p]),E=(0,i.useCallback)((e=>{p({type:"ZoomTimeRange",direction:e.direction})}),[p]),j=(0,i.useCallback)((e=>{}),[]),O=(0,i.useCallback)((e=>{p({type:"SetCurrentTimepoint",currentTimepoint:e})}),[p]),A=(0,i.useCallback)((e=>{p({type:"SetTimeRange",timeRange:e})}),[p]),D=(0,i.useCallback)((()=>{}),[]),F=(0,i.useCallback)((()=>{}),[]),Z=(0,i.useCallback)((e=>{const t=1e3/e/2;C.forEach((e=>{e&&e.setRefreshRate(t)}))}),[C]),M=(0,i.useCallback)((()=>{p({type:"ZoomTimeRange",direction:"in"})}),[p]),N=(0,i.useCallback)((()=>{p({type:"ZoomTimeRange",direction:"out"})}),[p]),P=(0,i.useCallback)((()=>{}),[]),_=(0,i.useCallback)((()=>{}),[]),z={show:!0,currentTime:d.currentTimepoint,timeRange:d.timeRange,samplerate:g,statusText:""},L={customActions:l,panels:t,width:n-B,height:s-40-40,timeRange:d.timeRange,currentTime:d.currentTimepoint,samplerate:g,margins:U,onClick:S,onDrag:k,onTimeZoom:E,onTimeShiftFrac:j,onGotoHome:D,onGotoEnd:F,onRepaintTimeEstimate:Z};return C.forEach((e=>{e&&e.setProps(L)})),a().createElement("div",{className:"TimeWidget",style:{position:"relative",left:0,top:0,width:n,height:s}},a().createElement($,{width:B,height:s,top:0,onZoomIn:M,onZoomOut:N,onShiftTimeLeft:P,onShiftTimeRight:_,customActions:l}),a().createElement("div",{style:{position:"relative",left:B,top:0,width:n-B,height:s}},a().createElement(I,{key:"timespan",width:n-B,height:40,info:f,onCurrentTimeChanged:O,onTimeRangeChanged:A}),a().createElement(r.Z,Object.assign({key:"canvas",layers:C,preventDefaultWheel:!0},{width:n-B,height:L.height})),a().createElement(G,{key:"bottom",width:n-B,height:40,info:z,onCurrentTimeChanged:O,onTimeRangeChanged:A})))}}}]);