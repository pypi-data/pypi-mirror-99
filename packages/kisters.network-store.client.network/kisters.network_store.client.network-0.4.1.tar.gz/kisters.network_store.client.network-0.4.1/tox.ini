[tox]
envlist =
  py{36,37,38,39},flake8,coverage


[flake8]
per-file-ignores =
  **/__init__.py:F401
max-line-length=88


[testenv]
passenv =
  CLIENT_ID
  CLIENT_SECRET
  NETWORK_STORE_URL
extras = test
commands = pytest {posargs}


[testenv:flake8]
skip_install = True
deps =
  flake8
  flake8-black
  flake8-bugbear
  flake8-comprehensions
  flake8-per-file-ignores
commands = flake8 test kisters


[testenv:coverage]
deps =
  coverage
commands =
  - coverage run --source kisters -m pytest {posargs}
  - coverage report -m
