<!DOCTYPE html>
<html>
    <head>
        <title>Filter plugins</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Content</a></span>
                            </li>
                                                    <li>
                                <span><a href="LaVue---Live-Image-Viewer_98091654.html">Live Image Viewer</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Filter plugins
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><span style="color: rgb(23,43,77);">A user <strong>Filter plugin</strong> can be defined by a<strong> class</strong> or a<strong> function</strong> in a python package.</span></p><p>A<span> </span><strong>filter plugin</strong><span> </span>defined by a<span> </span><strong>function</strong><span> </span>is a simple python function with four arguments:<span style="color: rgb(51,153,102);"> </span><em><span style="color: rgb(51,153,102);">numpy_image</span>, <span style="color: rgb(51,153,102);">image_name</span>, <span style="color: rgb(51,153,102);">JSON_metadata</span>, <span style="color: rgb(51,153,102);">ImageWidget</span>.</em></p><p>This function<strong> returns</strong><span> </span><span style="color: rgb(51,153,102);"><em>new_numpy_image</em></span><span> </span>or<span> </span><span style="color: rgb(51,153,102);"><em>None </em></span>or tuple <em><span style="color: rgb(51,153,102);"> (new_numpy_image, filtermetadata_dict)</span> , e.g.</em></p><p><br/></p><p><code><strong><span style="color: rgb(153,51,0);">    from<span> </span><span style="color: rgb(0,0,0);">scipy</span><span> </span>import<span style="color: rgb(0,0,255);"><span style="color: rgb(0,0,0);"><span> </span>ndimage</span></span></span></strong></code></p><p><br/></p><p>       <span>    </span><code><strong><span style="color: rgb(153,51,0);">def</span></strong><span> </span><strong><span style="color: rgb(0,0,255);">rot45</span>(image, imagename, metadata, imagewg):</strong></code><br/><strong><span style="color: rgb(165,173,186);"><code> <span style="color: rgb(122,134,154);">       &quot;&quot;&quot; rotate image by 45 deg</span><br/></code></span></strong></p><p><strong><span style="color: rgb(122,134,154);"><code>        :param image: numpy array with an image</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :type image: :class:`numpy.ndarray`</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :param imagename: image name</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :type imagename: :obj:`str`</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :param metadata: JSON dictionary with metadata</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :type metadata: :obj:`str`</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :param imagewg: image wigdet</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :type imagewg: :class:`lavuelib.imageWidget.ImageWidget`</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :returns: numpy array with an image</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        :rtype: :class:`numpy.ndarray` or `None`</code></span></strong><br/><strong><span style="color: rgb(122,134,154);"><code>        &quot;&quot;&quot;</code></span></strong><br/><code>       <span> </span><strong><span style="color: rgb(153,51,0);">return</span><span> </span>ndimage.rotate(image, 45)</strong></code></p><p><br/></p><p>A<span> </span><strong>filter plugin</strong><span> </span>defined by a<span> </span><strong>class</strong><span> </span>it should have defined<span> </span><strong>__call__</strong><span> </span>method with four arguments:<span> </span><em><span style="color: rgb(51,153,102);">numpy_image</span>, <span style="color: rgb(51,153,102);">image_name</span>,<span style="color: rgb(51,153,102);"> JSON_metadata</span>, <span style="color: rgb(51,153,102);">ImageWidget</span>.</em></p><p>This<span> </span><strong>__call__<span> </span></strong>function returns<span> </span><span style="color: rgb(51,153,102);"><em>new_numpy_image</em></span><span> </span>or<span> </span><em><span style="color: rgb(51,153,102);">None or tuple  (new_numpy_image, filtermetadata_dict) </span>.</em></p><p><em><span> </span></em>Moreover, the class constructor has one <em><span style="color: rgb(51,153,102);">configuration</span></em><span> </span>string argument<span> </span>initialized by<span> an </span><em>i</em><em>nitialization</em> parameter, e.g.<em><br/></em></p><p><code><em>   </em></code></p><p><code>   <strong><span style="color: rgb(153,51,0);">import<span> </span><span style="color: rgb(0,0,0);">numpy</span><span> </span>as<span> </span><span style="color: rgb(0,0,0);">np</span></span></strong></code></p><p>       <span> </span><code><strong><span style="color: rgb(153,51,0);">import<span> </span><span style="color: rgb(0,0,0);">json</span></span></strong></code></p><p><br/></p><p>       <span> </span><code><strong><span style="color: rgb(153,51,0);">class</span><span> </span><span style="color: rgb(0,0,255);">HGap</span>(<span style="color: rgb(102,102,153);">object</span>):</strong></code></p><p><strong><code>       <span> </span><span style="color: rgb(122,134,154);">&quot;&quot;&quot; Horizontal gap filter&quot;&quot;&quot;</span></code></strong></p><p><strong><code>       <span> </span><span style="color: rgb(153,51,0);">def</span><span> </span><span style="color: rgb(0,0,255);">__init__</span>(<span style="color: rgb(153,51,0);">self</span>, configuration=<span style="color: rgb(51,102,255);">None</span>):</code></strong><br/><span style="color: rgb(122,134,154);"><strong><code>            &quot;&quot;&quot; converts the configuration string into a list of indexes</code></strong></span></p><p><span style="color: rgb(122,134,154);"><strong><code>            :param configuration: JSON list with horizontal gap pixels to add</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :type configuration: :obj:`str`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            &quot;&quot;&quot;</code></strong></span><br/><strong><code>           <span style="color: rgb(122,134,154);"><span> </span>#: (:obj:`list` &lt;:obj: `str`&gt;) list of indexes for gap</span></code></strong><br/><strong><code>           <span> </span><span style="color: rgb(153,51,0);">self</span>.__indexes = [</code></strong><strong><code><span style="color: rgb(102,102,153);">int</span>(idx)<span> </span><span style="color: rgb(153,51,0);">for</span><span> </span>idx<span> </span><span style="color: rgb(153,51,0);">in</span><span> </span>json.loads(configuration)]</code></strong></p><p><strong><code>       <span> </span><span style="color: rgb(153,51,0);">def</span><span> </span><span style="color: rgb(0,0,255);">__call__</span>(<span style="color: rgb(153,51,0);">self</span>, image, imagename, metadata, imagewg):</code></strong><br/><strong><code>           <span style="color: rgb(122,134,154);"><span> </span>&quot;&quot;&quot; inserts rows into the image</span></code></strong></p><p><span style="color: rgb(122,134,154);"><strong><code>            :param image: numpy array with an image</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :type image: :class:`numpy.ndarray`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :param imagename: image name</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :type imagename: :obj:`str`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :param metadata: JSON dictionary with metadata</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :type metadata: :obj:`str`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :param imagewg: image wigdet</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :type imagewg: :class:`lavuelib.imageWidget.ImageWidget`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :returns: numpy array with an image</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            :rtype: :class:`numpy.ndarray` or `None`</code></strong></span><br/><span style="color: rgb(122,134,154);"><strong><code>            &quot;&quot;&quot;</code></strong></span><br/><strong><code>           <span> </span><span style="color: rgb(153,51,0);">return</span><span> </span>np.insert(image,<span> </span><span style="color: rgb(153,51,0);">self</span>.__indexes, 0, axis=1)</code></strong></p><p>.</p><p>Moreover,  it can have an <strong>initialize() </strong>or <strong>terminate()</strong><span> </span>method  to perform an action of switching <strong>on</strong> or <strong>off</strong> filters respectively.</p><p>More sophisticated examples can be found at <a href="https://github.com/lavue-org/lavue-filters/blob/develop/lavuefilters/" class="external-link" rel="nofollow">lavuefilters</a> :</p><ul><li><code>lavuefilters.memoplugins.HistoryDump</code> contains a filter which collects distinct images displayed by lavue in memory</li><li><code>lavuefilters.h5pyplugins.H5PYdumpdiff</code> contains a filter which dumps distict images displayed by lavue to an hdf5 file</li><li><code>lavuefilters.h5pyplugins.H5PYdump</code> contains a filter which dumps images displayed by lavue to an hdf5 file</li></ul><p>To configure filters see <a href="LaVue---Filter-plugins-settings_132752895.html">Filter plugins settings</a></p><p><br/></p>
                    </div>

                    
                 
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
<!--<p>Document generated by Confluence on
 06. Feb. 2020 08:57</p>-->
                    <!--<div id="footer-logo"><a href="
http://www.atlassian.com/">Atlassian</a></div>-->
                </section>
            </div>
        </div>     </body>
</html>
