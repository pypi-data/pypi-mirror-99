

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Only signed in users can comment &mdash; django-comments-xtd 3.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Change user image or avatar" href="change-user-image-or-avatar.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> django-comments-xtd
          

          
          </a>

          
            
            
              <div class="version">
                3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example.html">Demo projects</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../logic.html">Control logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webapi.html">Web API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript.html">JavaScript plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../templatetags.html">Filters and template tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrating.html">Migrating to django-comments-xtd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending.html">Customizing django-comments-xtd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i18n.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../templates.html">Templates</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usecases.html">Use cases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="change-user-image-or-avatar.html">Change user image or avatar</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Only signed in users can comment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#simple-example-using-only-the-backend">Simple example using only the backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#customize-the-simple-project">Customize the simple project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#full-featured-example-using-backend-and-frontend-code">Full featured example using backend and frontend code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#customize-the-quotes-app">Customize the quotes app</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customize-the-articles-app-of-the-comp-project">Customize the articles app of the comp project</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">django-comments-xtd</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../usecases.html">Use cases</a> &raquo;</li>
        
      <li>Only signed in users can comment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usecases/only-signed-in-can-comment.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="only-signed-in-users-can-comment">
<span id="ref-recipe-only-signed-in-can-comment"></span><h1>Only signed in users can comment<a class="headerlink" href="#only-signed-in-users-can-comment" title="Permalink to this headline">¶</a></h1>
<p>This page describes how to setup django-comments-xtd so that only registered
users can write comments or flag them. That means mere visitors will be
able to see the comments but won’t be able to send them. In order to do so a
visitor must login first. The following instructions use the Django
admin interface to login and logout users.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#simple-example-using-only-the-backend" id="id2">Simple example using only the backend</a></p></li>
<li><p><a class="reference internal" href="#full-featured-example-using-backend-and-frontend-code" id="id3">Full featured example using backend and frontend code</a></p></li>
</ul>
</div>
<div class="section" id="simple-example-using-only-the-backend">
<h2><a class="toc-backref" href="#id2">Simple example using only the backend</a><a class="headerlink" href="#simple-example-using-only-the-backend" title="Permalink to this headline">¶</a></h2>
<p>A simple site using django-comments-xtd can be represented by the
<a class="reference internal" href="../example.html#example-simple"><span class="std std-ref">Simple project</span></a>.</p>
<div class="section" id="customize-the-simple-project">
<h3>Customize the simple project<a class="headerlink" href="#customize-the-simple-project" title="Permalink to this headline">¶</a></h3>
<p>The Simple project is a basic example site that allows both, visitors and
registered users, post comments to articles. It has been introduced in the Demo
projects page: <a class="reference internal" href="../example.html#example-simple"><span class="std std-ref">Simple project</span></a>. The example loads a couple of articles to
illustrate the functionality.</p>
<p>If you have already setup the <a class="reference internal" href="../example.html#example-simple"><span class="std std-ref">Simple project</span></a>, and have sent a few
testing comments to see that visitors and registered users can comment, add the
<a class="reference internal" href="../settings.html#std:setting-COMMENTS_XTD_APP_MODEL_OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">COMMENTS_XTD_APP_MODEL_OPTIONS</span></code></a> entry at the bottom of the
<code class="docutils literal notranslate"><span class="pre">settings.py</span></code> module to allow only registered users to post comments:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">COMMENTS_XTD_APP_MODEL_OPTIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;allow_flagging&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s1">&#39;allow_feedback&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s1">&#39;show_feedback&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s1">&#39;who_can_post&#39;</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Once the change is saved and Django has reloaded check that, as before,
registered users can comment without issues, however visitors get the HTTP-400
page (Bad Request).</p>
<p>As a final step to customize the simple example site either edit
<code class="docutils literal notranslate"><span class="pre">templates/comments/form.html</span></code> or <code class="docutils literal notranslate"><span class="pre">templates/articles/article_detail.html</span></code>
to display a message inviting visitors to login or register instead of showing
the post comment form.</p>
<p>As an example, here is a modified version of the <code class="docutils literal notranslate"><span class="pre">article_detail.html</span></code>
template of the Simple project that displays a message with a link to the login
page when the user is not authenticated:</p>
<blockquote>
<div><div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>[...]

  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">object.allow_comments</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">user.is_authenticated</span> <span class="cp">%}</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;comment&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h5</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span><span class="p">&gt;</span>Post your comment<span class="p">&lt;/</span><span class="nt">h5</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;well my-4&quot;</span><span class="p">&gt;</span>
          <span class="cp">{%</span> <span class="k">render_comment_form</span> <span class="nv">for</span> <span class="nv">object</span> <span class="cp">%}</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span><span class="p">&gt;</span>
        Only registered users can post comments. Please,
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;admin:login&#39;</span> <span class="cp">%}</span><span class="s">?next=</span><span class="cp">{{</span> <span class="nv">object.get_absolute_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">h5</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span><span class="p">&gt;</span>comments are disabled for this article<span class="p">&lt;/</span><span class="nt">h5</span><span class="p">&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

[...]
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="full-featured-example-using-backend-and-frontend-code">
<h2><a class="toc-backref" href="#id3">Full featured example using backend and frontend code</a><a class="headerlink" href="#full-featured-example-using-backend-and-frontend-code" title="Permalink to this headline">¶</a></h2>
<p>This section goes through the steps to customize a project that uses both,
the backend and the frontend side of django-comments-xtd, to prevent that
unregistered users can post comments.</p>
<p>We will use the <a class="reference internal" href="../example.html#example-comp"><span class="std std-ref">Comp project</span></a>.</p>
<p>The <a class="reference internal" href="../example.html#example-comp"><span class="std std-ref">Comp project</span></a> contains two very similar apps: articles and quotes.
Both apps allow visitors and registered users to post nested comments. The main
difference between articles and quotes in the Comp project is that the articles
app uses the JavaScript plugin, while the quotes app uses merely the backend.</p>
<div class="section" id="customize-the-quotes-app">
<h3>Customize the quotes app<a class="headerlink" href="#customize-the-quotes-app" title="Permalink to this headline">¶</a></h3>
<p>If you have already setup the <a class="reference internal" href="../example.html#example-comp"><span class="std std-ref">Comp project</span></a>, and have sent a few
testing comments to see that visitors and registered users can comment, edit
the <a class="reference internal" href="../settings.html#std:setting-COMMENTS_XTD_APP_MODEL_OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">COMMENTS_XTD_APP_MODEL_OPTIONS</span></code></a> at the bottom of the
<code class="docutils literal notranslate"><span class="pre">settings.py</span></code> and append the pair <code class="docutils literal notranslate"><span class="pre">'who_can_post':</span> <span class="pre">'users'</span></code> to the
quotes app dictionary:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">COMMENTS_XTD_APP_MODEL_OPTIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;quotes.quote&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;allow_flagging&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;allow_feedback&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;show_feedback&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s1">&#39;who_can_post&#39;</span><span class="p">:</span> <span class="s1">&#39;users&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Once changes are saved and Django has restarted see that registered users can
comment without issues. However visitors get the HTTP-400 page (Bad Request).</p>
<p>One last customization is required to prevent the HTTP-400 Bad Request. We
have to edit the <code class="docutils literal notranslate"><span class="pre">templates/quotes/quote_detail.html</span></code> file and be sure
that the block that renders the comment form is not displayed when the user
browsing the site is a mere visitor. The following changes will make it:</p>
<blockquote>
<div><div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>[...] around line 41...

    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">object.allow_comments</span> <span class="cp">%}</span>
      <span class="cp">{%</span> <span class="k">if</span> <span class="nv">object</span><span class="o">|</span><span class="nf">can_receive_comments_from</span><span class="o">:</span><span class="nv">user</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card card-block mt-4 mb-5&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-body&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;card-title text-center pb-3&quot;</span><span class="p">&gt;</span>Post your comment<span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
            <span class="cp">{%</span> <span class="k">render_comment_form</span> <span class="nv">for</span> <span class="nv">object</span> <span class="cp">%}</span>
          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-4 mb-5 text-center&quot;</span><span class="p">&gt;</span>
          Only registered users can post comments. Please,
          <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;admin:login&#39;</span> <span class="cp">%}</span><span class="s">?next=</span><span class="cp">{{</span> <span class="nv">object.get_absolute_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
        <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
      <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
      <span class="p">&lt;</span><span class="nt">h4</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mt-4 mb-5 text-center text-secondary&quot;</span><span class="p">&gt;</span>
        Comments are disabled for this quote.
      <span class="p">&lt;/</span><span class="nt">h4</span><span class="p">&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

[...]
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See that in the previous snippet we use the template filter
<a class="reference internal" href="../templatetags.html#std:templatetag-can_receive_comments_from"><code class="xref std std-ttag docutils literal notranslate"><span class="pre">can_receive_comments_from</span></code></a>. Using this filter you could change the
setting <code class="docutils literal notranslate"><span class="pre">'who_can_post'</span></code> to <code class="docutils literal notranslate"><span class="pre">'all'</span></code> in your
<a class="reference internal" href="../settings.html#std:setting-COMMENTS_XTD_APP_MODEL_OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">COMMENTS_XTD_APP_MODEL_OPTIONS</span></code></a> to allow mere visitors to post
comments, and your template would do as expected without further changes.</p>
<p>If we rather had used <code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">if</span> <span class="pre">user.is_authenticated</span> <span class="pre">%}</span></code> the template would
have still to be changed to display the comment form to all, visitors and
registered users.</p>
</div>
<p>After the template changes are saved, mere users will see a message
inviting them to login. Also, the <strong>Reply</strong> link to send nested comments is
already aware of the value of the <code class="docutils literal notranslate"><span class="pre">'who_can_post'</span></code> setting and will redirect
you to login if you have not done so yet.</p>
</div>
<div class="section" id="customize-the-articles-app-of-the-comp-project">
<h3>Customize the articles app of the comp project<a class="headerlink" href="#customize-the-articles-app-of-the-comp-project" title="Permalink to this headline">¶</a></h3>
<p>The articles app uses the JavaScript plugin. The only change required consist of
adding the pair <code class="docutils literal notranslate"><span class="pre">'who_can_post':</span> <span class="pre">'users'</span></code> to the <code class="docutils literal notranslate"><span class="pre">'articles.article'</span></code>
dictionary entry of the <a class="reference internal" href="../settings.html#std:setting-COMMENTS_XTD_APP_MODEL_OPTIONS"><code class="xref std std-setting docutils literal notranslate"><span class="pre">COMMENTS_XTD_APP_MODEL_OPTIONS</span></code></a>, as we did
with the quotes app. That will make it work.</p>
<p>Run the site and check that as a mere visitor (<a class="reference external" href="http://localhost:8000/admin/logout">logout</a> first) you can not send comments to
articles. Instead of the comment form there must be a message in blue saying
that <strong>Only registered users can post comments.</strong> If you <a class="reference external" href="http://localhost:8000/admin/login/">login</a> and visit an article’s page the comment
form will be visible again.</p>
<p>The message in blue is the default response hardcoded in the <code class="docutils literal notranslate"><span class="pre">commentbox.jsx</span></code>
module of the JavaScript plugin. The commentbox module controls whether the user
in the session can post comments or not. If the user can not post comments it
defaults to display that message in blue.</p>
<p>Most of the times we will want to customize that message. We will achieve it by
modifying both, the <code class="docutils literal notranslate"><span class="pre">base.html</span></code> and the <code class="docutils literal notranslate"><span class="pre">articles/article_detail.html</span></code>, and
by creating a new template in the <code class="docutils literal notranslate"><span class="pre">comp/templates/django_comments_xtd</span></code>
directory called <code class="docutils literal notranslate"><span class="pre">only_users_can_post.html</span></code>.</p>
<p>The changes in <code class="docutils literal notranslate"><span class="pre">templates/base.html</span></code> consist of adding a hidden block. We will
put content in this hidden block in the <code class="docutils literal notranslate"><span class="pre">articles_detail.html</span></code>. Add the
following HTML code before the script tags in the <code class="docutils literal notranslate"><span class="pre">base.html</span></code> in the
<code class="docutils literal notranslate"><span class="pre">example/comp/templates</span></code> directory:</p>
<blockquote>
<div><div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>[...] around line 67, right before the first &lt;script&gt; tag...

    &lt;div style=&quot;display:none&quot;&gt;
      {% block hidden %}
      {% endblock %}
    &lt;/div&gt;

[...]
</pre></div>
</div>
</div></blockquote>
<p>Add the following code to <code class="docutils literal notranslate"><span class="pre">templates/articles/article_detail.html</span></code>:</p>
<blockquote>
<div><div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span>[...] around line 46, right before the <span class="cp">{%</span> <span class="k">block</span> <span class="nv">extra_js</span> <span class="cp">%}</span>...

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">hidden</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">render_only_users_can_post_template</span> <span class="nv">object</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div></blockquote>
<p>And finally create the file <code class="docutils literal notranslate"><span class="pre">only_users_can_post.html</span></code> within the
<code class="docutils literal notranslate"><span class="pre">comp/templates/django_comments_xtd</span></code> directory, with the following content
in it:</p>
<blockquote>
<div><div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;only-users-can-post-</span><span class="cp">{{</span> <span class="nv">html_id_suffix</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">p</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text-center&quot;</span><span class="p">&gt;</span>Only registered users can post comments. Please,
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;admin:login&#39;</span> <span class="cp">%}</span><span class="s">?next=</span><span class="cp">{{</span> <span class="nv">object.get_absolute_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="p">&gt;</span>login<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
  <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>With all the changes already done,
<a class="reference external" href="http://localhost:8000/admin/logout/">logout</a> of the comp site and reload
the article’s page. You should see the message with the login link.</p>
<img alt="../_images/only-users-can-post.png" src="../_images/only-users-can-post.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="change-user-image-or-avatar.html" class="btn btn-neutral float-left" title="Change user image or avatar" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Daniel Rus Morales

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>