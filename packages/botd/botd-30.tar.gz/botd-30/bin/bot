#!/usr/bin/env python3 
# This file is placed in the Public Domain.

from botl import cfg, e, j, op, os
from botl.csl import Console, exec, parse

from botd.tbl import tbl

def main():
    cfg.wd = e("~/.bot")
    cfg.mods = "irc,rss"
    parse()
    s = Console(tbl)
    s.scandir(j(os.getcwd(), "mod"))
    if cfg.txt:
        s.cmd(cfg.old.txt)
        return
    s.start()
    s.init(cfg.mods)
    s.wait()

exec(main)
