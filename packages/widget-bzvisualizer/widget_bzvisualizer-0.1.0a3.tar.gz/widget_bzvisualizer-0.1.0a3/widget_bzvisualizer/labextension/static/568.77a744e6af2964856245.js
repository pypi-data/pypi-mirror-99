(self.webpackChunkwidget_bzvisualizer=self.webpackChunkwidget_bzvisualizer||[]).push([[568],{508:(e,n,o)=>{var a=o(212),i=o(67).OrbitControls,s=function(e,t){return t=void 0!==t&&t,e=(e=(e=(e=(e=e.replace(/GAMMA/gi,"&Gamma;")).replace(/DELTA/gi,"&Delta;")).replace(/SIGMA/gi,"&Sigma;")).replace(/LAMBDA/gi,"&Lambda;")).replace(/\-/gi,"&mdash;"),t?e.replace(/_(.)/gi,(function(e,t,n,o){return'<tspan baseline-shift="sub">'+t+"</tspan>"})):e.replace(/_(.)/gi,(function(e,t,n,o){return"<sub>"+t+"</sub>"}))};e.exports={BZVisualizer:function(e,n,o,r){e=void 0===e||e,n=void 0===n||n,o=void 0!==o&&o,r=void 0!==r&&r;var l=[],c=new a.MeshBasicMaterial({color:16776704,opacity:.3,transparent:!0}),d=new a.LineBasicMaterial({color:3355443,opacity:1,transparent:!1,linewidth:1}),p=new a.LineBasicMaterial({color:285405,opacity:1,transparent:!1}),h=new a.MeshBasicMaterial({color:3311805,opacity:1,transparent:!1}),u=new a.MeshBasicMaterial({color:16711680,opacity:1,transparent:!1}),m=null,v=null,f=null,g=null;this.loadBZAjax=function(e,t,n){document.getElementById(n).innerHTML="Loading...",$.getJSON(newpath_to_load,(function(e){loadBZ(t,n,e)})).fail((function(e,t,o){var a=t+", "+o;console.log("Request Failed: "+a),document.getElementById(n).innerHTML="Request Failed: "+a}))},this.resizeRenderer=function(){if(g){var e=document.getElementById(g),t=window.devicePixelRatio||1;canvas3d_width=e.offsetWidth,canvas3d_height=e.offsetHeight,f&&(v.aspect=canvas3d_width/canvas3d_height,v.updateProjectionMatrix(),f.setSize(canvas3d_width*t,canvas3d_height*t),f.domElement.style.width=canvas3d_width+"px",f.domElement.style.height=canvas3d_height+"px",f.domElement.width=canvas3d_width*t,f.domElement.height=canvas3d_height*t),E()}};var y=function(e,t){if(t=void 0!==t?t:"#000000",r){(o=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("y",-100),o.setAttribute("x",-100),o.setAttribute("font-family","'Helvetica Neue', Helvetica, Arial, sans-serif");var n=window.devicePixelRatio||1;o.setAttribute("font-size",12*n+"px"),o.setAttribute("fill",t),o.innerHTML=e}else{var o;(o=document.createElement("div")).style.position="absolute",o.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",o.style.color=t,o.style.width=100,o.style.height=100,o.style.fontSize="12px",o.innerHTML=e,o.style.top="-100px",o.style.left="-100px",o.style.userSelect="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.setAttribute("unselectable","on"),o.style.pointerEvents="none"}return o};function w(e,t){var n=e.clone().project(t),o=window.devicePixelRatio||1;if(r){var a=.5*f.domElement.viewBox.baseVal.width,i=.5*f.domElement.viewBox.baseVal.height;f.domElement.viewBox.baseVal.x,f.domElement.viewBox.baseVal.y,n.x=n.x*a,n.y=-n.y*i}else a=.5*f.getContext().canvas.width/o,i=.5*f.getContext().canvas.height/o,n.x=n.x*a+a,n.y=-n.y*i+i;return{left:n.x,top:n.y}}function E(){f.render(m,v),r?l.forEach((function(e){pos=e[0],textcontent=e[1],e.length>2?(the_color=e[2],t=y(textcontent,the_color)):t=y(textcontent),pos2d=w(pos,v),t.setAttribute("y",pos2d.top),t.setAttribute("x",pos2d.left),f.domElement.appendChild(t)})):l.forEach((function(e){pos=e[0],text=e[1],pos2d=w(pos,v),text.style.top=pos2d.top+"px",text.style.left=pos2d.left+"px"}))}this.loadBZ=function(t,w,_){g=t;var x=document.getElementById(t),M=window.devicePixelRatio||1;for(document.getElementById(w).innerHTML="";x.firstChild;)x.removeChild(x.firstChild);l=[],m=new a.Scene,canvas3d_width=x.offsetWidth,canvas3d_height=x.offsetHeight,(v=new a.PerspectiveCamera(45,canvas3d_width/canvas3d_height,.01,1e3)).position.z=3,r?(f=new a.SVGRenderer).setQuality("high"):f=new a.WebGLRenderer({alpha:!0,preserveDrawingBuffer:!0}),f.setClearColor(16777215,0),f.setSize(canvas3d_width*M,canvas3d_height*M),f.domElement.style.width=canvas3d_width+"px",f.domElement.style.height=canvas3d_height+"px",f.domElement.width=canvas3d_width*M,f.domElement.height=canvas3d_height*M,x.appendChild(f.domElement),controls=new i(v,f.domElement),controls.addEventListener("change",E),controls.enableDamping=!0,controls.dampingFactor=.25,controls.enableZoom=!0,special_points=_.kpoints,b1=_.b1,b2=_.b2,b3=_.b3,max_b_length=Math.sqrt(Math.max(Math.pow(b1[0],2)+Math.pow(b1[1],2)+Math.pow(b1[2],2),Math.pow(b2[0],2)+Math.pow(b2[1],2)+Math.pow(b2[2],2),Math.pow(b3[0],2)+Math.pow(b3[1],2)+Math.pow(b3[2],2)));var L=1.5*max_b_length;for(var O in v.position.z=3*max_b_length,data=_.faces_data,special_points){pos=special_points[O],radius=.02*max_b_length;var C=new a.SphereGeometry(radius,16,16);(A=new a.Mesh(C,h)).translateX(pos[0]),A.translateY(pos[1]),A.translateZ(pos[2]),m.add(A),O=s(O,forSVG=r);var T=y(O);r?(f.domElement.appendChild(T),l.push([new a.Vector3(pos[0],pos[1],pos[2]),O])):(x.appendChild(T),l.push([new a.Vector3(pos[0],pos[1],pos[2]),T]))}e&&(axesLabels=[[new a.Vector3(1,0,0),'<span style="font-style: italic">x</span>'],[new a.Vector3(0,1,0),'<span style="font-style: italic">y</span>'],[new a.Vector3(0,0,1),'<span style="font-style: italic">z</span>']],r&&(axesLabels=[[new a.Vector3(1,0,0),'<tspan style="font-style: italic">x</tspan>'],[new a.Vector3(0,1,0),'<tspan style="font-style: italic">y</tspan>'],[new a.Vector3(0,0,1),'<tspan style="font-style: italic">z</tspan>']]),axesLabels.forEach((function(e){dir=e[0],O=e[1];var t=new a.Vector3(0,0,0),n=new a.ArrowHelper(dir,t,L,5592405,headLength=L/10,headwidth=L/20);m.add(n),the_color="#555555",T=y(O,color=the_color),pos=dir.clone(),pos.sub(t),pos.multiplyScalar(L),r?(f.domElement.appendChild(T),l.push([pos,O,the_color])):(x.appendChild(T),l.push([pos,T]))})));var S=[[b1,'<span style="font-weight: bold">b</span><sub>1</sub>'],[b2,'<span style="font-weight: bold">b</span><sub>2</sub>'],[b3,'<span style="font-weight: bold">b</span><sub>3</sub>']];r&&(S=[[b1,'<tspan style="font-weight: bold">b</tspan><tspan baseline-shift="sub">1</tspan>'],[b2,'<tspan style="font-weight: bold">b</tspan><tspan baseline-shift="sub">2</tspan>'],[b3,'<tspan style="font-weight: bold">b</tspan><tspan baseline-shift="sub">3</tspan>']]),n||(S=[]),S.forEach((function(e){b=e[0],O=e[1],b_length=Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)),dir=new a.Vector3(b[0]/b_length,b[1]/b_length,b[2]/b_length);var t=new a.Vector3(0,0,0),n=0,o=new a.ArrowHelper(dir,t,length=b_length,n=n,headLength=b_length/10,headwidth=b_length/20);m.add(o);var i=y(O=O);pos=dir.clone(),pos.sub(t),pos.multiplyScalar(b_length),r?(f.domElement.appendChild(i),l.push([pos,O])):(x.appendChild(i),l.push([pos,i]))}));var P=new a.Geometry;data.triangles_vertices.forEach((function(e){P.vertices.push(new a.Vector3(e[0],e[1],e[2]))})),data.triangles.forEach((function(e){P.faces.push(new a.Face3(e[0],e[1],e[2]))}));var V=new a.Mesh(P,c);geometry=new a.EdgesGeometry(V.geometry);var D=new a.LineSegments(geometry,d);if(m.add(V),m.add(D),path=_.path,path.forEach((function(e){label1=e[0],label2=e[1],p1=special_points[label1],p2=special_points[label2];var t=new a.Geometry;t.vertices.push(new a.Vector3(p1[0],p1[1],p1[2])),t.vertices.push(new a.Vector3(p2[0],p2[1],p2[2]));var n=new a.Line(t,p);n.material.linewidth=4,n.name="pathvectors",m.add(n)})),this.update_pathVector=function(e){for(var t=m.getObjectByName("pathvectors");t;)t=m.getObjectByName("pathvectors"),m.remove(t);e.forEach((function(e){label1=e[0],label2=e[1],p1=special_points[label1],p2=special_points[label2];var t=new a.Geometry;t.vertices.push(new a.Vector3(p1[0],p1[1],p1[2])),t.vertices.push(new a.Vector3(p2[0],p2[1],p2[2]));var n=new a.Line(t,p);n.material.linewidth=4,n.name="pathvectors",m.add(n)})),E()},o)for(var j in kpoints_abs=_.explicit_kpoints_abs,kpoints_abs){var A;pos=kpoints_abs[j],radius=.008*max_b_length,C=new a.SphereGeometry(radius,16,16),(A=new a.Mesh(C,u)).translateX(pos[0]),A.translateY(pos[1]),A.translateZ(pos[2]),A.name="kpts",m.add(A)}E();var Z;toggle_visibility=function(e){0===c.opacity?(c.opacity=.3,c.needsUpdate=!0):(c.opacity=0,c.needsUpdate=!0),E()},this.set_visibility=function(e){e?(c.opacity=.3,c.needsUpdate=!0):(c.opacity=0,c.needsUpdate=!0),E()},this.update_kpts=function(e){for(var t=m.getObjectByName("kpts");t;)t=m.getObjectByName("kpts"),m.remove(t);for(var n in e){pos=e[n],radius=.008*max_b_length;var o=new a.SphereGeometry(radius,16,16),i=new a.Mesh(o,u);i.translateX(pos[0]),i.translateY(pos[1]),i.translateZ(pos[2]),i.name="kpts",m.add(i)}E()};var k=!1;x.addEventListener("touchend",(function(e){if(void 0!==Z&&clearTimeout(Z),k)k=!1,e.preventDefault(),function(e,t){if(void 0===t)var n=!controls.enabled;else n=t;controls.enabled=n,elems=x.getElementsByClassName("BZDoubleClickText");for(var o=0;o<elems.length;o++)x.removeChild(elems[o]);n||x.appendChild(function(e){var t=document.createElement("div");t.classList.add("BZDoubleClickText"),t.style.position="absolute",t.style.fontFamily="'Helvetica Neue', Helvetica, Arial, sans-serif",t.style.zIndex=1,t.style.width="100%",t.style.height="100%",t.style.display="table",t.style.top="0px",t.style.left="0px",t.style.textAlign="center",t.style.verticalAlign="middle",t.style.userSelect="none",t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.MozUserSelect="none",t.setAttribute("unselectable","on");var n=document.createElement("span");return n.innerHTML="Double click to toggle interaction",n.style.color="rgb(80, 80, 80)",n.style.fontSize="24px",n.style.fontWeight="bold",n.style.backgroundColor="rgba(230,230,230,0.5)",n.style.display="table-cell",n.style.verticalAlign="middle",n.style.lineHeight="normal",n.style.userSelect="none",n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.MozUserSelect="none",n.setAttribute("unselectable","on"),n.onmouseover=function(){this.style.backgroundColor="rgba(230,230,230,0.5)",this.innerHTML="Double click to toggle interaction"},n.onmouseleave=function(){this.style.backgroundColor="rgba(255,255,255,0.01)",this.innerHTML=""},t.appendChild(n),t}())}();else{if(0!=e.targetTouches.length)return void(void 0!==Z&&(clearTimeout(Z),k=!1));k=!0,Z=setTimeout((function(){k=!1}),500)}})),x.addEventListener("touchcancel",(function(e){void 0!==Z&&(clearTimeout(Z),k=!1)})),x.addEventListener("touchmove",(function(e){void 0!==Z&&(clearTimeout(Z),k=!1)}))}}}},67:(e,t,n)=>{var o=n(212),a=function(e,t){var n,a,i,s,r;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.LEFT,MIDDLE:o.MOUSE.MIDDLE,RIGHT:o.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return b.phi},this.getAzimuthalAngle=function(){return b.theta},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),u=h.NONE},this.update=(n=new o.Vector3,a=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),i=a.clone().inverse(),s=new o.Vector3,r=new o.Quaternion,function(){var e=l.object.position;return n.copy(e).sub(l.target),n.applyQuaternion(a),b.setFromVector3(n),l.autoRotate&&u===h.NONE&&P(2*Math.PI/60/60*l.autoRotateSpeed),b.theta+=v.theta,b.phi+=v.phi,b.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,b.theta)),b.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,b.phi)),b.makeSafe(),b.radius*=f,b.radius=Math.max(l.minDistance,Math.min(l.maxDistance,b.radius)),l.target.add(g),n.setFromSpherical(b),n.applyQuaternion(i),e.copy(l.target).add(n),l.object.lookAt(l.target),void 0!==l.object.focus&&(l.object.focus=l.object.position.distanceTo(l.target)),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,g.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),g.set(0,0,0)),f=1,!!(y||s.distanceToSquared(l.object.position)>m||8*(1-r.dot(l.object.quaternion))>m)&&(l.dispatchEvent(c),s.copy(l.object.position),r.copy(l.object.quaternion),y=!1,!0)}),this.connectEvents=function(e){e&&(l.domElement=e),l.domElement.addEventListener("contextmenu",X,!1),l.domElement.addEventListener("mousedown",R,!1),l.domElement.addEventListener("mousewheel",I,{passive:!1}),l.domElement.addEventListener("MozMousePixelScroll",I,{passive:!1}),l.domElement.addEventListener("touchstart",F,{passive:!0}),l.domElement.addEventListener("touchend",G,!1),l.domElement.addEventListener("touchmove",Y,{passive:!1}),l.domElement.addEventListener("keydown",U,!1)},this.dispose=function(){l.domElement.removeEventListener("contextmenu",X,!1),l.domElement.removeEventListener("mousedown",R,!1),l.domElement.removeEventListener("mousewheel",I,!1),l.domElement.removeEventListener("MozMousePixelScroll",I,!1),l.domElement.removeEventListener("touchstart",F,!1),l.domElement.removeEventListener("touchend",G,!1),l.domElement.removeEventListener("touchmove",Y,!1),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",N,!1),document.removeEventListener("mouseout",N,!1),l.domElement.removeEventListener("keydown",U,!1)};var l=this,c={type:"change"},d={type:"start"},p={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},u=h.NONE,m=1e-6,b=new o.Spherical,v=new o.Spherical,f=1,g=new o.Vector3,y=!1,w=new o.Vector2,E=new o.Vector2,_=new o.Vector2,x=new o.Vector2,M=new o.Vector2,L=new o.Vector2,O=new o.Vector2,C=new o.Vector2,T=new o.Vector2;function S(){return Math.pow(.95,l.zoomSpeed)}function P(e){v.theta-=e}function V(e){v.phi-=e}var D,j=(D=new o.Vector3,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),g.add(D)}),A=function(){var e=new o.Vector3;return function(t,n){!0===l.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),Z=function(){var e=new o.Vector3;return function(t,n){var o=l.domElement===document?l.domElement.body:l.domElement;if("PerspectiveCamera"===l.object.type){var a=l.object.position;e.copy(a).sub(l.target);var i=e.length();i*=Math.tan(l.object.fov/2*Math.PI/180),j(2*t*i/o.clientHeight,l.object.matrix),A(2*n*i/o.clientHeight,l.object.matrix)}else"OrthographicCamera"===l.object.type?(j(t*(l.object.right-l.object.left)/l.object.zoom/o.clientWidth,l.object.matrix),A(n*(l.object.top-l.object.bottom)/l.object.zoom/o.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function k(e){"PerspectiveCamera"===l.object.type?f/=e:"OrthographicCamera"===l.object.type?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function z(e){"PerspectiveCamera"===l.object.type?f*=e:"OrthographicCamera"===l.object.type?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function B(e){x.set(e.clientX,e.clientY)}function R(e){if(!1!==l.enabled){if(e.preventDefault(),e.button===l.mouseButtons.LEFT)if(e.ctrlKey||e.metaKey){if(!1===l.enablePan)return;B(e),u=h.PAN}else{if(!1===l.enableRotate)return;!function(e){w.set(e.clientX,e.clientY)}(e),u=h.ROTATE}else if(e.button===l.mouseButtons.MIDDLE){if(!1===l.enableZoom)return;!function(e){O.set(e.clientX,e.clientY)}(e),u=h.DOLLY}else if(e.button===l.mouseButtons.RIGHT){if(!1===l.enablePan)return;B(e),u=h.PAN}u!==h.NONE&&(document.addEventListener("mousemove",H,!1),document.addEventListener("mouseup",N,!1),document.addEventListener("mouseout",N,!1),l.dispatchEvent(d))}}function H(e){if(!1!==l.enabled)if(e.preventDefault(),u===h.ROTATE){if(!1===l.enableRotate)return;!function(e){E.set(e.clientX,e.clientY),_.subVectors(E,w).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;P(2*Math.PI*_.x/t.clientHeight),V(2*Math.PI*_.y/t.clientHeight),w.copy(E),l.update()}(e)}else if(u===h.DOLLY){if(!1===l.enableZoom)return;!function(e){C.set(e.clientX,e.clientY),T.subVectors(C,O),T.y>0?k(S()):T.y<0&&z(S()),O.copy(C),l.update()}(e)}else if(u===h.PAN){if(!1===l.enablePan)return;!function(e){M.set(e.clientX,e.clientY),L.subVectors(M,x).multiplyScalar(l.panSpeed),Z(L.x,L.y),x.copy(M),l.update()}(e)}}function N(e){!1!==l.enabled&&(e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",H,!1),document.removeEventListener("mouseup",N,!1),document.removeEventListener("mouseout",N,!1),l.dispatchEvent(p),u=h.NONE)}function I(e){!1!==l.enabled&&!1!==l.enableZoom&&u===h.NONE&&(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(d),function(e){var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?z(S()):t<0&&k(S()),l.update()}(e),l.dispatchEvent(p))}function U(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){switch(e.keyCode){case l.keys.UP:Z(0,l.keyPanSpeed),l.update();break;case l.keys.BOTTOM:Z(0,-l.keyPanSpeed),l.update();break;case l.keys.LEFT:Z(l.keyPanSpeed,0),l.update();break;case l.keys.RIGHT:Z(-l.keyPanSpeed,0),l.update()}}(e)}function F(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===l.enableRotate)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY)}(e),u=h.TOUCH_ROTATE;break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);O.set(0,o)}if(l.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(a,i)}}(e),u=h.TOUCH_DOLLY_PAN;break;default:u=h.NONE}u!==h.NONE&&l.dispatchEvent(d)}}function Y(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===l.enableRotate)return;if(u!==h.TOUCH_ROTATE)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(E,w).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;P(2*Math.PI*_.x/t.clientHeight),V(2*Math.PI*_.y/t.clientHeight),w.copy(E),l.update()}(e);break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;if(u!==h.TOUCH_DOLLY_PAN)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);C.set(0,o),T.set(0,Math.pow(C.y/O.y,l.zoomSpeed)),k(T.y),O.copy(C)}if(l.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(a,i),L.subVectors(M,x).multiplyScalar(l.panSpeed),Z(L.x,L.y),x.copy(M)}l.update()}(e);break;default:u=h.NONE}}function G(e){!1!==l.enabled&&(l.dispatchEvent(p),u=h.NONE)}function X(e){e.preventDefault()}this.connectEvents(),this.update()};(a.prototype=Object.create(o.EventDispatcher.prototype)).constructor=a,Object.defineProperties(a.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.constraint.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.constraint.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.constraint.dampingFactor=e}}}),e.exports={OrbitControls:a}},163:(e,t,n)=>{var o=n(337),a=n(431),i=n(755),s=n(508).BZVisualizer;n(73);var r=o.DOMWidgetModel.extend({defaults:a.extend(o.DOMWidgetModel.prototype.defaults(),{_model_name:"BrillouinZoneModel",_view_name:"BrillouinZoneView",_model_module:"widget-bzvisualizer",_view_module:"widget-bzvisualizer",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"BrillouinZone World!"})}),l=o.DOMWidgetView.extend({initialize:function(){this.canvasID=a.uniqueId("BZCanvas"),this.infoID=a.uniqueId("info"),this.BZVisualizer=new s(!0,!0,!0,!1)},events:{dblclick:"toggle_faceColor"},render:function(){this.model.on("change:kpts",this.kpts_changed,this),this.model.on("change:face_color",this.faceColor_changed,this),this.model.on("change:path_vectors",this.vectors_changed,this),this.model.on("change:update_structure",this.reloadBZ,this),this.el.innerHTML='<div class="BZ-widget" id="'+this.canvasID+'"></div><div id="'+this.infoID+'"></div>';var e=this.model.get("jsondata"),t=this.model.get("face_color");that=this,i(document).ready((function(){that.BZVisualizer.loadBZ(canvasID=that.canvasID,infoID=that.infoID,e=e),that.BZVisualizer.set_visibility(t)}))},reloadBZ:function(){var e=this.model.get("jsondata"),t=this.model.get("face_color");this.BZVisualizer.loadBZ(canvasID=this.canvasID,infoID=this.infoID,e=e),this.BZVisualizer.set_visibility(t)},toggle_faceColor:function(){const e=this.model.get("face_color");this.model.set("face_color",!e),this.touch()},kpts_changed:function(){const e=this.model.get("kpts");this.BZVisualizer.update_kpts(e)},vectors_changed:function(){const e=this.model.get("path_vectors");this.BZVisualizer.update_pathVector(e)},faceColor_changed:function(){this.BZVisualizer.set_visibility(this.model.get("face_color"))}});e.exports={BrillouinZoneModel:r,BrillouinZoneView:l}},568:(e,t,n)=>{e.exports=n(163),e.exports.version=n(306).version},699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var o=n(645),a=n.n(o)()((function(e){return e[1]}));a.push([e.id,".BZ-widget {\n    width: 100%;\n    height: 450px;\n    align-items: center;\n}\n",""]);const i=a},73:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(379),a=n.n(o),i=n(699);a()(i.Z,{insert:"head",singleton:!1});const s=i.Z.locals||{}},306:e=>{"use strict";e.exports={version:"0.1.0"}}}]);