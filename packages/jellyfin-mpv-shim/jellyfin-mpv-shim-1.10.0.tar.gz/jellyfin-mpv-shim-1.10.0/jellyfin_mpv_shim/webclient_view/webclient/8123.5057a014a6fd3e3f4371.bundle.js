(self.webpackChunk=self.webpackChunk||[]).push([[8123],{98123:function(t,e,a){"use strict";a.r(e),a.d(e,{showEditor:function(){return C}}),a(98010),a(61013),a(48410),a(63238),a(32081),a(61418),a(5769),a(71848);var i=a(6594),n=a(1115),r=a(83094),o=a(28046),l=a(53754),s=(a(78066),a(17734),a(21865),a(16589),a(32819),a(93462),a(38440)),d=a(56346),c=a(81128),u=a.n(c);function b(){if(k)return!1;k=!0,i.ZP.show();var t=r.ZP.parentWithClass(this,"dlg-libraryeditor"),e=o.ZP.getLibraryOptions(t.querySelector(".libraryOptions"));return e=Object.assign(L.library.LibraryOptions||{},e),ApiClient.updateVirtualFolderOptions(L.library.ItemId,e).then((function(){Z=!0,k=!1,i.ZP.hide(),n.default.close(t)}),(function(){k=!1,i.ZP.hide()})),!1}function f(t){var e=r.ZP.parentWithClass(t.target,"listItem");if(e){var a=parseInt(e.getAttribute("data-index")),i=(L.library.LibraryOptions||{}).PathInfos||[],n=null==a?{}:i[a]||{},o=n.Path||(null==a?null:L.library.Locations[a]),c=r.ZP.parentWithClass(t.target,"btnRemovePath");if(c)return void function(t,e){var a=t,i=L.library;(0,d.Z)({title:l.ZP.translate("HeaderRemoveMediaLocation"),text:l.ZP.translate("MessageConfirmRemoveMediaLocation"),confirmText:l.ZP.translate("Delete"),primary:"delete"}).then((function(){var t=L.refresh;ApiClient.removeMediaPath(i.Name,e,t).then((function(){Z=!0,m(r.ZP.parentWithClass(a,"dlg-libraryeditor"))}),(function(){(0,s.Z)(l.ZP.translate("ErrorDefault"))}))}))}(c,o);v(r.ZP.parentWithClass(e,"dlg-libraryeditor"),o,n.NetworkPath)}}function h(t,e){var a="";return a+='<div class="listItem listItem-border lnkPath" data-index="'.concat(e,'" style="padding-left:.5em;">'),a+='<div class="'.concat(t.NetworkPath?"listItemBody two-line":"listItemBody",'">'),a+='<h3 class="listItemBodyText">',a+=t.Path,a+="</h3>",t.NetworkPath&&(a+='<div class="listItemBodyText secondary">'.concat(t.NetworkPath,"</div>")),a+="</div>",(a+='<button type="button" is="paper-icon-button-light" class="listItemButton btnRemovePath" data-index="'.concat(e,'"><span class="material-icons remove_circle"></span></button>'))+"</div>"}function m(t){ApiClient.getVirtualFolders().then((function(e){var a=e.filter((function(t){return t.Name===L.library.Name}))[0];a&&(L.library=a,y(t,L))}))}function y(t,e){var a=(e.library.LibraryOptions||{}).PathInfos||[];a.length||(a=e.library.Locations.map((function(t){return{Path:t}}))),"boxsets"===e.library.CollectionType?t.querySelector(".folders").classList.add("hide"):t.querySelector(".folders").classList.remove("hide"),t.querySelector(".folderList").innerHTML=a.map(h).join("")}function p(){v(r.ZP.parentWithClass(this,"dlg-libraryeditor"))}function v(t,e,i){a.e(3688).then(a.bind(a,63688)).then((function(a){var n=new(0,a.default);n.show({enableNetworkSharePath:!0,pathReadOnly:null!=e,path:e,networkSharePath:i,callback:function(a,i){a&&(e?function(t,e,a){var i=L.library;ApiClient.updateMediaPath(i.Name,{Path:e,NetworkPath:a}).then((function(){Z=!0,m(t)}),(function(){(0,s.Z)(l.ZP.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(t,e,i):function(t,e,a){var i=L.library,n=L.refresh;ApiClient.addMediaPath(i.Name,e,a,n).then((function(){Z=!0,m(t)}),(function(){(0,s.Z)(l.ZP.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(t,a,i)),n.close()}})}))}function g(){P.resolveWith(null,[Z])}var P,L,C=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=jQuery.Deferred();L=e,P=a,Z=!1;var i=n.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});return i.classList.add("dlg-libraryeditor"),i.classList.add("ui-body-a"),i.classList.add("background-theme-a"),i.classList.add("formDialog"),i.innerHTML=l.ZP.translateHtml(u()),i.querySelector(".formDialogHeaderTitle").innerHTML=e.library.Name,function(t,e){y(t,e),t.querySelector(".btnAddFolder").addEventListener("click",p),t.querySelector(".folderList").addEventListener("click",f),t.querySelector(".btnSubmit").addEventListener("click",b),o.ZP.embed(t.querySelector(".libraryOptions"),e.library.CollectionType,e.library.LibraryOptions)}(i,e),i.addEventListener("close",g),n.default.open(i),i.querySelector(".btnCancel").addEventListener("click",(function(){n.default.close(i)})),m(i),a.promise()},Z=!1,k=!1;e.default=C},81128:function(t){t.exports='<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1"><span class="material-icons arrow_back"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <div class="infoBanner" style="margin-bottom:1.8em"> ${ChangingMetadataImageSettingsNewContent} </div> <div class="folders hide"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" style="margin-left:1em" title="${Add}"> <span class="material-icons add"></span> </button> </div> <div class="paperList folderList" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> </div> </div> <div class="formDialogFooter"> <button is="emby-button" type="button" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> '}}]);